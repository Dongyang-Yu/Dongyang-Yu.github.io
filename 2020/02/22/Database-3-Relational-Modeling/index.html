<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://Dongyang-Yu.github.io").hostname,root:"/",scheme:"Pisces",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="引言一旦数据库的需求以ER图的形式被收集并可视化，接下来的工作就是将ER图转化为一个逻辑数据库模型，即关系模式 (Relational schema). 关系模式是对关系数据库模型的可视化图表。本文将介绍如何将ER图转化为关系模式。"><meta property="og:type" content="article"><meta property="og:title" content="Database 3. Relational Modeling"><meta property="og:url" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/index.html"><meta property="og:site_name" content="Dongyang Yu&#39;s Blog"><meta property="og:description" content="引言一旦数据库的需求以ER图的形式被收集并可视化，接下来的工作就是将ER图转化为一个逻辑数据库模型，即关系模式 (Relational schema). 关系模式是对关系数据库模型的可视化图表。本文将介绍如何将ER图转化为关系模式。"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204081908618.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200304213524082.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083129617.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083340151.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083549516.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083633216.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200221164627044.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200221164637059.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083857070.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204083923759.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204084242665.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204084407666.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204085707091.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204085749113.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200221170203169.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206081835622.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206081902769.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082302508.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082343918.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082410526.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082416027.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082441632.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082448893.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082656647.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206082727182.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206083032860.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206083039563.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206083313063.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206083318994.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206084016776.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206084134417.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200206093330452.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211083608237.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211083627974.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211083653071.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211084742096.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211084747401.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211084821825.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211084825396.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085141387.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085147064.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085255817.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085315891.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085328009.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085456421.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200211085511523.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200218081336654.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200218081534914.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222123838358.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222123859093.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222124150768.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222124207761.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222124541624.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222124555994.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125012423.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125025075.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125205447.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125221089.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125517975.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125530234.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222125937751.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222131027536.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222131040562.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222131051752.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222132229296.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222132245550.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222132749956.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222132959499.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200222133010696.png"><meta property="article:published_time" content="2020-02-22T21:23:45.000Z"><meta property="article:modified_time" content="2020-03-05T13:59:08.695Z"><meta property="article:author" content="Dongyang Yu"><meta property="article:tag" content="Relational Modeling"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/image-20200204081908618.png"><link rel="canonical" href="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Database 3. Relational Modeling | Dongyang Yu's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Dongyang Yu's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Hello World.</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Dongyang Yu"><meta itemprop="description" content="Stay hungry. Stay foolish."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dongyang Yu's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Database 3. Relational Modeling</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-02-22 14:23:45" itemprop="dateCreated datePublished" datetime="2020-02-22T14:23:45-07:00">2020-02-22</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2020-03-05 06:59:08" itemprop="dateModified" datetime="2020-03-05T06:59:08-07:00">2020-03-05</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Database/" itemprop="url" rel="index"><span itemprop="name">Database</span> </a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine: </span><a title="valine" href="/2020/02/22/Database-3-Relational-Modeling/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/02/22/Database-3-Relational-Modeling/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="引言"><a href="#引言" class="headerlink" title="引言"></a>引言</h1><p>一旦数据库的需求以ER图的形式被收集并可视化，接下来的工作就是将ER图转化为一个逻辑数据库模型，即<strong>关系模式</strong> (Relational schema). 关系模式是对关系数据库模型的可视化图表。</p><p>本文将介绍如何将ER图转化为关系模式。</p><a id="more"></a><h1 id="Relational-database-model"><a href="#Relational-database-model" class="headerlink" title="Relational database model"></a>Relational database model</h1><blockquote><p><strong>Logical</strong> database model that represents a database as a collection of related tables 关系数据库模型</p></blockquote><h1 id="Relational-schema"><a href="#Relational-schema" class="headerlink" title="Relational schema"></a>Relational schema</h1><blockquote><p><strong>Visual</strong> depiction (可视化描述) of the relational database model , 数据库的模式结构定义,就是你创建了哪些表，表中的属性是什么</p></blockquote><p>Most contemporary commercial DBMS software packages, are <strong>relational DBMS (RDBMS)</strong> software packages</p><h1 id="Terminology"><a href="#Terminology" class="headerlink" title="Terminology"></a>Terminology</h1><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204081908618.png" alt="image-20200204081908618"></p><h2 id="Relation"><a href="#Relation" class="headerlink" title="Relation"></a>Relation</h2><blockquote><p><strong>Table</strong> in a relational database</p></blockquote><ul><li><p>In order for a table to be a relation the following conditions must hold:</p><ul><li><p><strong>Each column</strong> must have a name (<u><strong>within</strong></u> one table, each column name must be unique)</p></li><li><p><em>Within one table, *</em>each row** must be <strong>unique*</strong></p></li><li><p>Within each row, each value in each column must be <strong>single</strong> valued (<u>multiple</u> values of the content represented by the column are <u>not</u> allowed in any rows of the table) 在每一行中，每一列中的值必须是单值，也就是说任一行中不允许出现多值。</p></li><li><p>All values in each column must be from the <strong>same (predefined) domain</strong></p></li></ul></li></ul><p>Example of relational and non-relational tables</p><ul><li>比如下图下方中，有两行完全相同，<code>EmpPhone</code>列中倒数第二行是多值的，最后一行最后一列是字符串而不是日期，所以不是一个关系表。</li></ul><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200304213524082.png" alt="image-20200304213524082"></p><ul><li>与列/行<strong>顺序无关</strong>，比如下图中行/列顺序调换，其实两个表是相同的。</li></ul><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083129617.png" alt="image-20200204083129617"></p><h2 id="Primary-key"><a href="#Primary-key" class="headerlink" title="Primary key"></a>Primary key</h2><blockquote><p>Column (or a set of columns) whose value is <strong>unique for each row</strong></p></blockquote><ul><li><p>每一个关系必须有一个主键</p></li><li><p>主键列名称会有一条<u>下划线</u>，用于区分其他列</p></li></ul><p>Relation with the primary key underlined</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083340151.png" alt="image-20200204083340151"></p><h1 id="将ER图映射为关系"><a href="#将ER图映射为关系" class="headerlink" title="将ER图映射为关系"></a>将ER图映射为关系</h1><h2 id="Entity"><a href="#Entity" class="headerlink" title="Entity"></a>Entity</h2><blockquote><p>Mapping entities into relations</p></blockquote><ul><li><p>Each regular entity becomes a relation 每一个实体都是一个关系</p></li><li><p>Each regular attribute of a regular entity becomes a column of the newly created relation 实体的每一个<u>属性</u>都是关系的<strong>一列</strong></p></li><li><p>If an entity has <u>a single unique attribute</u>, then that attribute becomes the <strong>primary key</strong> in the resulting mapped relation</p></li></ul><p>Example of Entity mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083549516.png" alt="image-20200204083549516"></p><p>Sample data records (样本数据记录) for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083633216.png" alt="image-20200204083633216"></p><h2 id="Composite-attributes"><a href="#Composite-attributes" class="headerlink" title="Composite attributes"></a>Composite attributes</h2><blockquote><p>如果一个实体包含复合属性，则将复合属性的每一个组成部分都映射成关系中的一列，而复合属性自身<strong>并未</strong>显示地出现在映射后的关系中。</p></blockquote><p>Entity with a composite attribute mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200221164627044.png" alt="image-20200221164627044"></p><p>Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200221164637059.png" alt="image-20200221164637059"></p><h2 id="Composite-primary-key"><a href="#Composite-primary-key" class="headerlink" title="Composite primary key"></a>Composite primary key</h2><blockquote><p>A primary key that is composed of <u>multiple columns</u>, we just have <strong>one</strong> primary key</p></blockquote><p>注意，在得到的下图关系中，<code>Building</code>和<code>RoomNumber</code>都有下划线，因为只有这两列<strong>组合</strong>起来才是主键。</p><p>Example Entity with a unique composite attribute mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083857070.png" alt="image-20200204083857070"></p><p>Example Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204083923759.png" alt="image-20200204083923759"></p><h2 id="Optional-attributes"><a href="#Optional-attributes" class="headerlink" title="Optional attributes"></a>Optional attributes</h2><blockquote><p>Optional attribute of an entity is mapped as <strong>an optional column</strong>, 可选属性在列中被标记为<code>(O)</code>，表示值可空。</p></blockquote><p>Example Entity with an optional attribute mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204084242665.png" alt="image-20200204084242665"></p><p>Example Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204084407666.png" alt="image-20200204084407666"></p><h2 id="实体完整性约束Entity-integrity-constraint"><a href="#实体完整性约束Entity-integrity-constraint" class="headerlink" title="实体完整性约束Entity integrity constraint"></a>实体完整性约束Entity integrity constraint</h2><blockquote><p>In a relational table, no <strong>primary key</strong> column can have <strong>null (empty) values</strong>. 所有主键属性必须有非空的取值</p></blockquote><ul><li><p>A rule stating that no primary key column can be optional</p></li><li><p>Every RBMS enforces this rule</p></li></ul><p>Example of compliance and violation 遵守与违反的例子</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204085707091.png" alt="image-20200204085707091"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200204085749113.png" alt="image-20200204085749113"></p><h2 id="Foreign-key"><a href="#Foreign-key" class="headerlink" title="Foreign key"></a>Foreign key</h2><blockquote><p>Column in a relation that refers to <strong>a primary key</strong> column <strong>in another (referred) relation</strong>. 关系中的一列是其他一个关系中的主键</p></blockquote><ul><li>For every occurrence of a foreign key, the relational schema <u>contains a line pointing from the foreign key to the corresponding primary key</u><br>每当有外键时，关系模式中都会有一条从外键指向相对应主键的<strong>连线</strong>。</li><li>另外该列会被标记<code>(FK)</code></li></ul><p>比如下图中，<code>EMPLOYEE</code>中的<u>DeptID</u>是另一个关系<code>DEPARTMENT</code>的主键</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200221170203169.png" alt="image-20200221170203169"></p><h1 id="将联系-Relationships-映射为关系数据库组件"><a href="#将联系-Relationships-映射为关系数据库组件" class="headerlink" title="将联系(Relationships)映射为关系数据库组件"></a>将联系(Relationships)映射为关系数据库组件</h1><h2 id="1-M-relationships"><a href="#1-M-relationships" class="headerlink" title="1:M relationships"></a>1:M relationships</h2><blockquote><p>The relation mapped from the <strong>entity on the M side</strong> <em>of the 1:M relationship</em> <strong>has a foreign key</strong> that corresponds to the <u>primary key</u> of the relation mapped from the 1 side of the 1:M relationship.<br>从1:M关系的M侧的实体映射的关系具有外键，该外键对应于从1:M关系的1侧映射的关系的主键。通俗来说呢，多对一关系，多的这一侧对应只有单独一个实体，那么’多’的这一侧就应该有一个单独的键用来表示它跟’一’这一侧的关系。</p></blockquote><h3 id="Mandatory-participation-on-both-sides"><a href="#Mandatory-participation-on-both-sides" class="headerlink" title="Mandatory participation on both sides"></a>Mandatory participation on <u>both sides</u></h3><p>比如下图中，部门可以有多个雇员，但雇员只属于一个部门，所以雇员会有一个外键用来表示他两之间的关系。</p><p>Example - Mapping a 1:M relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206081835622.png" alt="image-20200206081835622"></p><p>Sample data records for the mapped ER diagram</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206081902769.png" alt="image-20200206081902769"></p><p>如果是1:M的关系，那么在“1”这一侧的主键<strong>Primary key</strong>可以是“M”这一侧的外键<strong>Foreign Key</strong></p><h3 id="Mandatory-participation-on-the-1-sides"><a href="#Mandatory-participation-on-the-1-sides" class="headerlink" title="Mandatory participation on the 1 sides"></a>Mandatory participation on the 1 sides</h3><p>我们拿上图的例子举例说明，强制参与在1侧的影响是<code>EMPLOYEE</code>中的每一行中的DeptID必须是<u>非空值</u></p><h3 id="Mandatory-participation-on-the-M-sides"><a href="#Mandatory-participation-on-the-M-sides" class="headerlink" title="Mandatory participation on the M sides"></a>Mandatory participation on the M sides</h3><p>同样拿上图距离说明，在M这一侧的强制参与表明，所有的部门都至少有一个雇员与之对应。</p><h3 id="Optional-participation-on-the-1-side"><a href="#Optional-participation-on-the-1-side" class="headerlink" title="Optional participation on the 1 side"></a>Optional participation on the 1 side</h3><p><u>可选参与</u>在1侧的影响是这个<code>外键</code>可为空值。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082302508.png" alt="image-20200206082302508"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082343918.png" alt="image-20200206082343918"></p><h3 id="Optional-participation-on-the-M-side"><a href="#Optional-participation-on-the-M-side" class="headerlink" title="Optional participation on the M side"></a>Optional participation on the M side</h3><p>可选参与在M这一侧呢就说明<code>DEPARTMENT</code>的实例可以没有<code>EMPLOYEE</code>的实例。比如下图中关系模式(Relational schema)中左侧雇员表中没有对应部门的雇员</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082410526.png" alt="image-20200206082410526"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082416027.png" alt="image-20200206082416027"></p><h3 id="Renaming-a-foreign-key"><a href="#Renaming-a-foreign-key" class="headerlink" title="Renaming a foreign key"></a>Renaming a foreign key</h3><p>对外键进行重命名是<u>合法</u>的，目的是便于理解关系中角色，比如下图中将<code>教授ID</code>从命名为<code>导师ID</code>，帮助我们更好理解学生与教授之间的关系。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082441632.png" alt="image-20200206082441632"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082448893.png" alt="image-20200206082448893"></p><h2 id="M-N-relationships"><a href="#M-N-relationships" class="headerlink" title="M:N relationships"></a>M:N relationships</h2><p>除了多对多联系的两个实体需要映射为关系外，<strong>多对多联系(relationships)本身</strong>也需要映射为<strong>关系</strong>。这种关系有两个<strong>外键</strong>，对应多对多关系中两个实体的<u>主键</u>。这两个外键就构成了这个新关系的<strong><u>复合主键 (Composite primary key)</u></strong></p><p><u>Bridge relationship</u>: 像桥一样的连接，之间有个桥，即之间有个介质</p><ul><li><p>In addition to the two relations representing the two entities involved in the M:N relationship, <strong>another relation</strong> <em>is created to</em> <strong>represent the M:N <u>relationship</u></strong> <em>itself</em>.</p></li><li><p>This new relation has <strong><em>two foreign keys</em></strong>, corresponding to the primary keys of the two relations representing the two entities involved in the M:N relationship</p></li><li><p>The <strong>two foreign keys form the <u>composite primary key</u></strong> of the new relation</p></li></ul><h3 id="Mandatory-participation-on-both-sides-1"><a href="#Mandatory-participation-on-both-sides-1" class="headerlink" title="Mandatory participation on both sides"></a>Mandatory participation on both sides</h3><p>如下图中展示了学生<code>STUDENT</code>与组织<code>ORGANIZATION</code>这两个实体间的多对多联系–从属<code>BelongsTo</code>关系.当将该ER图映射为关系模式(Relational schema)时，除了学生和组织这两个关系外，还要建立一个代表”从属”这个多对多联系的关系。诸如<code>从属</code>这样的多对多联系，有时候也被称作<strong>桥关系 (Bridge relation)</strong>。</p><h3 id="Bridge-Relation桥关系"><a href="#Bridge-Relation桥关系" class="headerlink" title="* Bridge Relation桥关系"></a>* Bridge Relation桥关系</h3><p>下图关系模式中的<code>BELONGSTO</code> table指出每个学生都有一个组织，因为两边都是强制参与的。</p><p>Example - Mapping an M:N relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082656647.png" alt="image-20200206082656647"></p><p>Sample data records for the mapped ER diagram</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206082727182.png" alt="image-20200206082727182"></p><h3 id="Optional-participation-on-both-sides"><a href="#Optional-participation-on-both-sides" class="headerlink" title="Optional participation on both sides"></a><strong>Optional participation on both sides</strong></h3><p>若<code>STUDNET</code>实体这边的从属关系是<u>可选参与</u>的，则可能会出现存在属于<code>STUDENT</code>表中学生，但这些学生的ID没有出现在<code>BELONGSTO</code>从属关系表中；同样，如果<code>ORGANIZATION</code>实体这边的从属关系是<u>可选参与</u>的，则可能会出现存在额外的属于<code>ORGANIZATION</code>关系中的组织，但这些组织ID没有在<code>BELONGSTO</code>表中体现。</p><p>比如下方关系模式中，学生(4444)没有在从属<code>BELONGSTO</code>关系表中出现可能是因为他不属于任何组织；类似地，组织(O50)也不在从属<code>BELONGSTO</code>关系表中可能是因为它没有任何学生。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206083032860.png" alt="image-20200206083032860"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206083039563.png" alt="image-20200206083039563"></p><h3 id="Relationship-with-an-attribute"><a href="#Relationship-with-an-attribute" class="headerlink" title="Relationship with an attribute"></a>Relationship with an attribute</h3><p>我们曾在第二章中提到过，一个多对多联系可以有自己的属性。当一个具有自身属性的多对多联系被映射成为关系模型时，它的每一个属性都将映射为关系的一列。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206083313063.png" alt="image-20200206083313063"></p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206083318994.png" alt="image-20200206083318994"></p><h2 id="1-1-relationships"><a href="#1-1-relationships" class="headerlink" title="1:1 relationships"></a>1:1 relationships</h2><ul><li>One of the resulting relations will have a foreign key pointing to the primary key of another resulting relation<br>映射得到的某个关系将会有一个外键，该外键指向另一个关系的主键</li><li>One of the mapped relations is chosen to have a foreign key referring to the primary key of the other mapped relation <u><strong>选择其中一个</strong></u>映射关系，使其外键引用另一个映射关系的主键<ul><li>In cases when there is <u>no particular advantage</u> in choosing which resulting relation will include a foreign key, the choice can be <strong>arbitrary</strong><br>如果没有特别的说明，我们可以<strong>任意</strong>挑选一个关系中的主键，将其作为另一个关系的外键。</li><li>但是，有时候选择某一个关系来包含外键，可能比选另一个更有效率。比如，在待选择的关系中，其中一个外键是可选性的，而另一个是强制性的，那么选择强制性的外键更可取。比如下图中，选择<code>EmpID</code>作为外键可以保证外键的取值<u>没有空值</u>。<br>Tip: 但是如果把Foreign key 放到EMPLOYEE中，需要把VehicleID加上<strong>(O)</strong>, optional</li><li>所以，当可选择性和强制性外键同时可供选择时，<u>优先选择强制性外键</u>。</li></ul></li></ul><p>Example - Mapping a 1:1 relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206084016776.png" alt="image-20200206084016776"></p><p>Sample data records for the mapped ER diagram</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206084134417.png" alt="image-20200206084134417"></p><h2 id="参照完整性约束Referential-integrity-constraint"><a href="#参照完整性约束Referential-integrity-constraint" class="headerlink" title="参照完整性约束Referential integrity constraint"></a>参照完整性约束Referential integrity constraint</h2><p>关系数据库中对<u>外键有效取值的定义规则</u></p><blockquote><p>In each row of a relation containing a foreign key, the value of the <strong><em>foreign key EITHER matches</em></strong> one of the values in the <strong><em>primary key</em></strong> <em>column of the referred relation</em> <strong>OR</strong> <em>the value of</em> <strong>the foreign key is null</strong> (empty).<br>在包含外键的关系中，每一行的外键取值要么对应起参照关系中的<strong>主键</strong>取值，要么为空。</p></blockquote><ul><li><p>A rule that defines values that are valid for use in foreign keys</p><ul><li>In a relational schema lines pointing from the foreign key to the corresponding primary key are referred to as <strong>referential integrity constraint lines</strong></li></ul></li></ul><h3 id="Compliance-and-violation-examples"><a href="#Compliance-and-violation-examples" class="headerlink" title="Compliance and violation examples"></a>Compliance and violation examples</h3><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200206093330452.png" alt="image-20200206093330452"></p><h2 id="Example-ER-diagram"><a href="#Example-ER-diagram" class="headerlink" title="Example ER diagram :"></a>Example ER diagram :</h2><blockquote><p>ZAGI Retail Company Sales Department Database 零售公司销售部门数据库ER图</p></blockquote><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211083608237.png" alt="image-20200211083608237"></p><p>Mapped relational schema关系模式</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211083627974.png" alt="image-20200211083627974"></p><p>Sample data records</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211083653071.png" alt="image-20200211083653071"></p><h1 id="若干候选键的实体"><a href="#若干候选键的实体" class="headerlink" title="若干候选键的实体"></a>若干候选键的实体</h1><p>Mapping entities with candidate keys (multiple unique attributes) into relations</p><ul><li><p>One of the candidate keys is chosen by database designer the as a primary key during the mapping process<br>选择候选键中的一个称为该实体映射过程中的<strong>主键</strong>。加上<u>下划线</u></p></li><li><p>Other candidate keys are mapped as <u>non-primary</u> key columns<br>其它候选键则被映射为非主键列。用<code>(U)</code>表示他们可被唯一标识</p></li></ul><p>Example:</p><p>比如下图例子中选择<code>EmpID</code>作为主键，则<code>SSN</code>作为非主键列，后面跟上<code>(U)</code></p><p>Entity with candidate keys mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211084742096.png" alt="image-20200211084742096">)<img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211084747401.png" alt="image-20200211084747401"></p><p>Entity with regular and composite candidate keys mapped into a relation</p><p>下图中将复合唯一属性作为非主键列</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211084821825.png" alt="image-20200211084821825">)<img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211084825396.png" alt="image-20200211084825396"></p><h1 id="多值属性的实体"><a href="#多值属性的实体" class="headerlink" title="多值属性的实体"></a>多值属性的实体</h1><blockquote><p>Mapping entities with multivalued attributes into relational database constructs</p></blockquote><ul><li><p>An entity containing the <u>multivalued</u> attribute is mapped without the multi-valued attribute</p></li><li><p>The multi-valued attribute is mapped as <strong>a separate relation</strong> that has a column representing the <u>multivalued attribute</u> and <u>a foreign key</u> column referring to the primary key of the relation resulting from the entity itself<br>原因是<strong><u>列只能包含单值</u></strong>，所以要将多值属性的列重新创建一个新关系</p><ul><li>多值属性将被映射为一个<strong><u>单独</u></strong>的关系，该关系包含一个代表<strong>多值属性列</strong>和一个连接对应主键的<strong>外键列</strong>。</li><li>Both of these columns form a <u>composite primary key</u> for the separate relation. 这两列形成一个<strong>复合主键</strong>。</li></ul></li></ul><p>Example:</p><p>如下图，职员拥有多个手机号码。注意，这两列都不是唯一标识的（例如雇员1234，3456和1324共享同一个电话号码），但是将两列组合起来确实唯一标识的。因此，两列组合起来形成<u>复合主键</u>。</p><p>Entity with multivalued attributes mapped into relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085141387.png" alt="image-20200211085141387"></p><p>Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085147064.png" alt="image-20200211085147064"></p><h1 id="派生属性的实体"><a href="#派生属性的实体" class="headerlink" title="派生属性的实体"></a>派生属性的实体</h1><blockquote><p>Mapping derived attributes</p></blockquote><ul><li>Derived attributes are <strong>not</strong> mapped as a part of the relational schema<br>之前提到过，派生属性并非永久存储在数据库中。因此，派生属性<strong><u>并不会</u></strong>被映射为关系模式的一部分。</li><li>They are implemented as a part of the database front-end application.<br>尽管派生属性不属于关系模式的一部分，但它仍可以作为数据库前端应用的一部分。</li></ul><p>Example:</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085255817.png" alt="image-20200211085255817"></p><p>Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085315891.png" alt="image-20200211085315891"></p><p>The relation shown as presented to a user in a front-end application</p><p>用户可以在前端应用中看到该关系。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085328009.png" alt="image-20200211085328009"></p><h1 id="Various-attributes-Example"><a href="#Various-attributes-Example" class="headerlink" title="Various attributes Example"></a>Various attributes Example</h1><p>Entity with various types of attributes mapped into a relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085456421.png" alt="image-20200211085456421"></p><p>Sample data records</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200211085511523.png" alt="image-20200211085511523"></p><h1 id="一元关系的映射"><a href="#一元关系的映射" class="headerlink" title="一元关系的映射"></a>一元关系的映射</h1><blockquote><p>Mapping unary relationships</p></blockquote><ul><li>Unary relationships in ER diagrams are mapped in the same way as binary relationships</li></ul><h2 id="1-M-unary-relationships"><a href="#1-M-unary-relationships" class="headerlink" title="1:M unary relationships"></a>1:M unary relationships</h2><ul><li>The relation mapped from an entity involved in a 1:M unary relationship contains a <strong>foreign key</strong> that <strong>corresponds to its own primary key</strong><br>一对多一元联系实体映射得到的关系中包含一个<strong>外键</strong>，并且该外键对应其自身的主键。 但注意：外键名必须<u>区别</u>其对应主键名字，因为不能有名称相同的两列，另外重命名也说明了关系表中外键的角色。</li></ul><p>Example</p><p>比如下图在的<code>ReferredBy</code>,有的顾客可以不被任何其他顾客介绍。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200218081336654.png" alt="image-20200218081336654"></p><blockquote><p>Client can be referred by only one client but can refer multiple clients</p></blockquote><p>Data records</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200218081534914.png" alt="image-20200218081534914"></p><h2 id="M-N-unary-relationships"><a href="#M-N-unary-relationships" class="headerlink" title="M:N unary relationships"></a>M:N unary relationships</h2><ul><li>In addition to the relation representing the entity involved in a unary M:N relationship, another relation is created to <strong>represent the M:N relationship itself</strong><br>多对多联系本身也需要映射为<strong>另一个关系</strong>.</li><li>This new relation has <strong>two foreign keys</strong>, both of them corresponding to the primary key of the relation representing the entity involved in the unary M:N relationship<br>该关系有两个<strong>外键</strong>，他们对应两个实体的<strong>主键</strong></li><li><em>Each of the</em> <strong>foreign keys is used as a part of the <u>composite primary key</u></strong> <em>of the new relation</em><br>这两个外键作为新关系的<strong>复合主键</strong>。</li><li>同样的，都需要<u>重命名</u>。</li></ul><p>Mapping a M:N unary relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222123838358.png" alt="image-20200222123838358"></p><p>Sample data records for the mapped relations</p><p>因为两侧都是可选的，所以在关系中，允许没有指导者的雇员(1324, Ted)，也允许有没有被指导的雇员(1234, Becky)</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222123859093.png" alt="image-20200222123859093"></p><h2 id="1-1-unary-relationships"><a href="#1-1-unary-relationships" class="headerlink" title="1:1 unary relationships"></a>1:1 unary relationships</h2><p>比如下图的例子，每一个人都赠送另一个人一份礼物，并且每一个人会从确定的人那里得到礼物。</p><p>Mapping a 1:1 unary relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222124150768.png" alt="image-20200222124150768"></p><p>Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222124207761.png" alt="image-20200222124207761"></p><h1 id="相同实体间多个联系的映射"><a href="#相同实体间多个联系的映射" class="headerlink" title="相同实体间多个联系的映射"></a>相同实体间多个联系的映射</h1><blockquote><p>Mapping multiple relationships between the same entities</p></blockquote><p>比如下图中的例子，<code>PACKAGE</code>关系有两个外键，他们都参照的是<code>EMPLOYEE</code>关系中的主键，但被重命名后便于更好的理解。</p><p>Mapping multiple relationships between the same entities</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222124541624.png" alt="image-20200222124541624"></p><p>Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222124555994.png" alt="image-20200222124555994"></p><h1 id="弱实体"><a href="#弱实体" class="headerlink" title="弱实体"></a>弱实体</h1><blockquote><p>Weak entities are mapped in a same way as regular entities with one addition:</p></blockquote><ul><li><em>The resulting relation has a</em> <strong>composite primary key</strong> <em>that is</em> <strong>composed of the partial identifier and the foreign key</strong> <em>corresponding to the primary key of the owner entity</em><br>映射得来的关系有一个<u>复合主键</u>，这个<strong>复合主键</strong>由部分标识符，与属主实体的主键相连的外键共同来构成。</li></ul><p>Mapping a weak entity</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125012423.png" alt="image-20200222125012423"></p><p>Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125025075.png" alt="image-20200222125025075"></p><h2 id="多个雇主实体"><a href="#多个雇主实体" class="headerlink" title="多个雇主实体"></a>多个雇主实体</h2><blockquote><p>Mapping a weak entity with multiple owners</p></blockquote><p>Mapping a weak entity with two owners</p><p>比如下面这个例子中，学生可能会多次学习同一门课程直到他们通过这门课。比如说，如果学生1111学习课程IS101三次，前两次没通过得了D，第三次得到C通过了。</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125205447.png" alt="image-20200222125205447"></p><p>Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125221089.png" alt="image-20200222125221089"></p><p>Example:</p><p>当一个联系是一对一联系时，其中的一个弱实体就<strong>没有</strong>部分标识符(Partial identifier)，那这时属主实体的主键就成了这个弱实体的主键。</p><p>Mapping a weak entity with no partial identifier</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125517975.png" alt="image-20200222125517975"></p><p>Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125530234.png" alt="image-20200222125530234"></p><h1 id="Practice"><a href="#Practice" class="headerlink" title="Practice"></a>Practice</h1><p><strong>Example ER diagram :</strong> HAFH Realty Company Property Management Database</p><p>Q: 下图中有几个实体？</p><ul><li><input disabled type="checkbox"> A; 6个，分别是<code>INSPECTOR</code>, <code>BUILDING</code>, <code>APARTMENT</code>, <code>CORPCLIENT</code>, <code>MANAGER</code>, <code>STAFFMEMBER</code></li></ul><p>Q: 映射到关系模式中，共有几个关系</p><ul><li><input disabled type="checkbox"> A: 因为有6个实体，2个多对多关系(<code>BUILDING-INSPECTOR</code>, <code>APARTMENT-STAFFMEMBER</code>) ，1个多值属性<code>MPhone</code>,所有一共有9个关系。因为每个实体对应一个联系，每个多对多联系也对应一个关系，另外多值属性也对应一个关系</li></ul><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222125937751.png" alt="image-20200222125937751"></p><p><strong>Example mapped relational schema:</strong> HAFH Realty Company Property Management Database</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222131027536.png" alt="image-20200222131027536"></p><p><strong>Example:</strong> Sample data records for the HAFH Realty Company Property Management Database (part 1)</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222131040562.png" alt="image-20200222131040562"></p><p><strong>Example:</strong> Sample data records for the HAFH Realty Company Property Management Database (part 2)</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222131051752.png" alt="image-20200222131051752"></p><h1 id="约束汇总"><a href="#约束汇总" class="headerlink" title="约束汇总"></a>约束汇总</h1><blockquote><p>Relational database constraints</p></blockquote><ul><li>rules that a relational database has to satisfy in order to be valid</li></ul><h2 id="1-Implicit-constraints-隐式约束"><a href="#1-Implicit-constraints-隐式约束" class="headerlink" title="1. Implicit constraints 隐式约束"></a><strong>1. Implicit constraints</strong> 隐式约束</h2><ul><li>关系模式的每一个关系必须有独一无二的<strong>关系名</strong></li><li>每一个关系必须符合以下条件：<ul><li>每一列必须有不同的名字</li><li>不能有完全相同的行</li><li>每一行的每一列的取值应该是单值</li><li>每一列中的取值要服从预定义的域 <strong>（域约束）</strong></li><li>列、行顺序无关</li></ul></li><li>每一个关系必须有一个主键，主键必须能唯一标识一行记录 <strong>（主键约束）</strong></li><li>主键值不能为空 <strong>（实体完整性约束）</strong></li><li>在一个包含外键的关系的每一行中，外键的取值要么匹配其参照关系的主键，要么为空 <strong>参照完整性约束</strong></li></ul><h2 id="2-User-defined-constraints-用户自定义约束"><a href="#2-User-defined-constraints-用户自定义约束" class="headerlink" title="2. User-defined constraints 用户自定义约束"></a><strong>2. User-defined constraints</strong> 用户自定义约束</h2><ul><li><p>指用户自定义的约束，比如强制参与，可选择性等等</p></li><li><p><strong>Business rules</strong></p><ul><li>另一种用户自定义约束叫做业务规则，是在最终生成的数据库中来指定约束，该约束并没有作为创建ER图的一部分。业务规则可以以注释的方式添加（如脚注、评论、特殊符号等等）</li><li>举个例子，比如下图中一个业务规则中规定任意雇员的薪水不能低于5万美元或者高于20万美元。</li></ul></li></ul><p>Business rule for salary amounts</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222132229296.png" alt="image-20200222132229296"></p><p>Sample data records for the mapped relation</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222132245550.png" alt="image-20200222132245550"></p><h1 id="关联实体的映射"><a href="#关联实体的映射" class="headerlink" title="关联实体的映射"></a>关联实体的映射</h1><blockquote><p>Mapping associative entities.</p><p>Associative entities are mapped into relational database constructs in the identical way as M:N relationships 可以将其视为另一种描述<strong>多对多关系的方法</strong></p></blockquote><p><strong>Example:</strong> An M:N relationship and associative entity mapped into a relation in the same way</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222132749956.png" alt="image-20200222132749956"></p><h1 id="三元联系的映射"><a href="#三元联系的映射" class="headerlink" title="三元联系的映射"></a>三元联系的映射</h1><blockquote><p>Ternary relationships are used as many-to-many-to-many relationships<br>三元联系是多对多对多的联系。</p><p>A new relation is created with foreign keys from the participating entities forming a composite primary key of the new relation</p></blockquote><p><strong>Example:</strong> Mapping a ternary relationship</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222132959499.png" alt="image-20200222132959499"></p><p><strong>Example:</strong> Sample data records for the mapped relations</p><p><img src="/2020/02/22/Database-3-Relational-Modeling/image-20200222133010696.png" alt="image-20200222133010696"></p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Dongyang Yu</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/" title="Database 3. Relational Modeling">http://dongyang-yu.github.io/2020/02/22/Database-3-Relational-Modeling/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Relational-Modeling/" rel="tag"><i class="fa fa-tag"></i> Relational Modeling</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/02/22/Database-ER-Modeling/" rel="prev" title="Database 1. ER Modeling"><i class="fa fa-chevron-left"></i> Database 1. ER Modeling</a></div><div class="post-nav-item"><a href="/2020/02/22/Flutter-Project-Dicee/" rel="next" title="Flutter 3. Project Dicee">Flutter 3. Project Dicee <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#引言"><span class="nav-number">1.</span> <span class="nav-text">引言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Relational-database-model"><span class="nav-number">2.</span> <span class="nav-text">Relational database model</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Relational-schema"><span class="nav-number">3.</span> <span class="nav-text">Relational schema</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Terminology"><span class="nav-number">4.</span> <span class="nav-text">Terminology</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Relation"><span class="nav-number">4.1.</span> <span class="nav-text">Relation</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Primary-key"><span class="nav-number">4.2.</span> <span class="nav-text">Primary key</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将ER图映射为关系"><span class="nav-number">5.</span> <span class="nav-text">将ER图映射为关系</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#Entity"><span class="nav-number">5.1.</span> <span class="nav-text">Entity</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Composite-attributes"><span class="nav-number">5.2.</span> <span class="nav-text">Composite attributes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Composite-primary-key"><span class="nav-number">5.3.</span> <span class="nav-text">Composite primary key</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Optional-attributes"><span class="nav-number">5.4.</span> <span class="nav-text">Optional attributes</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#实体完整性约束Entity-integrity-constraint"><span class="nav-number">5.5.</span> <span class="nav-text">实体完整性约束Entity integrity constraint</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Foreign-key"><span class="nav-number">5.6.</span> <span class="nav-text">Foreign key</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将联系-Relationships-映射为关系数据库组件"><span class="nav-number">6.</span> <span class="nav-text">将联系(Relationships)映射为关系数据库组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-M-relationships"><span class="nav-number">6.1.</span> <span class="nav-text">1:M relationships</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mandatory-participation-on-both-sides"><span class="nav-number">6.1.1.</span> <span class="nav-text">Mandatory participation on both sides</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mandatory-participation-on-the-1-sides"><span class="nav-number">6.1.2.</span> <span class="nav-text">Mandatory participation on the 1 sides</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mandatory-participation-on-the-M-sides"><span class="nav-number">6.1.3.</span> <span class="nav-text">Mandatory participation on the M sides</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional-participation-on-the-1-side"><span class="nav-number">6.1.4.</span> <span class="nav-text">Optional participation on the 1 side</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional-participation-on-the-M-side"><span class="nav-number">6.1.5.</span> <span class="nav-text">Optional participation on the M side</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Renaming-a-foreign-key"><span class="nav-number">6.1.6.</span> <span class="nav-text">Renaming a foreign key</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#M-N-relationships"><span class="nav-number">6.2.</span> <span class="nav-text">M:N relationships</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Mandatory-participation-on-both-sides-1"><span class="nav-number">6.2.1.</span> <span class="nav-text">Mandatory participation on both sides</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Bridge-Relation桥关系"><span class="nav-number">6.2.2.</span> <span class="nav-text">* Bridge Relation桥关系</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Optional-participation-on-both-sides"><span class="nav-number">6.2.3.</span> <span class="nav-text">Optional participation on both sides</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Relationship-with-an-attribute"><span class="nav-number">6.2.4.</span> <span class="nav-text">Relationship with an attribute</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-relationships"><span class="nav-number">6.3.</span> <span class="nav-text">1:1 relationships</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#参照完整性约束Referential-integrity-constraint"><span class="nav-number">6.4.</span> <span class="nav-text">参照完整性约束Referential integrity constraint</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Compliance-and-violation-examples"><span class="nav-number">6.4.1.</span> <span class="nav-text">Compliance and violation examples</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Example-ER-diagram"><span class="nav-number">6.5.</span> <span class="nav-text">Example ER diagram :</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#若干候选键的实体"><span class="nav-number">7.</span> <span class="nav-text">若干候选键的实体</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#多值属性的实体"><span class="nav-number">8.</span> <span class="nav-text">多值属性的实体</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#派生属性的实体"><span class="nav-number">9.</span> <span class="nav-text">派生属性的实体</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Various-attributes-Example"><span class="nav-number">10.</span> <span class="nav-text">Various attributes Example</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#一元关系的映射"><span class="nav-number">11.</span> <span class="nav-text">一元关系的映射</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-M-unary-relationships"><span class="nav-number">11.1.</span> <span class="nav-text">1:M unary relationships</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#M-N-unary-relationships"><span class="nav-number">11.2.</span> <span class="nav-text">M:N unary relationships</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#1-1-unary-relationships"><span class="nav-number">11.3.</span> <span class="nav-text">1:1 unary relationships</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#相同实体间多个联系的映射"><span class="nav-number">12.</span> <span class="nav-text">相同实体间多个联系的映射</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#弱实体"><span class="nav-number">13.</span> <span class="nav-text">弱实体</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#多个雇主实体"><span class="nav-number">13.1.</span> <span class="nav-text">多个雇主实体</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Practice"><span class="nav-number">14.</span> <span class="nav-text">Practice</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#约束汇总"><span class="nav-number">15.</span> <span class="nav-text">约束汇总</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Implicit-constraints-隐式约束"><span class="nav-number">15.1.</span> <span class="nav-text">1. Implicit constraints 隐式约束</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-User-defined-constraints-用户自定义约束"><span class="nav-number">15.2.</span> <span class="nav-text">2. User-defined constraints 用户自定义约束</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#关联实体的映射"><span class="nav-number">16.</span> <span class="nav-text">关联实体的映射</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三元联系的映射"><span class="nav-number">17.</span> <span class="nav-text">三元联系的映射</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Dongyang Yu</p><div class="site-description" itemprop="description">Stay hungry. Stay foolish.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">tags</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Dongyang Yu</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0</div><span id="busuanzi_container_site_uv">Visitors：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></footer></div><script color="100,100,100" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: '6u1QF4uq57Xt5sYy1vN3QG9Y-gzGzoHsz',
      appKey: 'TQ6WrXofXm7N1jcK92KvLYoa',
      placeholder: "在这分享你的见解吧~",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: '' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});</script></body></html>