<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://Dongyang-Yu.github.io").hostname,root:"/",scheme:"Pisces",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言这一次我们将设计一个身高体重指数（Body Mass Index, BMI）计算器。该灵感来自于Ruben Vaalt。"><meta property="og:type" content="article"><meta property="og:title" content="Flutter 6. Building UIs"><meta property="og:url" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/index.html"><meta property="og:site_name" content="Dongyang Yu&#39;s Blog"><meta property="og:description" content="前言这一次我们将设计一个身高体重指数（Body Mass Index, BMI）计算器。该灵感来自于Ruben Vaalt。"><meta property="og:locale" content="en_US"><meta property="og:image" content="https://github.com/londonappbrewery/Images/raw/master/bmi-calc-demo.gif"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200226200820543.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200226201030919.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200226202437604.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200226203933119.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229125053747.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229130054059.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229125927357.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229130117425.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229131016199.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229134228182.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229141905024.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229141853886.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229143812079.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229144044728.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229151130082.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229145024170.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229145540402.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229145625754.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229150619488.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229152303971.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229152329405.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229153853410.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229161445637.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229161440538.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229161647168.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229200548677.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229201025327.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229201049193.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229201639552.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229201909228.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229202404989.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229202837563.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229203718564.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229204752894.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229204950345.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229205200155.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229205545621.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229205830441.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229212157864.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229212234442.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229212536820.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229220541772.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229215407885.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229215524343.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200229215905896.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301105017104.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301104009076.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301104108106.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301104415707.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301105735531.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301110402821.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/201907171047101.gif"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301110626332.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301111618406.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301112138911.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301114159549.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301112747785.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301113221799.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301113409011.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301113652588.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301114502762.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301115037926.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301115444899.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301120214773.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301123024309.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301123543519.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301144817798.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301150239856.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301150341591.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301152024642.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301152213488.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301153829651.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301154617283.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301154927714.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301160850950.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161117090.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161144998.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161314280.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161456589.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161506612.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/image-20200301161606152.png"><meta property="article:published_time" content="2020-02-27T01:01:40.000Z"><meta property="article:modified_time" content="2020-03-02T16:42:23.389Z"><meta property="article:author" content="Dongyang Yu"><meta property="article:tag" content="UI"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://github.com/londonappbrewery/Images/raw/master/bmi-calc-demo.gif"><link rel="canonical" href="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Flutter 6. Building UIs | Dongyang Yu's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Dongyang Yu's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Hello World.</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Dongyang Yu"><meta itemprop="description" content="Stay hungry. Stay foolish."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dongyang Yu's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Flutter 6. Building UIs</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-02-26 18:01:40" itemprop="dateCreated datePublished" datetime="2020-02-26T18:01:40-07:00">2020-02-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2020-03-02 09:42:23" itemprop="dateModified" datetime="2020-03-02T09:42:23-07:00">2020-03-02</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span> </a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine: </span><a title="valine" href="/2020/02/26/Flutter-6-Building-UIs/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/02/26/Flutter-6-Building-UIs/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>这一次我们将设计一个<strong>身高体重指数（Body Mass Index, BMI）计算器</strong>。该灵感来自于<a href="https://dribbble.com/shots/4585382-Simple-BMI-Calculator" target="_blank" rel="noopener">Ruben Vaalt</a>。</p><p><img src="https://github.com/londonappbrewery/Images/raw/master/bmi-calc-demo.gif" alt="Finished App"></p><a id="more"></a><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>与前面类似，克隆github库用Android Studio打开，地址是<a href="https://github.com/londonappbrewery/bmi-calculator-flutter.git" target="_blank" rel="noopener">https://github.com/londonappbrewery/bmi-calculator-flutter.git</a></p><h1 id="Theme主题"><a href="#Theme主题" class="headerlink" title="Theme主题"></a>Theme主题</h1><p>首先，我们先聊聊<a href="https://flutter.dev/docs/cookbook/design/themes" target="_blank" rel="noopener">主题</a>，可以先阅读下<a href="https://flutter.dev/docs/cookbook" target="_blank" rel="noopener">cookbook</a>。</p><p>现在运行下刚克隆的程序，因为我们没有应用任何主题，所以Flutter默认使用light主题，如下图所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200226200820543.png" alt="image-20200226200820543"></p><p>但是如果我们在<code>MaterialApp</code>组件中人为设定主题，比如</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMICalculator</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      theme: ThemeData.dark(), <span class="comment">// dark theme</span></span><br><span class="line">      home: InputPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>效果就如下图所示：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200226201030919.png" alt="image-20200226201030919"></p><p>如果想要设计自定义主题，我们就需要先了解<code>ThemeData</code>组件，链接甩给你！<a href="https://api.flutter.dev/flutter/material/ThemeData-class.html" target="_blank" rel="noopener">点我</a>。建议先把这个组件的类里面的属性看一遍，了解个大概再往下看~</p><p>挑几个说说看；</p><p><code>primaryColor: Colors.red</code>: The background color for major parts of the app (toolbars, tab bars, etc).</p><p><code>accentColor: Colors.purple</code>: The foreground color for widgets (knobs, text, overscroll edge effect, etc).</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200226202437604.png" alt="image-20200226202437604"></p><p>但是，我们不是艺术家，我们可能不擅长设计颜色，这时候我们就可以去找找看一些设计的不错的颜色主题，然后提取颜色的<u>十六进制</u>，用于给组件的颜色属性赋值。</p><p>说道取色器，我给大家安利一个网页插件<a href="https://www.colorzilla.com/" target="_blank" rel="noopener"><strong>ColorZilla</strong></a>，可以提取图片颜色，并赋值颜色的<u>十六进制数值</u>，非常方便，据我所知，支持谷歌和火狐浏览器。</p><p>现在问题是如何使用这些颜色的十六进制数值呢？不用着急，哪里不懂查文档~找到<a href="https://api.flutter.dev/flutter/dart-ui/Color-class.html" target="_blank" rel="noopener">Color</a>的文档，用法是<code>Color(0xFF42A5F5)</code>，<code>0xFF</code>用于表示十六进制，<u>后面六位是数值</u>。</p><p>好，现在挑战你一下，找到如何把上图中的白色背景改成黑色，节省你一步，我把颜色的代码给你：<code>Color(0xFF0A0D22)</code>。去<a href="https://api.flutter.dev/flutter/material/ThemeData-class.html" target="_blank" rel="noopener">文档</a>里找吧。</p><blockquote><p>小技巧，在网页里查的时候，用查找关键字的快捷键搜索：<code>Ctrl + F / Command + F</code></p></blockquote><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200226203933119.png" alt="image-20200226203933119"></p><p>谜底揭晓：是<code>scaffoldBackgroundColor</code>属性。完成之后，我们发现中间的字不见了，以为原来字体颜色是黑色，所以现在修改下。控制字体的是<code>textTheme</code>组件，scaffold里的字体对应的属性是bodyText2,</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">textTheme: TextTheme(</span><br><span class="line">    bodyText2: TextStyle(color: Colors.white),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>代码如下：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMICalculator</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      theme: ThemeData(</span><br><span class="line">        primaryColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">        accentColor: Colors.purple,</span><br><span class="line">        scaffoldBackgroundColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">        textTheme: TextTheme(</span><br><span class="line">          bodyText2: TextStyle(color: Colors.white),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">      home: InputPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>除了新建一个主题外，我们还有更方便的办法，就是建立在现有的主题下，我们更改其中的几个特定颜色。使用<code>.copyWith()</code>方法！</p><p>因为<code>dark主题</code>字体颜色默认就是白色，所以那一行代码可以去掉。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMICalculator</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      theme: ThemeData.dark().copyWith(</span><br><span class="line">        primaryColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">        scaffoldBackgroundColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">      ),</span><br><span class="line">      home: InputPage(),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="自定义组件主题"><a href="#自定义组件主题" class="headerlink" title="自定义组件主题"></a>自定义组件主题</h2><p>另外，如果想自定义组件的颜色，也是可以滴，只要在组件外新增一个<strong><code>Theme</code>组件</strong>。比如对于按钮，</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">floatingActionButton: Theme(</span><br><span class="line">  data: ThemeData(accentColor: Colors.purple),</span><br><span class="line">  child: FloatingActionButton(</span><br><span class="line">    child: Icon(Icons.add),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h1 id="模块化"><a href="#模块化" class="headerlink" title="模块化"></a>模块化</h1><p>为了让代码更加集中于一个功能，同时为了阅读代码方便，我们把<code>InputPage()</code>存入一个新的dart文件，命名为<code>input_page.dart</code>。然后在main中引用即可。</p><blockquote><p>一般来说，<code>main.dart</code>只包含自定义设计的主题，显示的组件存到来一个dart文件中去</p></blockquote><h1 id="将部件提取和重构为单独的类"><a href="#将部件提取和重构为单独的类" class="headerlink" title="将部件提取和重构为单独的类"></a>将部件提取和重构为<u>单独的类</u></h1><p>如果我们想要构建一个BMI计算器的<strong>构架</strong>（skeleton）。首先需要把每个<strong>组件的位置</strong>设计好。如下图所示</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229125053747.png" alt="image-20200229125053747"></p><h2 id="BoxDecoration组件"><a href="#BoxDecoration组件" class="headerlink" title="BoxDecoration组件"></a>BoxDecoration组件</h2><p>首先制作一个card在左上角。要求它有外边距，边框是椭圆的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">body: Container(</span><br><span class="line">  margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">  decoration: BoxDecoration(</span><br><span class="line">    color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">    borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">  ),</span><br><span class="line">  height: <span class="number">200.0</span>,</span><br><span class="line">  width: <span class="number">170.0</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>注意到我们使用的是<code>BoxDecoration</code>组件，它可以设计<u>边框的半径</u>，使其变成椭圆。但需要注意的是，需要把颜色属性移到该组件里。但是如果我们设定了组件的高度和宽度，我们就必须计算好它们的精确数值，不然会有黄边越界的显示。这未必太麻烦了，还记得在第三篇博文中提到的<code>Expanded</code>组件吗？</p><blockquote><p>A widget that expands a child of a <a href="https://api.flutter.dev/flutter/widgets/Row-class.html" target="_blank" rel="noopener">Row</a>, <a href="https://api.flutter.dev/flutter/widgets/Column-class.html" target="_blank" rel="noopener">Column</a>, or <a href="https://api.flutter.dev/flutter/widgets/Flex-class.html" target="_blank" rel="noopener">Flex</a> so that the child fills the available space.</p><p>它会自动延伸可用的空间，如果有多个子组件，会自动分配空间。</p></blockquote><h2 id="挑战一"><a href="#挑战一" class="headerlink" title="挑战一"></a>挑战一</h2><p>你可以用<code>Expanded</code>组件构造我们上图的框架吗？运用你已知的知识，试试看吧！</p><blockquote><p>提示：一个列组件有三行，第一和第三行都是行组件，里面有两个子组件；第二行就单独只是一个子组件。</p></blockquote><h2 id="挑战一答案"><a href="#挑战一答案" class="headerlink" title="挑战一答案"></a>挑战一答案</h2><p>布局如下，首先<code>Column</code>有三个子组件</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229130054059.png" alt="image-20200229130054059"></p><p>第一和第三个<code>Expanded</code>组件都一样，他们的子组件都是是<code>Row</code>，其下有两个子组件</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229125927357.png" alt="image-20200229125927357"></p><p>第二个<code>Expanded</code>组件就只有一个子部件，是<code>Container</code>。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229130117425.png" alt="image-20200229130117425"></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">body: Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Row(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">                borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">                borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Container(</span><br><span class="line">        margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">        decoration: BoxDecoration(</span><br><span class="line">          color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">          borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Row(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">                borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">              decoration: BoxDecoration(</span><br><span class="line">                color: Color(<span class="number">0xFF1D1E33</span>),</span><br><span class="line">                borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="化简，优化-gt-重构组件"><a href="#化简，优化-gt-重构组件" class="headerlink" title="化简，优化-&gt;重构组件"></a>化简，优化-&gt;重构组件</h2><p>但是，我们发现每一个最小的子组件都是相同的<code>Container</code>组件，这时我们可以<strong><u>重构</u></strong>它。方法就是打开Android Studio右侧的<code>Flutter Outline</code>右击其中一个<code>Container</code>组件，点击<code>Extract Widget</code>，我们暂且命名它为<code>ReusableCard</code>，确定之后你会发现代码底部重定义了一个名为<code>ReusableCard</code>的类，里面就是<code>Container</code>组件。接着你就可以把所有的<code>Container</code>组件替换为<code>Reusable()</code>了。也就是创建了这个类的对象。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229131016199.png" alt="image-20200229131016199"></p><p>重构完后的代码如下，是不是精简了很多。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">body: Column(</span><br><span class="line">  children: &lt;Widget&gt;[</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Row(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: ReusableCard(),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: ReusableCard(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: ReusableCard(),</span><br><span class="line">    ),</span><br><span class="line">    Expanded(</span><br><span class="line">      child: Row(</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: ReusableCard(),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: ReusableCard(),</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    ),</span><br><span class="line">  ],</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="Key-class"><a href="#Key-class" class="headerlink" title="Key class"></a>Key class</h2><p>观察一下我们的<code>ReusableCard</code>类，里面有一行代码如下，是不是比较眼熟，对！它就是构造函数，用来<u>初始化类属性和方法</u>的。但你发现有一个<code>Key</code>类的对象，Well，关于Key，本文先不深究，有兴趣的同学可以参考下<a href="https://api.flutter.dev/flutter/foundation/Key-class.html" target="_blank" rel="noopener">文档</a>。简单来说，当你需要移动组件时，需要用到Key。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> ReusableCard(&#123;Key key,&#125;) : <span class="keyword">super</span>(key: key);</span><br></pre></td></tr></table></figure><p>但是在我们的例子中，暂且用不到Key。</p><h2 id="ReusableCard构造函数"><a href="#ReusableCard构造函数" class="headerlink" title="ReusableCard构造函数"></a>ReusableCard构造函数</h2><p>我们需要写一个构造函数，因为组件的颜色会随着使用而可能变化。所以，我们需要传入参数去指定组件的背景色。</p><p>这里我们删去原来的构造函数，创建一个新的属性，名为<code>colour</code>，然后写一个构造函数，<u>传入指定颜色</u>。此时前面的代码会报错，因为我们没有传入颜色参数。将之前的方法更改成<code>ReusableCard(colour: Color(0xFF1D1E33))</code></p><blockquote><p>注意：如果不使用’{}’在构造函数里，则不需要加<code>@required</code>；但如果使用<code>{}</code>，加上表明这个参数是必须传入的</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReusableCard</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  ReusableCard(&#123;<span class="meta">@require</span> <span class="keyword">this</span>.colour&#125;);</span><br><span class="line"></span><br><span class="line">  Color colour;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        color: colour,</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="final-关键字"><a href="#final-关键字" class="headerlink" title="final 关键字"></a>final 关键字</h3><p>你有注意到<code>ReusableCard</code>类有一个警告吗？</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229134228182.png" alt="image-20200229134228182"></p><blockquote><p>immutable意思是如果你想将原有的组件改变，比如说把背景色改成红色，那么<u>原有的组件会被摧毁</u>，取而代之的是一个新组件的创建。而不是在原有组件的基础上进行修改。</p></blockquote><p>它提示说，该类是<u>不可变</u>（immutable）的（以为这个类继承的是<code>stateless</code>类）。但是，你并没有对它的属性用关键字<code>final</code>限制。什么意思呢，就是如果你没加final，那么你的颜色是可以在外部被改变的。</p><p>加上<code>final</code>意为这个属性只能被设置一次，并且不能被修改。“It’s the final value of the color of the reusable card”</p><h4 id="区分final和const"><a href="#区分final和const" class="headerlink" title="区分final和const"></a>区分<code>final</code>和<code>const</code></h4><p>我们用代码来理解，读者先打开<a href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad</a>。如下，你可以把<code>DateTime.now</code>赋给<code>myFinal</code>,但是不能赋给<code>myConst</code>.原因是<code>const</code>是是在<strong><u>编译时</u></strong>进行赋值的，而<code>DateTime.now()</code>是在编译完成之后返回当前时间的值，所以会报错。</p><p>总的来说，如果你希望一个变量是编译时的常量（比如，数字，字符串等），请使用<code>const</code>。其余情况两者都可以。具体细节可以查看<a href="https://dart.dev/guides/language/language-tour#final-and-const" target="_blank" rel="noopener">文档</a>。</p><p>所以，上方的<code>colour</code>属性只能被定义为`final，因为，每个组件定义颜色是在编译之后完成。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  <span class="keyword">const</span> myConst = <span class="number">2</span>;</span><br><span class="line">  <span class="keyword">final</span> myFinal = <span class="built_in">DateTime</span>.now();</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">print</span>(myFinal);</span><br><span class="line">  </span><br><span class="line">  <span class="comment">//myConst = 3;</span></span><br><span class="line">  <span class="comment">// myFinal = 4;</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>比如说我们还需要在屏幕的最下方创建一个区域用于计算。我们在组件最下方创建一个组件。代码如下。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Container(</span><br><span class="line">  color: Color(<span class="number">0xFFEB1555</span>),</span><br><span class="line">  margin: EdgeInsets.only(top: <span class="number">10.0</span>),</span><br><span class="line">  width: <span class="built_in">double</span>.infinity,</span><br><span class="line">  height: <span class="number">80.0</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>但是找个组件的高度可能会随着我们的需求变化，此时我们可以在代码的最开始部分定义一个<u>不可变</u>的变量，我们命名为bottomContainerHeight。这时我们就不需要深入代码去找找个属性啦。如下图所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229141905024.png" alt="image-20200229141905024"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229141853886.png" alt="image-20200229141853886"></p><h2 id="挑战二"><a href="#挑战二" class="headerlink" title="挑战二"></a>挑战二</h2><p>现在，请你将每个<code>Container</code>组件的颜色用一个常量(const variable)来代替，命名为<code>activeCardColour</code>。同样，把最下方的粉色也用一个常量代替，命名为<code>bottomContainerColour</code>。相信这一步应该会很简单，笔者会将最终代码放在末尾供参考。</p><h2 id="ReusableCard的可选参数"><a href="#ReusableCard的可选参数" class="headerlink" title="ReusableCard的可选参数"></a>ReusableCard的可选参数</h2><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229143812079.png" alt="image-20200229143812079"></p><p>对比成品，ReusableCard里可能有图片或其他子组件，这就需要我们在类里面新增子组件，因为是可选的，所以构造函数里该参数前面不需要加<code>@required</code>。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReusableCard</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  ReusableCard(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.colour, <span class="keyword">this</span>.cardChild&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Color colour;</span><br><span class="line">  <span class="keyword">final</span> Widget cardChild;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Container(</span><br><span class="line">      child: cardChild,</span><br><span class="line">      margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">      decoration: BoxDecoration(</span><br><span class="line">        color: colour,</span><br><span class="line">        borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关于图标，我们需要引入新的包，名为<code>font_awesome_flutter</code>，大家自行去安装，这里不再讲解。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229144044728.png" alt="image-20200229144044728"></p><p>引入完成后，代码如下所示。我们把cardChild定义为一个列组件，列组件里显示一个表示男性的图标，接着是MALE，两者之间我们用<code>SizedBox</code>作为分隔，字体的颜色是用之前我们提到的插件<code>ColorZilla</code>提取图片中对应的位置。</p><blockquote><p>笔者是如何找到代表男性的图标名字是mars呢？很容易，还是在刚才找包的页面下，点击Readme，查看里面的信息，点击红框标注的链接进去搜索而来的。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229151130082.png" alt="image-20200229151130082"></p></blockquote><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229145024170.png" alt="image-20200229145024170"></p><p>但此时运行，会发现图标无法获取，因为我们需要重启app才能获取刚才包中的素材。所以先停止运行app，再重启，图标就有了。<img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229145540402.png" alt="image-20200229145540402"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229145625754.png" alt="image-20200229145625754"></p><p>此时可能不够对称，我们使用列组件里的属性<code>mainAxisAlignment: MainAxisAlignment.center</code>使其居中即可。</p><h3 id="挑战三：重构组件再尝试"><a href="#挑战三：重构组件再尝试" class="headerlink" title="挑战三：重构组件再尝试"></a>挑战三：重构组件再尝试</h3><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229150619488.png" alt="image-20200229150619488"></p><p>我们还需要显示女性的图标等，可以发现，这与男性的一系列组件代码大同小异，所以请你仿照我们重构<code>ReusableCard</code>重构下该组件，命名为<code>IconContent</code>。</p><h3 id="挑战三答案"><a href="#挑战三答案" class="headerlink" title="挑战三答案"></a>挑战三答案</h3><p>因为我们需要自定义图标和文字部分，所以我们需要创建对应的属性并用构造函数去初始化它们。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IconContent</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  IconContent(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.text, <span class="meta">@required</span> <span class="keyword">this</span>.icon&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line">  <span class="keyword">final</span> IconData icon;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Icon(</span><br><span class="line">          icon,</span><br><span class="line">          size: <span class="number">80.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(</span><br><span class="line">          height: <span class="number">15.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        Text(</span><br><span class="line">          text,</span><br><span class="line">          style: TextStyle(</span><br><span class="line">            fontSize: <span class="number">18.0</span>,</span><br><span class="line">            color: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="模块化-amp-规范化"><a href="#模块化-amp-规范化" class="headerlink" title="模块化 &amp; 规范化"></a>模块化 &amp; 规范化</h2><p>读者可以发现，现在的<code>input_page.dart</code>已经有很多行代码了，不适合我们去理解。所以我们现在要做的是再建几个dart文件。分别是<code>icon_content.dart</code>和<code>reusable_card.dart</code>。然后把对应代码剪切过去，注意开头的import！</p><p>此时观察下<code>icon_content.dart</code>文件，发现还有一些属性是特定数据，如果后期需要修改，还需要去寻找代码特定行所在位置，会增加不少不必要的时间。所以此时，我们在文件开头创建const 变量。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">style: TextStyle(</span><br><span class="line">  fontSize: <span class="number">18.0</span>,</span><br><span class="line">  color: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>实现如下：<img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229152303971.png" alt="image-20200229152303971"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229152329405.png" alt="image-20200229152329405"></p><h1 id="手势探测器部件-Gesture-detector-widget"><a href="#手势探测器部件-Gesture-detector-widget" class="headerlink" title="手势探测器部件 Gesture detector widget"></a>手势探测器部件 Gesture detector widget</h1><p>现在上方的两个图标不能够实现点击功能，所以我们需要将它们内嵌到一个可以实现互动的组件中。我们尝试下<code>FlatButton</code>，保存运行后发现，按钮周围会有内边距，如下图所示。因为FlatButton会有自带的一些属性，包括外观，主题，颜色等。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229153853410.png" alt="image-20200229153853410"></p><p>但是，目前情况下，我们只需要个可以探测出我们接触了这个卡片的组件。这里，笔者介绍一个组件名为<a href="https://api.flutter.dev/flutter/widgets/GestureDetector-class.html" target="_blank" rel="noopener">GestureDetector</a>。查看文档，发现它可以提供’长按’，’点击’，’拖动’等功能。</p><p>所以这里我们将光标移到<code>ReusableCard</code>，<code>alter + enter</code>添加一个<code>GestureDetector</code>组件。</p><p>查看文档，我们发现有一个属性是单击一次的，名为<code>onTap</code>，因为当点击其中一个的图标时，另一个图标不显示，我们可以通过UI设计，也就是将背景色改的更深一点。此时我们因为改变了状态，所以在onTap()里面需要用到<code>setState()</code>方法。</p><h2 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h2><p>我们在<code>input_page.dart</code>里新增一个常量，该颜色会相对而言更深一点。</p><p>以为需要改变其颜色，所以我们在类里面创建两个属性，分别是男和女性的背景颜色。我们还需要创建一个用来更新颜色的方法。代码如下，相信很容易理解，笔者不多加赘述。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inactiveCardColor = Color(<span class="number">0xFF111328</span>);</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputPage</span>&gt; </span>&#123;</span><br><span class="line">  Color maleCardColour = inactiveCardColor;</span><br><span class="line">  Color femaleCardColour = inactiveCardColor;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1 = male, 2 = female</span></span><br><span class="line">  <span class="keyword">void</span> updateColour(<span class="built_in">int</span> gender) &#123;</span><br><span class="line">    <span class="comment">// male card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == <span class="number">1</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (maleCardColour == inactiveCardColor) &#123;</span><br><span class="line">        maleCardColour = activeCardColour;</span><br><span class="line">        femaleCardColour = inactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        maleCardColour = inactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// female card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == <span class="number">2</span>) &#123;</span><br><span class="line">      <span class="keyword">if</span> (femaleCardColour == inactiveCardColor) &#123;</span><br><span class="line">        femaleCardColour = activeCardColour;</span><br><span class="line">        maleCardColour = inactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        femaleCardColour = inactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure><p>就可读性而言，我们使用1和2分别代表男性和女性，是不妥当的，因为数字没有任何意义。即使我们用了注释，当过了几个月再来读代码的时候会比较吃力。所以接下来笔者将介绍一种新的数据类型<code>Enum</code>。</p><h1 id="Enum"><a href="#Enum" class="headerlink" title="Enum"></a>Enum</h1><blockquote><p>Enumeration stands for “The action of establishing the number of something” 即确定某物的数量</p></blockquote><p>举个形象的例子，现在我们有三种类型的车（convertible。 SUV，hatchback），我们用数字1，2，3分别表示，显而易见三个数字没有任何意义，我们只能通过记忆或查看注释来解决匹配问题。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229161445637.png" alt="image-20200229161445637"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229161440538.png" alt="image-20200229161440538"></p><p>现在我们分别用个名称来对应它们，这会显得更有意义，阅读起来难度也相对降低。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229161647168.png" alt="image-20200229161647168"></p><p>这就相当于<code>Enum</code>这个数据类型。语法如下所示：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> EnumName &#123;typeA, typeB, typeC&#125;;</span><br><span class="line"><span class="comment">// 当我们需要使用它们时，可以把EnumName当作一个对象，typeA相对于属性，用点运算符将它们连接。</span></span><br><span class="line">EnumName.typeA</span><br></pre></td></tr></table></figure><p>同样使用上面的例子用代码实现。我们可以把<code>carStyle</code>设为<code>CarType</code>类型，赋值时使用<code>CarType.XXX</code>即可。怎么样？这样使用是不是更便于理解？</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> CarType &#123;</span><br><span class="line">    hatchback,</span><br><span class="line">    SUV,</span><br><span class="line">    convertible,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">    CarType carStyle;</span><br><span class="line">    Car(&#123;<span class="keyword">this</span>.carStyle&#125;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    Car myCar = Car(carStyle: CarType.SUV);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="挑战四"><a href="#挑战四" class="headerlink" title="挑战四"></a>挑战四</h2><p>现在你已经了解了<code>enum</code>，请你将代码中的1和2用enum的形式来替换，暂且命名为<code>Gender</code>。</p><blockquote><p>注意：enum类型必须在class类之外，并且以首字母开头，用于与变量区分。</p></blockquote><h2 id="挑战四答案"><a href="#挑战四答案" class="headerlink" title="挑战四答案"></a>挑战四答案</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">enum</span> Gender &#123;</span><br><span class="line">  male,</span><br><span class="line">  female,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputPage</span>&gt; </span>&#123;</span><br><span class="line">  Color maleCardColour = inactiveCardColor;</span><br><span class="line">  Color femaleCardColour = inactiveCardColor;</span><br><span class="line">  <span class="comment">// 1 = male, 2 = female</span></span><br><span class="line">  <span class="keyword">void</span> updateColour(Gender gender) &#123;</span><br><span class="line">    <span class="comment">// male card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == Gender.male) &#123;</span><br><span class="line">      <span class="keyword">if</span> (maleCardColour == inactiveCardColor) &#123;</span><br><span class="line">        maleCardColour = activeCardColour;</span><br><span class="line">        femaleCardColour = inactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        maleCardColour = inactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// female card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == Gender.female) &#123;</span><br><span class="line">      <span class="keyword">if</span> (femaleCardColour == inactiveCardColor) &#123;</span><br><span class="line">        femaleCardColour = activeCardColour;</span><br><span class="line">        maleCardColour = inactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        femaleCardColour = inactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">// 对应调用如下</span></span><br><span class="line">onTap: () &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">        updateColour(Gender.male);</span><br><span class="line">    &#125;);</span><br></pre></td></tr></table></figure><h1 id="Function也能作为类属性"><a href="#Function也能作为类属性" class="headerlink" title="Function也能作为类属性"></a>Function也能作为类属性</h1><p>Dart里，方程也能作为类的属性，通过构造函数初始化。比如下方代码中，Car类有一个属性是drive，但它属性是一个方程。在main中，我们在构造函数里传入slowDrive这个函数作为drive。</p><blockquote><p>注意，此处没有在方程后面加括号！！！因为这里不是调用，而是<u>赋值</u>。</p></blockquote><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  Car myCar = Car(drive: slowDrive);</span><br><span class="line">  </span><br><span class="line">  myCar.drive();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Car</span> </span>&#123;</span><br><span class="line">  Car(&#123;<span class="keyword">this</span>.drive&#125;);</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">Function</span> drive;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> slowDrive()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"driving slowly"</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> fastDrive()&#123;</span><br><span class="line">  <span class="built_in">print</span>(<span class="string">"driving so fast"</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>同理，我们可以在<code>ReusableCard</code>类中新增一个<u>方程的属性</u>，用于连接<code>updateColour()</code>方程。方法如下：</p><p>在reusable_card.dart`中</p><ul><li>在<code>ReusableCard</code>类中新增一个属性<code>final Function onPress;</code></li><li>构造函数改为<code>ReusableCard({@required this.colour, this.cardChild, this.onPress});</code></li><li><code>GestureDetector</code>组件中新增属性<code>onTap: onPress,</code></li></ul><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229200548677.png" alt="image-20200229200548677"></p><p>在<code>input_page.dart</code>中</p><ul><li><p>将<code>Expanded</code>组件中的<code>GestureDetector</code>移除</p></li><li><p>在其对应的<code>ReusableCard</code>组件中，加上属性</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">onPress: () &#123;</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    updateColour(Gender.male);</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure></li><li><p>重构前<br><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229201025327.png" alt="image-20200229201025327"></p></li><li><p>重构后<br><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229201049193.png" alt="image-20200229201049193"></p></li></ul><p>对比两张图可以发现，其实我们重构了<code>ReusableCard</code>组件，使得该组件可以对于tap行为进行反应，同时使得代码更简化。</p><h1 id="Slider-滑块组件"><a href="#Slider-滑块组件" class="headerlink" title="Slider 滑块组件"></a>Slider 滑块组件</h1><p>回到我们的app设计中，下一步我们是要设计一个关于身高的滑块。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229201639552.png" alt="image-20200229201639552"></p><p>这个时候我们需要确定字体大小，颜色等。这些同样应该被设为常量。但鉴于我们已经写了很多常量，每次都需要去找对应的位置，比较麻烦。所以，我们不妨专门创建一个存放<code>constant</code>的文件。</p><h2 id="创建constants文件"><a href="#创建constants文件" class="headerlink" title="创建constants文件"></a>创建constants文件</h2><p>如下图所以，但注意，其它需要运用到constants的地方需要引入<u>该文件</u></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229201909228.png" alt="image-20200229201909228"></p><h3 id="常量命名方法"><a href="#常量命名方法" class="headerlink" title="常量命名方法"></a>常量命名方法</h3><p>为了命名规范，以及不与其它变量想混淆，我们<strong>约定</strong>将常量的首字母定为<code>k</code>，然后每个单词的首字母<u>大写</u>。</p><p>比如bottomContainerHeight，我们改名为<code>kBottomContainerHeight</code>。使用k而不是c是因为有很多变量名都可能以c开头，所以方便区分，改为k。</p><p>另外，每当你输入k时，Flutter都会自动显示出以k字母开头的变量名，非常便于敲代码。</p><blockquote><p>技巧</p><p>Flutter有个功能可以一键修改变量名，也就是用到这个变量的地方全部改名。右击变量名-&gt;点击Refactor-&gt;点击Rename即可！</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229202404989.png" alt="image-20200229202404989"></p></blockquote><h2 id="回到滑块组件"><a href="#回到滑块组件" class="headerlink" title="回到滑块组件"></a>回到滑块组件</h2><p>当我们预览屏幕，会显示如下情况。原因是当<code>Container</code>组件有了子组件后，它会调整自己大小去满足子组件。因为这里只有Text子组件，所以它会调整以适应Text的大小。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229202837563.png" alt="image-20200229202837563"></p><p>如果我们想要延展该组件，只需在最上方的主<code>Column</code>组件中加入属性<code>crossAxisAlignment: CrossAxisAlignment.stretch,</code>即可，如下图所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229203718564.png" alt="image-20200229203718564"></p><h3 id="身高部分"><a href="#身高部分" class="headerlink" title="身高部分"></a>身高部分</h3><p>现在需要增加身高的数字部分，也是个<code>Text</code>组件</p><p>我们设计为如下，</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">	<span class="string">'HEIGHT'</span>,</span><br><span class="line">	 style: TextStyle(</span><br><span class="line">		 fontSize: <span class="number">50.0</span>,</span><br><span class="line">		 fontWeight: FontWeight.w900,</span><br><span class="line">	 ),</span><br><span class="line"> ),</span><br></pre></td></tr></table></figure><p>同样的以为之后的两个组件我们还需要用到数字，所以我们把这个字体风格也新建为一个常量放在<code>constants.dart</code>里</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> kNumberTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">50.0</span>,</span><br><span class="line">  fontWeight: FontWeight.w900,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h3 id="单位部分"><a href="#单位部分" class="headerlink" title="单位部分"></a>单位部分</h3><p>单位部分的风格和之前的MALE和FEMALE一样。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Text(</span><br><span class="line">  <span class="string">'cm'</span>,</span><br><span class="line">  style: kLabelTextStyle,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>呈现结果如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229204752894.png" alt="image-20200229204752894"></p><h3 id="组件居中"><a href="#组件居中" class="headerlink" title="组件居中"></a>组件居中</h3><p>我们还需要把它居中，怎么做呢？很简单，在它所在的Column和Row中分别设置属性<code>mainAxisAlignment: MainAxisAlignment.center,</code>结果如下</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229204950345.png" alt="image-20200229204950345"></p><p>但是对比下最终结果，单位和身高是齐平的，也就是底部是在同一水平线上<img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229205200155.png" alt="image-20200229205200155"></p><p>这也很容易，在<code>Row</code>组件中设置<code>crossAxisAlignment: CrossAxisAlignment.baseline,</code></p><p>但运行下会报错，提示<code>textBaseline</code>不能为0.</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229205545621.png" alt="image-20200229205545621"></p><p>这时候怎么办呢，这个时候就需要上网搜索啦，笔者通过谷歌搜索，得知需要设置另一关于baseline的属性，设置为<code>textBaseline: TextBaseline.alphabetic,</code>，成功。</p><blockquote><p>Tip：遇到bug不要慌，通过搜索引擎去查找，慢慢来，debug的过程也是一种能力的积累哦</p></blockquote><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229205830441.png" alt="image-20200229205830441"></p><h3 id="添加滑块组件"><a href="#添加滑块组件" class="headerlink" title="添加滑块组件"></a>添加滑块组件</h3><p>在Flutter文档里搜索<a href="https://api.flutter.dev/flutter/material/Slider-class.html" target="_blank" rel="noopener">Slider</a>，查看它的属性，了解的差不多，开始使用这个组件。注意到它的属性，value指初始值(double型)，min和max指可供滑动的最小和最大值，activeColor指滑块左侧的颜色，inactiveColor指滑块右侧的颜色。注意到，onChanged属性是必须的<code>@required</code>，传入的参数<code>newValue</code>是指当用户开始为滑块选择新值时调用。所以，我们需要再创建一个变量，暂且命名为<code>height</code>，一开始我们设为180(int型)。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229212157864.png" alt="image-20200229212157864"></p><h3 id="类型转换函数"><a href="#类型转换函数" class="headerlink" title="类型转换函数"></a>类型转换函数</h3><p>因为涉及到状态的改变，所以需要使用<code>setState()函数</code>，另外从newValue到赋给height有一个从double到int的类型转变，所以我们需要用到一个类型转变函数<code>.round()</code>。另外，属性<code>value</code>因为是double类型，所以也需要把height通过函数转变为<code>double</code>类型。大功告成！</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">Slider(</span><br><span class="line">  value: height.toDouble(),</span><br><span class="line">  min: <span class="number">120.0</span>,</span><br><span class="line">  max: <span class="number">220.0</span>,</span><br><span class="line">  activeColor: Color(<span class="number">0xFFEB1555</span>),</span><br><span class="line">  inactiveColor: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">  onChanged: (<span class="built_in">double</span> newValue) &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      height = newValue.round();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>哦对了，漏了一步，我们需要把之前<code>Text</code>里我们设的”180”改为<code>height.toString()</code>实时更新滑动块的实数，我们可不想无论怎么滑都一直是180不变~</p><blockquote><p>注意，这里我们使用了toString()函数将int型转变为double型。</p></blockquote><p>屏幕结果如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229212234442.png" alt="image-20200229212234442"></p><p>但是，但是！别高兴的太早，我们仔细对比下那位艺术家的设计，滑块比我们预设的大很多，另外，滑块左侧是白色，而右侧是黑色。为了追求完美，我们再去文档里找找看有没有什么方法可以改变颜色！</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229212536820.png" alt="image-20200229212536820"></p><h2 id="滑块组件主题自定义"><a href="#滑块组件主题自定义" class="headerlink" title="滑块组件主题自定义"></a>滑块组件主题自定义</h2><p>我用我蹩脚的英语找啊找，终于找到一丝蛛丝马迹！文档说我们可以用从<code>SliderTheme</code>中使用<code>SliderThemeData</code>或<code>ThemeData.sliderTheme</code> 去自定义颜色</p><blockquote><p>To determine how it should be displayed (e.g. colors, thumb shape, etc.), a slider uses the <a href="https://api.flutter.dev/flutter/material/SliderThemeData-class.html" target="_blank" rel="noopener">SliderThemeData</a> available from either a <a href="https://api.flutter.dev/flutter/material/SliderTheme-class.html" target="_blank" rel="noopener">SliderTheme</a> widget or the <a href="https://api.flutter.dev/flutter/material/ThemeData/sliderTheme.html" target="_blank" rel="noopener">ThemeData.sliderTheme</a> a <a href="https://api.flutter.dev/flutter/material/Theme-class.html" target="_blank" rel="noopener">Theme</a> widget above it in the widget tree. You can also override some of the colors with the <a href="https://api.flutter.dev/flutter/material/Slider/activeColor.html" target="_blank" rel="noopener">activeColor</a> and <a href="https://api.flutter.dev/flutter/material/Slider/inactiveColor.html" target="_blank" rel="noopener">inactiveColor</a> properties, although more fine-grained control of the look is achieved using a <a href="https://api.flutter.dev/flutter/material/SliderThemeData-class.html" target="_blank" rel="noopener">SliderThemeData</a>.</p></blockquote><p>那我们就使用第一种，给Slider外套一个父组件<code>SliderTheme</code>，</p><p><strong>注意</strong>：我们只需要修改主题中的一小部分属性，所以我们使用<code>SliderTheme.of(context).copyWith(...)</code>。大家应该记得在<code>main.dart</code>中我们自定义<code>ThemeData.dart</code>主题时用的是<code>ThemeData.dark().copyWith(...)</code>同样用到的是<code>.copyWith()</code>。意思是一样的，就是拷贝一份，然后对其中特定属性进行<strong>覆盖</strong>。</p><p>但是为什么<code>SliderTheme</code>要多加一个<code>.of(context)</code>呢？以为SliderTheme是ThemeData的子属性，所以需要用到<code>.of</code>，而<code>(context)</code>则表示的是修改的是当前状态下的主题。</p><p>观察StatefulWidget的build分成，里面的参数同样也是<code>context</code>，因为Flutter用它来表示当前的状态！</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229220541772.png" alt="image-20200229220541772"></p><p>对比上图，我们需要把</p><ul><li>滑块改成粉色，对应属性是<code>thumbColor</code></li><li>外罩颜色改为粉色，但是有透明度，<code>overlayColor</code></li><li>滑块形状为圆形，<code>thumbShape</code></li><li>外罩形状也为圆形，<code>overlayShape</code></li><li>滑块左侧颜色为白色，<code>activeTrackColor</code></li><li>滑块右侧颜色为灰色，<code>inactiveTrackColor</code></li></ul><blockquote><p>如何改透明色，注意到十六进制颜色表示中后六位是用来表示RGB颜色值的，0x表示的是十六进制格式，那么一推测就可知，FF代表的是透明度，没错！你猜对了~那我们如何得知默认的透明度是多少呢？</p><p>将光标移到overlayShape上，然后按<code>control/command</code>，会出现蓝色下标，点击它会自动跳到该源代码文件中，</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229215407885.png" alt="image-20200229215407885"></p><p>再次按同样步骤点击，会跳出来默认的赋值情况，代码即29</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229215524343.png" alt="image-20200229215524343"></p></blockquote><p><strong>注意</strong>，如果不讲下方代码块中的两行注释掉，则会默认覆盖掉我们自定义主题中的<code>inactiveTrackColor: Color(0xFF8D8E98), activeTrackColor: Colors.white,</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">SliderTheme(</span><br><span class="line">    data: SliderTheme.of(context).copyWith(</span><br><span class="line">        inactiveTrackColor: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">        activeTrackColor: Colors.white,</span><br><span class="line">        thumbColor: Color(<span class="number">0xFFEB1555</span>),</span><br><span class="line">        overlayColor: Color(<span class="number">0x29EB1555</span>),</span><br><span class="line">        thumbShape:</span><br><span class="line">        RoundSliderThumbShape(enabledThumbRadius: <span class="number">15.0</span>),</span><br><span class="line">        overlayShape:</span><br><span class="line">        RoundSliderOverlayShape(overlayRadius: <span class="number">30.0</span>)),</span><br><span class="line">    child: Slider(</span><br><span class="line">        value: height.toDouble(),</span><br><span class="line">        min: <span class="number">120.0</span>,</span><br><span class="line">        max: <span class="number">220.0</span>,</span><br><span class="line">        <span class="comment">//                      activeColor: Colors.white,</span></span><br><span class="line">        <span class="comment">//                      inactiveColor: Color(0xFF8D8E98),</span></span><br><span class="line">        onChanged: (<span class="built_in">double</span> newValue) &#123;</span><br><span class="line">            setState(() &#123;</span><br><span class="line">                height = newValue.round();</span><br><span class="line">            &#125;);</span><br><span class="line">        &#125;,</span><br><span class="line">    ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="类比"><a href="#类比" class="headerlink" title="类比"></a>类比</h2><p>既然滑块主题可以自定义，那么是不是所有的组件颜色都可以自定义呢？答案是肯定的，同样去搜索<a href="https://api.flutter.dev/flutter/material/ThemeData-class.html" target="_blank" rel="noopener">文档</a>，ThemeData类中所有的组件都可以进行自定义。到时候需要什么就去搜索文档吧。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200229215905896.png" alt="image-20200229215905896"></p><p>既然Flutter有那么多的组件，我们可不可以自己创建组件呢？答案当然是可以的！</p><h1 id="自定义组件-Customisation"><a href="#自定义组件-Customisation" class="headerlink" title="自定义组件 Customisation"></a>自定义组件 Customisation</h1><h2 id="FloatingActionButton"><a href="#FloatingActionButton" class="headerlink" title="FloatingActionButton"></a><code>FloatingActionButton</code></h2><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301105017104.png" alt="image-20200301105017104"></p><p>对比成品图，我们还有年龄和体重两项没有完成，关于圆形按钮，笔者通过文档查询，找到对应的组件是<code>FloatingActionButton</code>。代码实现如下：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">FloatingActionButton(</span><br><span class="line">  backgroundColor: Color(<span class="number">0xFF4C4F5E</span>),</span><br><span class="line">  child: Icon(</span><br><span class="line">    Icons.add,</span><br><span class="line">    color: Colors.white,</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301104009076.png" alt="image-20200301104009076"></p><p>看起来需要在它们中间加一个间隔，使用<code>SizedBox</code>组件，宽度我们设为<code>15.0</code></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301104108106.png" alt="image-20200301104108106"></p><p>接下来就是对所在<code>Row</code>设置居中，使用属性<code>mainAxisAlignment: MainAxisAlignment.center</code></p><p>代码如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301104415707.png" alt="image-20200301104415707"></p><p>但是，当你仔细阅读<a href="https://api.flutter.dev/flutter/material/FloatingActionButton-class.html" target="_blank" rel="noopener">文档</a>，你会发现它规定一个屏幕使用最多一个浮动操作按钮。既然它有规定限制，那我不如就仿照它，<u>自定义</u>一个和它类似的组件。</p><blockquote><p>Use at most a single floating action button per screen. Floating action buttons should be used for positive actions such as “create”, “share”, or “navigate”. (If more than one floating action button is used within a <a href="https://api.flutter.dev/flutter/widgets/Route-class.html" target="_blank" rel="noopener">Route</a>, then make sure that each button has a unique <a href="https://api.flutter.dev/flutter/material/FloatingActionButton/heroTag.html" target="_blank" rel="noopener">heroTag</a>, otherwise an exception will be thrown.)</p></blockquote><h2 id="RawMaterialButton"><a href="#RawMaterialButton" class="headerlink" title="RawMaterialButton"></a><code>RawMaterialButton</code></h2><p>首先，我们先去找到<code>FloatingActionButton</code>的build方法，瞧瞧它是怎么构建的，按住<code>contral/command</code>点击<code>FloatingActionButton</code>，会跳转到构建该组件的源代码，进入后，我们找到其build方法，发现他是基于<code>RawMaterialButton</code>构建的，如下图所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301105735531.png" alt="image-20200301105735531"></p><p>我们再按同样步骤进入它的源代码，发现<code>RawMaterialButton</code>又是基于<code>ConstrainedBox</code>设计的，它有两个子组件，分别是<code>Material</code>和<code>InkWell</code>，如下所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301110402821.png" alt="image-20200301110402821"></p><p><code>InkWell</code></p><p>笔者搜索了<code>InkWell</code>的<a href="https://api.flutter.dev/flutter/material/InkWell-class.html" target="_blank" rel="noopener">文档</a>，类似于水波纹效果，点击时水友波纹一样的振动，如下图所示。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/201907171047101.gif" alt="img"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301110626332.png" alt="image-20200301110626332"></p><p>但是，其实我们是不需要这一功能的，所以我们可以改写<code>RawMaterialButton</code>组件</p><blockquote><p>想要找到组件来源于哪个父组件并去改写它，取决于你的需求，一步一步的查找源代码！</p></blockquote><h2 id="构建自定义组件"><a href="#构建自定义组件" class="headerlink" title="构建自定义组件"></a>构建自定义组件</h2><p>我们自己新建一个继承自<code>StatelessWidget</code>的类(stless快捷代码)，名为<code>RoundIconButton</code>。里面返回的是一个<code>RawMaterialButton</code>的组件，<code>ctrl+Q</code>查看该组件信息。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301111618406.png" alt="image-20200301111618406"></p><p>它需要很多属性，比如<code>shape</code>形状，<code>fillColor</code>颜色。我们先定义下形状是什么。</p><p>注意到它的类型是<code>ShapeBorder</code>，想必你也才到我下一步是什么了吧？没错去<a href="https://api.flutter.dev/flutter/painting/ShapeBorder-class.html" target="_blank" rel="noopener">文档</a>查找<code>ShapeBorder</code>类~可以发现它提供圆形，圆角矩形等形状。根据我们的设计，我们使用圆形，也就是<code>CircleBorder</code></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301112138911.png" alt="image-20200301112138911"></p><p><code>fillColor</code>我们使用之前一样的<code>Color(0xFF4C4F5E)</code>，代码如下</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundIconButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> RawMaterialButton(</span><br><span class="line">      shape: CircleBorder(),</span><br><span class="line">      fillColor: Color(<span class="number">0xFF4C4F5E</span>),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>现在，我们差不多自定义了一个组件，现在放到我们的设计代码中去吧。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301114159549.png" alt="image-20200301114159549"></p><p>对比一下，我们设计的组件略小，并且没有阴影部分(Elevation)，</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301112747785.png" alt="image-20200301112747785"></p><p>那我们如何做到形状大小对应的属性是什么呢？</p><ol><li>老样子，查看文档</li><li>查看<code>FloatingActionButton</code>是如何自定义<code>RawMaterialButton</code>中的形状大小的</li></ol><p>这里笔者使用第二种方法，毕竟照葫芦画瓢谁不会呀，哈哈哈。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301113221799.png" alt="image-20200301113221799"></p><p>放眼望去，貌似这个<code>_sizeConstraints</code>和size有点关系，我们去看看这个常量表示的是什么，用<code>Ctrl/Command + 点击变量名</code></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301113409011.png" alt="image-20200301113409011"></p><p>原来做个常量是个<code>BoxConstraints</code>类型的，用了<code>tightFor()</code>方法来规定长和宽，对应的属性是<code>constraints</code></p><p>我们照葫芦画瓢，复制过来，运行没问题！（记得修改最后的分号！）</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">constraints: BoxConstraints.tightFor(</span><br><span class="line">  width: <span class="number">56.0</span>,</span><br><span class="line">  height: <span class="number">56.0</span>,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301113652588.png" alt="image-20200301113652588"></p><p>阴影部分加上属性<code>elevation</code>即可，但注意如果没有<code>onPressed()</code>方法，则无效果，因为文档里已说明。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301114502762.png" alt="image-20200301114502762"></p><h3 id="增加图标"><a href="#增加图标" class="headerlink" title="增加图标"></a>增加图标</h3><p>增加图标就简单多了，传递一个图标的参数用于构造函数的创建。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundIconButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  RoundIconButton(&#123;<span class="keyword">this</span>.icon&#125;);</span><br><span class="line">  <span class="keyword">final</span> IconData icon;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> RawMaterialButton(</span><br><span class="line">      child: Icon(icon),</span><br><span class="line">      onPressed: () &#123;&#125;,</span><br><span class="line">      shape: CircleBorder(),</span><br><span class="line">      fillColor: Color(<span class="number">0xFF4C4F5E</span>),</span><br><span class="line">      constraints: BoxConstraints.tightFor(</span><br><span class="line">        width: <span class="number">56.0</span>,</span><br><span class="line">        height: <span class="number">56.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      elevation: <span class="number">6.0</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>在代码中调用这个类的对象即可，属性是<code>icon: FontAwesomeIcons.minus/plus</code>。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301115037926.png" alt="image-20200301115037926"></p><p>现在如果需要修改按钮就方便多啦，比如你想把按钮改成方形的，只需把查看文档，找到对应的方法，再将<code>shape</code>属性修改成<code>BeveledRectangleBorder()</code>。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301115444899.png" alt="image-20200301115444899"></p><p>是不是方便多了！下一步是把Age那块补全，这一步就交给你啦。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301120214773.png" alt="image-20200301120214773"></p><h3 id="onPressed-参数传递"><a href="#onPressed-参数传递" class="headerlink" title="onPressed() 参数传递"></a>onPressed() 参数传递</h3><p>现在需要给按钮增加<code>onPressed()</code>方法，也就是点击一个按钮时更改对应数值。作为挑战自己尝试，本文不再赘述。代码会附在末尾。</p><blockquote><p>提示，构造函数的两个参数<code>icon</code>和<code>onPressed</code>需要加上<code>@required</code>表明是强制的。</p></blockquote><h1 id="Routes-and-navigation导航"><a href="#Routes-and-navigation导航" class="headerlink" title="Routes and navigation导航"></a>Routes and navigation导航</h1><blockquote><p>关于多个页面之间的跳转，我们先通过一个小项目来了解下。</p></blockquote><p>首先，克隆<a href="https://github.com/londonappbrewery/Navigation-Flutter-Demo，然后打开。运行app，我们会发现一个按钮，上面写着前往屏幕2。" target="_blank" rel="noopener">https://github.com/londonappbrewery/Navigation-Flutter-Demo，然后打开。运行app，我们会发现一个按钮，上面写着前往屏幕2。</a></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301123024309.png" alt="image-20200301123024309"></p><p>但目前实现不了这一步，因为<code>onPressed</code>方法是空的。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301123543519.png" alt="image-20200301123543519"></p><p>值得庆幸的是，Flutter文档写得很详细。我们查看<code>Navigator</code><a href="https://flutter.dev/docs/cookbook/navigation/navigation-basics" target="_blank" rel="noopener">专题页</a>。语法如下：</p><p>In the <code>build()</code> method of the <code>FirstRoute</code> widget, update the <code>onPressed()</code> callback:</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Within the `FirstRoute` widget</span></span><br><span class="line">onPressed: () &#123;</span><br><span class="line">  Navigator.push(</span><br><span class="line">    context,</span><br><span class="line">    MaterialPageRoute(builder: (context) =&gt; SecondRoute()),</span><br><span class="line">  );</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们在<code>screen1.dart</code>中测试，context指的是当前状态页。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onPressed: () &#123;</span><br><span class="line">    Navigator.push(</span><br><span class="line">        context,</span><br><span class="line">        MaterialPageRoute(</span><br><span class="line">            builder: (context) &#123;</span><br><span class="line">                <span class="keyword">return</span> Screen2();</span><br><span class="line">            &#125;,</span><br><span class="line">        ),</span><br><span class="line">    );</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><p>我们还有另一种方法，文档中是<a href="https://flutter.dev/docs/cookbook/navigation/named-routes#2-define-the-routes" target="_blank" rel="noopener">Define the routes</a>。也就是为每个页面定义一个路径名字，不需要声明对应的类名。</p><blockquote><p>Next, define the routes by providing additional properties to the <a href="https://api.flutter.dev/flutter/material/MaterialApp-class.html" target="_blank" rel="noopener"><code>MaterialApp</code></a> constructor: the <code>initialRoute</code> and the <code>routes</code> themselves.</p><p>The <code>initialRoute</code> property defines which route the app should start with. The <code>routes</code> property defines the available named routes and the widgets to build when navigating to those routes.</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">MaterialApp(</span><br><span class="line">  <span class="comment">// Start the app with the "/" named route. In this case, the app starts</span></span><br><span class="line">  <span class="comment">// on the FirstScreen widget.</span></span><br><span class="line">  initialRoute: <span class="string">'/'</span>,</span><br><span class="line">  routes: &#123;</span><br><span class="line">    <span class="comment">// When navigating to the "/" route, build the FirstScreen widget.</span></span><br><span class="line">    <span class="string">'/'</span>: (context) =&gt; FirstScreen(),</span><br><span class="line">    <span class="comment">// When navigating to the "/second" route, build the SecondScreen widget.</span></span><br><span class="line">    <span class="string">'/second'</span>: (context) =&gt; SecondScreen(),</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br></pre></td></tr></table></figure></blockquote><p>我们编辑<code>main.dart</code>，把return中<code>materialApp</code>的home属性去掉，用<code>initialRoute</code>和<code>routes</code>取代。</p><ul><li><code>initialRoute</code>就是初始页面的路径</li><li><code>routes</code>定义路径名和对应屏幕页，比如我把<code>Screen0</code>用路径‘/’定义。</li></ul><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">MyApp</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line"><span class="comment">//      home: Screen0(),</span></span><br><span class="line">      initialRoute: <span class="string">'/'</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">'/'</span>: (context) =&gt; Screen0(),</span><br><span class="line">        <span class="string">'/first'</span>: (context) =&gt; Screen1(),</span><br><span class="line">        <span class="string">'/second'</span>: (context) =&gt; Screen2(),</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接着在<code>screen0.dart</code>中，把第一个按钮的<code>onPressed()</code>方法内加入<code>Navigator.pushNamed(context, &#39;/first&#39;);</code>，第二个同理，运行一下，没问题，可以成功跳转。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">RaisedButton(</span><br><span class="line">  color: Colors.red,</span><br><span class="line">  child: Text(<span class="string">'Go To Screen 1'</span>),</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    <span class="comment">//Navigate to Screen 1</span></span><br><span class="line">    Navigator.pushNamed(context, <span class="string">'/first'</span>);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br><span class="line">RaisedButton(</span><br><span class="line">  color: Colors.blue,</span><br><span class="line">  child: Text(<span class="string">'Go To Screen 2'</span>),</span><br><span class="line">  onPressed: () &#123;</span><br><span class="line">    Navigator.pushNamed(context, <span class="string">'/second'</span>);</span><br><span class="line">    <span class="comment">//Navigate to Screen 2</span></span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h2 id="回到BMI"><a href="#回到BMI" class="headerlink" title="回到BMI"></a>回到BMI</h2><p>现在我们已经了解如何导航到另一个页面。但是，我们目前只有一个页面。所以我们先创建BMI计算页面。创建一个名为<code>results_page.dart</code>的文件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResultsPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"Your Result"</span>),</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>创建完毕，回到<code>input_page.dart</code>文件，我们在最下方的<code>Container</code>组件外包一个<code>GestrureDetector</code>，在其<code>onTap</code>函数中加入我们之前提到的<code>Navigator.push()</code>或者<code>Navigator.pushNamedI()</code>方法。代码如下。我们使用<code>Navigator.push()</code>，另一种方法就交给你去实现啦。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">GestureDetector(</span><br><span class="line">    onTap: () &#123;</span><br><span class="line">        Navigator.push(</span><br><span class="line">            context,</span><br><span class="line">            MaterialPageRoute(</span><br><span class="line">                builder: (context) =&gt; ResultsPage(),</span><br><span class="line">            ),</span><br><span class="line">        );</span><br><span class="line">    &#125;,</span><br><span class="line">    child: Container(</span><br><span class="line">        child: Text(<span class="string">"CLACULATE"</span>),</span><br><span class="line">        color: kBottomContainerColour,</span><br><span class="line">        margin: EdgeInsets.only(top: <span class="number">10.0</span>),</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        height: kBottomContainerHeight,</span><br><span class="line">    ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><h1 id="Dart-Maps"><a href="#Dart-Maps" class="headerlink" title="Dart Maps"></a>Dart Maps</h1><p>简单来说，每一个key对应一个value。是不是有些熟悉？没错，Map和enum类型有相似之处，但是enum类型只能是按<u>顺序</u>进行排序的，并且key只能是int类型；而Map使用更广泛，可以自定义key和value的类型。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301144817798.png" alt="image-20200301144817798"></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Map</span>&lt;<span class="built_in">String</span>, <span class="built_in">int</span>&gt; phoneBook = &#123;</span><br><span class="line">  <span class="string">'Kyle'</span>: <span class="number">54687876645</span>,</span><br><span class="line">  <span class="string">'Amy'</span>: <span class="number">123456789</span>,</span><br><span class="line">  <span class="string">'James'</span>: <span class="number">987654321</span>,</span><br><span class="line">  <span class="string">'Tim'</span>: <span class="number">722934856</span>,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  </span><br><span class="line">  <span class="built_in">print</span>(phoneBook[<span class="string">'Amy'</span>]); <span class="comment">//返回123456789</span></span><br><span class="line">  <span class="built_in">print</span>(phoneBook[<span class="string">'Dong'</span>]); <span class="comment">// 返回null,以为map中没有名为'Dong'的key</span></span><br><span class="line">  <span class="built_in">print</span>(phoneBook.length); <span class="comment">// 返回长度，4</span></span><br><span class="line">  <span class="built_in">print</span>(phoneBook.keys);   <span class="comment">// 返回所有key, (Kyle, Amy, James, Tim)</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>回到我们的设计。首先，我们把首页最下放的<code>CLACULATE</code>改下字体风格，笔者设计如下</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> kLargeButtonTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">25.0</span>,</span><br><span class="line">  fontWeight: FontWeight.bold,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><p>对于文字，我们将其居中，并修改下方的内边距，因为苹果用户可能不小心误触拖动下方的任务栏。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">child: Container(</span><br><span class="line">  child: Center(</span><br><span class="line">    child: Text(</span><br><span class="line">      <span class="string">"CLACULATE"</span>,</span><br><span class="line">      style: kLargeButtonTextStyle,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">  color: kBottomContainerColour,</span><br><span class="line">  margin: EdgeInsets.only(top: <span class="number">10.0</span>),</span><br><span class="line">  padding: EdgeInsets.only(bottom: <span class="number">20.0</span>),</span><br><span class="line">  width: <span class="built_in">double</span>.infinity,</span><br><span class="line">  height: kBottomContainerHeight,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301150239856.png" alt="image-20200301150239856"></p><h1 id="设计Results-scrren"><a href="#设计Results-scrren" class="headerlink" title="设计Results scrren"></a>设计Results scrren</h1><p>对比效果图，</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301150341591.png" alt="image-20200301150341591"></p><p>这应该很容易，读者可尝试先自己编写代码，效果如下</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301152024642.png" alt="image-20200301152024642"></p><h2 id="回顾-Refactor-组件"><a href="#回顾-Refactor-组件" class="headerlink" title="回顾 Refactor 组件"></a>回顾 Refactor 组件</h2><p>产品图最下方的按钮和首页的按钮类似，所以我们就refactor该组件，命名为<code>BottomButton</code>。</p><p>操作如下：<img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301152213488.png" alt="image-20200301152213488"></p><p>写好之后如下所示</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  BottomButton(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.buttonTitle, <span class="meta">@required</span> <span class="keyword">this</span>.onTap&#125;);</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span> onTap;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> buttonTitle;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onTap: onTap,</span><br><span class="line">      child: Container(</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Text(</span><br><span class="line">            buttonTitle,</span><br><span class="line">            style: kLargeButtonTextStyle,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        color: kBottomContainerColour,</span><br><span class="line">        margin: EdgeInsets.only(top: <span class="number">10.0</span>),</span><br><span class="line">        padding: EdgeInsets.only(bottom: <span class="number">20.0</span>),</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        height: kBottomContainerHeight,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>根据模块化的概念，我们新建一个dart文件，命名为<code>bottom_button.dart</code>，将其放进去，记得开头引入<code>import &#39;package:flutter/material.dart&#39;;</code>和<code>import &#39;constants.dart&#39;;</code></p><p>同样的，我们吧重构后的<code>RoundIconButton</code>组件也放入一个新建的文件中，命名为<code>round_icon_button.dart</code>，重复上述步骤。</p><h2 id="创建文件夹，便于管理"><a href="#创建文件夹，便于管理" class="headerlink" title="创建文件夹，便于管理"></a>创建文件夹，便于管理</h2><p>我们现在发现在lib下有很多文件，为了便于管理，我们创建两个文件夹，分别是<code>components</code>和<code>screens</code>。结构如下所示。当你移动完为止你会发现会报错，以为引用的文件为止已经改变，所以你需要编辑修改它们。</p><p>比如在<code>input_page.dart</code>中，原来的<code>import &#39;bottom_button.dart&#39;;</code>需要修改成<code>import &#39;../components/bottom_button.dart&#39;;</code>或者是<code>import &#39;package:bmi_calculator/components/bottom_button.dart&#39;;</code></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301153829651.png" alt="image-20200301153829651"></p><p>接着在resutl页面最下方加入组件</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">BottomButton(</span><br><span class="line">  buttonTitle: <span class="string">"RE-CALCULATE"</span>,</span><br><span class="line">  onTap: ()&#123;</span><br><span class="line">    Navigator.pop(context);</span><br><span class="line">  &#125;,</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301154617283.png" alt="image-20200301154617283"></p><p>但是追求完美的我们怎么能止步于此呢？</p><p>我们发现“Your Result”有些太靠上了，我们修改该组件，增加下内边距和让它靠左下对齐。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Expanded(</span><br><span class="line">  child: Container(</span><br><span class="line">    padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">    alignment: Alignment.bottomLeft,</span><br><span class="line">    child: Text(</span><br><span class="line">      <span class="string">"Your Result"</span>,</span><br><span class="line">      style: kTitleTextStyle,</span><br><span class="line">    ),</span><br><span class="line">  ),</span><br><span class="line">),</span><br></pre></td></tr></table></figure><p>效果如下：</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301154927714.png" alt="image-20200301154927714"></p><p>Ok，我们的设计已经全部结束，最后一步是实现方程计算。</p><h1 id="计算器模型和字符串操作"><a href="#计算器模型和字符串操作" class="headerlink" title="计算器模型和字符串操作"></a>计算器模型和字符串操作</h1><p>首先，我们搜索BMI的计算公式。然后写方程。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301160850950.png" alt="image-20200301160850950"></p><p>我们创建一个新文件，用于存储新类，命名为<code>calculator_brain.dart</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CalculateBrain</span> </span>&#123;</span><br><span class="line">  CalculateBrain(&#123;<span class="keyword">this</span>.height, <span class="keyword">this</span>.weight&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> height;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> weight;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">double</span> _bmi;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> calculateBMI() &#123;</span><br><span class="line">    _bmi = weight / pow(height / <span class="number">100</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> _bmi.toStringAsFixed(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getResult() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_bmi &gt;= <span class="number">25</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Overweight'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_bmi &gt; <span class="number">18.5</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Normal'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Underweight'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getInterpretation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_bmi &gt;= <span class="number">25</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a higher than normal body weight. Try to exercise more.'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_bmi &gt; <span class="number">18.5</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a normal body weight. Good job!'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a lower than normal body weight. You can eat a bit more.'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>我们需要传入<code>results_page.dart</code>中去，所以创建属性和构造函数</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161117090.png" alt="image-20200301161117090"></p><p>再讲对应的文本用变量表示，这里我们把BMI结果的字母全部大写，使用方程<code>toUpperCase()</code></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161144998.png" alt="image-20200301161144998"></p><p>在<code>input_page.dart</code>里的最下方按钮中，我们需要创建BMI计算类的对象，并且当页面跳转时传入到新页面的构造函数里去。</p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161314280.png" alt="image-20200301161314280"></p><p>这样就大功告成！</p><h1 id="示意图"><a href="#示意图" class="headerlink" title="示意图"></a>示意图</h1><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161456589.png" alt="image-20200301161456589"></p><p><img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161506612.png" alt="image-20200301161506612"></p><p>这一节课我们学了很多东西，大家去消化一下吧！</p><h1 id="Code"><a href="#Code" class="headerlink" title="Code"></a>Code</h1><p>结构树：<img src="/2020/02/26/Flutter-6-Building-UIs/image-20200301161606152.png" alt="image-20200301161606152"></p><h2 id="components"><a href="#components" class="headerlink" title="components"></a>components</h2><h3 id="bottom-button-dart"><a href="#bottom-button-dart" class="headerlink" title="bottom_button.dart"></a>bottom_button.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../constants.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BottomButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  BottomButton(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.buttonTitle, <span class="meta">@required</span> <span class="keyword">this</span>.onTap&#125;);</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span> onTap;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> buttonTitle;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onTap: onTap,</span><br><span class="line">      child: Container(</span><br><span class="line">        child: Center(</span><br><span class="line">          child: Text(</span><br><span class="line">            buttonTitle,</span><br><span class="line">            style: kLargeButtonTextStyle,</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        color: kBottomContainerColour,</span><br><span class="line">        margin: EdgeInsets.only(top: <span class="number">10.0</span>),</span><br><span class="line">        padding: EdgeInsets.only(bottom: <span class="number">20.0</span>),</span><br><span class="line">        width: <span class="built_in">double</span>.infinity,</span><br><span class="line">        height: kBottomContainerHeight,</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="icon-content-dart"><a href="#icon-content-dart" class="headerlink" title="icon_content.dart"></a>icon_content.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../constants.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">IconContent</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  IconContent(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.text, <span class="meta">@required</span> <span class="keyword">this</span>.icon&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> text;</span><br><span class="line">  <span class="keyword">final</span> IconData icon;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Icon(</span><br><span class="line">          icon,</span><br><span class="line">          size: <span class="number">80.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        SizedBox(</span><br><span class="line">          height: <span class="number">15.0</span>,</span><br><span class="line">        ),</span><br><span class="line">        Text(</span><br><span class="line">          text,</span><br><span class="line">          style: kLabelTextStyle,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="reusable-card-dart"><a href="#reusable-card-dart" class="headerlink" title="reusable_card.dart"></a>reusable_card.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ReusableCard</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  ReusableCard(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.colour, <span class="keyword">this</span>.cardChild, <span class="keyword">this</span>.onPress&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> Color colour;</span><br><span class="line">  <span class="keyword">final</span> Widget cardChild;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span> onPress;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> GestureDetector(</span><br><span class="line">      onTap: onPress,</span><br><span class="line">      child: Container(</span><br><span class="line">        child: cardChild,</span><br><span class="line">        margin: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">        decoration: BoxDecoration(</span><br><span class="line">          color: colour,</span><br><span class="line">          borderRadius: BorderRadius.circular(<span class="number">10.0</span>),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="round-icon-button-dart"><a href="#round-icon-button-dart" class="headerlink" title="round_icon_button.dart"></a>round_icon_button.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">RoundIconButton</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  RoundIconButton(&#123;<span class="meta">@required</span> <span class="keyword">this</span>.icon, <span class="meta">@required</span> <span class="keyword">this</span>.onPressed&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> IconData icon;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">Function</span> onPressed;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> RawMaterialButton(</span><br><span class="line">      child: Icon(icon),</span><br><span class="line">      onPressed: onPressed,</span><br><span class="line">      shape: CircleBorder(),</span><br><span class="line">      fillColor: Color(<span class="number">0xFF4C4F5E</span>),</span><br><span class="line">      constraints: BoxConstraints.tightFor(</span><br><span class="line">        width: <span class="number">56.0</span>,</span><br><span class="line">        height: <span class="number">56.0</span>,</span><br><span class="line">      ),</span><br><span class="line">      elevation: <span class="number">6.0</span>,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="screens"><a href="#screens" class="headerlink" title="screens"></a>screens</h2><h3 id="input-page-dart"><a href="#input-page-dart" class="headerlink" title="input_page.dart"></a>input_page.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br><span class="line">240</span><br><span class="line">241</span><br><span class="line">242</span><br><span class="line">243</span><br><span class="line">244</span><br><span class="line">245</span><br><span class="line">246</span><br><span class="line">247</span><br><span class="line">248</span><br><span class="line">249</span><br><span class="line">250</span><br><span class="line">251</span><br><span class="line">252</span><br><span class="line">253</span><br><span class="line">254</span><br><span class="line">255</span><br><span class="line">256</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:font_awesome_flutter/font_awesome_flutter.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../components/icon_content.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'results_page.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../constants.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../components/reusable_card.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bmi_calculator/components/bottom_button.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'../components/round_icon_button.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bmi_calculator/calculator_brain.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">enum</span> Gender &#123;</span><br><span class="line">  male,</span><br><span class="line">  female,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InputPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _InputPageState createState() =&gt; _InputPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_InputPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">InputPage</span>&gt; </span>&#123;</span><br><span class="line">  Color maleCardColour = kInactiveCardColor;</span><br><span class="line">  Color femaleCardColour = kInactiveCardColor;</span><br><span class="line">  <span class="built_in">int</span> height = <span class="number">180</span>;</span><br><span class="line">  <span class="built_in">int</span> weight = <span class="number">60</span>;</span><br><span class="line">  <span class="built_in">int</span> age = <span class="number">20</span>;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 1 = male, 2 = female</span></span><br><span class="line">  <span class="keyword">void</span> updateColour(Gender gender) &#123;</span><br><span class="line">    <span class="comment">// male card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == Gender.male) &#123;</span><br><span class="line">      <span class="keyword">if</span> (maleCardColour == kInactiveCardColor) &#123;</span><br><span class="line">        maleCardColour = kActiveCardColour;</span><br><span class="line">        femaleCardColour = kInactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        maleCardColour = kInactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// female card pressed</span></span><br><span class="line">    <span class="keyword">if</span> (gender == Gender.female) &#123;</span><br><span class="line">      <span class="keyword">if</span> (femaleCardColour == kInactiveCardColor) &#123;</span><br><span class="line">        femaleCardColour = kActiveCardColour;</span><br><span class="line">        maleCardColour = kInactiveCardColor;</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        femaleCardColour = kInactiveCardColor;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">        title: Text(<span class="string">'BMI CALCULATOR'</span>),</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Row(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Expanded(</span><br><span class="line">                  child: ReusableCard(</span><br><span class="line">                    onPress: () &#123;</span><br><span class="line">                      setState(() &#123;</span><br><span class="line">                        updateColour(Gender.male);</span><br><span class="line">                      &#125;);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    colour: maleCardColour,</span><br><span class="line">                    cardChild: IconContent(</span><br><span class="line">                      text: <span class="string">"MALE"</span>,</span><br><span class="line">                      icon: FontAwesomeIcons.mars,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Expanded(</span><br><span class="line">                  child: ReusableCard(</span><br><span class="line">                    onPress: () &#123;</span><br><span class="line">                      setState(() &#123;</span><br><span class="line">                        updateColour(Gender.female);</span><br><span class="line">                      &#125;);</span><br><span class="line">                    &#125;,</span><br><span class="line">                    colour: femaleCardColour,</span><br><span class="line">                    cardChild: IconContent(</span><br><span class="line">                      text: <span class="string">"FEMALE"</span>,</span><br><span class="line">                      icon: FontAwesomeIcons.venus,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: ReusableCard(</span><br><span class="line">              colour: kActiveCardColour,</span><br><span class="line">              cardChild: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  Text(</span><br><span class="line">                    <span class="string">'HEIGHT'</span>,</span><br><span class="line">                    style: kLabelTextStyle,</span><br><span class="line">                  ),</span><br><span class="line">                  Row(</span><br><span class="line">                    mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                    crossAxisAlignment: CrossAxisAlignment.baseline,</span><br><span class="line">                    textBaseline: TextBaseline.alphabetic,</span><br><span class="line">                    children: &lt;Widget&gt;[</span><br><span class="line">                      Text(</span><br><span class="line">                        height.toString(),</span><br><span class="line">                        style: kNumberTextStyle,</span><br><span class="line">                      ),</span><br><span class="line">                      Text(</span><br><span class="line">                        <span class="string">'cm'</span>,</span><br><span class="line">                        style: kLabelTextStyle,</span><br><span class="line">                      ),</span><br><span class="line">                    ],</span><br><span class="line">                  ),</span><br><span class="line">                  SliderTheme(</span><br><span class="line">                    data: SliderTheme.of(context).copyWith(</span><br><span class="line">                        inactiveTrackColor: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">                        activeTrackColor: Colors.white,</span><br><span class="line">                        thumbColor: Color(<span class="number">0xFFEB1555</span>),</span><br><span class="line">                        overlayColor: Color(<span class="number">0x29EB1555</span>),</span><br><span class="line">                        thumbShape:</span><br><span class="line">                            RoundSliderThumbShape(enabledThumbRadius: <span class="number">15.0</span>),</span><br><span class="line">                        overlayShape:</span><br><span class="line">                            RoundSliderOverlayShape(overlayRadius: <span class="number">30.0</span>)),</span><br><span class="line">                    child: Slider(</span><br><span class="line">                      value: height.toDouble(),</span><br><span class="line">                      min: <span class="number">120.0</span>,</span><br><span class="line">                      max: <span class="number">220.0</span>,</span><br><span class="line">                      onChanged: (<span class="built_in">double</span> newValue) &#123;</span><br><span class="line">                        setState(() &#123;</span><br><span class="line">                          height = newValue.round();</span><br><span class="line">                        &#125;);</span><br><span class="line">                      &#125;,</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Row(</span><br><span class="line">              children: &lt;Widget&gt;[</span><br><span class="line">                Expanded(</span><br><span class="line">                  child: ReusableCard(</span><br><span class="line">                    colour: kActiveCardColour,</span><br><span class="line">                    cardChild: Column(</span><br><span class="line">                      mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                      children: &lt;Widget&gt;[</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">"WEIGHT"</span>,</span><br><span class="line">                          style: kLabelTextStyle,</span><br><span class="line">                        ),</span><br><span class="line">                        Text(</span><br><span class="line">                          weight.toString(),</span><br><span class="line">                          style: kNumberTextStyle,</span><br><span class="line">                        ),</span><br><span class="line">                        Row(</span><br><span class="line">                          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                          children: &lt;Widget&gt;[</span><br><span class="line">                            RoundIconButton(</span><br><span class="line">                              icon: FontAwesomeIcons.minus,</span><br><span class="line">                              onPressed: () &#123;</span><br><span class="line">                                setState(() &#123;</span><br><span class="line">                                  weight--;</span><br><span class="line">                                &#125;);</span><br><span class="line">                              &#125;,</span><br><span class="line">                            ),</span><br><span class="line">                            SizedBox(</span><br><span class="line">                              width: <span class="number">10.0</span>,</span><br><span class="line">                            ),</span><br><span class="line">                            RoundIconButton(</span><br><span class="line">                              icon: FontAwesomeIcons.plus,</span><br><span class="line">                              onPressed: () &#123;</span><br><span class="line">                                setState(() &#123;</span><br><span class="line">                                  weight++;</span><br><span class="line">                                &#125;);</span><br><span class="line">                              &#125;,</span><br><span class="line">                            ),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">                Expanded(</span><br><span class="line">                  child: ReusableCard(</span><br><span class="line">                    colour: kActiveCardColour,</span><br><span class="line">                    cardChild: Column(</span><br><span class="line">                      children: &lt;Widget&gt;[</span><br><span class="line">                        Text(</span><br><span class="line">                          <span class="string">"AGE"</span>,</span><br><span class="line">                          style: kLabelTextStyle,</span><br><span class="line">                        ),</span><br><span class="line">                        Text(</span><br><span class="line">                          age.toString(),</span><br><span class="line">                          style: kNumberTextStyle,</span><br><span class="line">                        ),</span><br><span class="line">                        Row(</span><br><span class="line">                          mainAxisAlignment: MainAxisAlignment.center,</span><br><span class="line">                          children: &lt;Widget&gt;[</span><br><span class="line">                            RoundIconButton(</span><br><span class="line">                              icon: FontAwesomeIcons.minus,</span><br><span class="line">                              onPressed: () &#123;</span><br><span class="line">                                setState(() &#123;</span><br><span class="line">                                  age--;</span><br><span class="line">                                &#125;);</span><br><span class="line">                              &#125;,</span><br><span class="line">                            ),</span><br><span class="line">                            SizedBox(</span><br><span class="line">                              width: <span class="number">10.0</span>,</span><br><span class="line">                            ),</span><br><span class="line">                            RoundIconButton(</span><br><span class="line">                              icon: FontAwesomeIcons.plus,</span><br><span class="line">                              onPressed: () &#123;</span><br><span class="line">                                setState(() &#123;</span><br><span class="line">                                  age++;</span><br><span class="line">                                &#125;);</span><br><span class="line">                              &#125;,</span><br><span class="line">                            ),</span><br><span class="line">                          ],</span><br><span class="line">                        ),</span><br><span class="line">                      ],</span><br><span class="line">                    ),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              ],</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          BottomButton(</span><br><span class="line">            buttonTitle: <span class="string">'CALCULATE'</span>,</span><br><span class="line">            onTap: () &#123;</span><br><span class="line">              CalculateBrain calc =</span><br><span class="line">                  CalculateBrain(height: height, weight: weight);</span><br><span class="line"></span><br><span class="line">              Navigator.push(</span><br><span class="line">                context,</span><br><span class="line">                MaterialPageRoute(</span><br><span class="line">                  builder: (context) =&gt; ResultsPage(</span><br><span class="line">                    bmiResult: calc.calculateBMI(),</span><br><span class="line">                    resultText: calc.getResult(),</span><br><span class="line">                    interpretation: calc.getInterpretation(),</span><br><span class="line">                  ),</span><br><span class="line">                ),</span><br><span class="line">              );</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="results-page-dart"><a href="#results-page-dart" class="headerlink" title="results_page.dart"></a>results_page.dart</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'../constants.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bmi_calculator/components/reusable_card.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:bmi_calculator/components/bottom_button.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ResultsPage</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  ResultsPage(</span><br><span class="line">      &#123;<span class="meta">@required</span> <span class="keyword">this</span>.bmiResult,</span><br><span class="line">      <span class="meta">@required</span> <span class="keyword">this</span>.resultText,</span><br><span class="line">      <span class="meta">@required</span> <span class="keyword">this</span>.interpretation&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> bmiResult;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> resultText;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">String</span> interpretation;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Scaffold(</span><br><span class="line">      appBar: AppBar(</span><br><span class="line">        title: Text(<span class="string">"BMI CALCULATOR"</span>),</span><br><span class="line">        centerTitle: <span class="keyword">true</span>,</span><br><span class="line">      ),</span><br><span class="line">      body: Column(</span><br><span class="line">        crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">        mainAxisAlignment: MainAxisAlignment.spaceEvenly,</span><br><span class="line">        children: &lt;Widget&gt;[</span><br><span class="line">          Expanded(</span><br><span class="line">            child: Container(</span><br><span class="line">              padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">              alignment: Alignment.bottomLeft,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">"Your Result"</span>,</span><br><span class="line">                style: kTitleTextStyle,</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          Expanded(</span><br><span class="line">            flex: <span class="number">5</span>,</span><br><span class="line">            child: ReusableCard(</span><br><span class="line">              colour: kActiveCardColour,</span><br><span class="line">              cardChild: Column(</span><br><span class="line">                mainAxisAlignment: MainAxisAlignment.spaceEvenly,</span><br><span class="line">                crossAxisAlignment: CrossAxisAlignment.center,</span><br><span class="line">                children: &lt;Widget&gt;[</span><br><span class="line">                  Text(</span><br><span class="line">                    resultText.toUpperCase(),</span><br><span class="line">                    style: kResultTextStyle,</span><br><span class="line">                  ),</span><br><span class="line">                  Text(</span><br><span class="line">                    bmiResult,</span><br><span class="line">                    style: kBMITextStyle,</span><br><span class="line">                  ),</span><br><span class="line">                  Text(</span><br><span class="line">                    interpretation,</span><br><span class="line">                    textAlign: TextAlign.center,</span><br><span class="line">                    style: kBodyTextStyle,</span><br><span class="line">                  ),</span><br><span class="line">                ],</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">          BottomButton(</span><br><span class="line">            buttonTitle: <span class="string">"RE-CALCULATE"</span>,</span><br><span class="line">            onTap: () &#123;</span><br><span class="line">              Navigator.pop(context);</span><br><span class="line">            &#125;,</span><br><span class="line">          ),</span><br><span class="line">        ],</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="main-dart"><a href="#main-dart" class="headerlink" title="main.dart"></a>main.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'./screens/results_page.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'screens/input_page.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(BMICalculator());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">BMICalculator</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      theme: ThemeData.dark().copyWith(</span><br><span class="line">        primaryColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">        scaffoldBackgroundColor: Color(<span class="number">0xFF0A0D22</span>),</span><br><span class="line">        textTheme: TextTheme(</span><br><span class="line">          bodyText2: TextStyle(color: Colors.white),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line"></span><br><span class="line"><span class="comment">//      home: InputPage(),</span></span><br><span class="line">      initialRoute: <span class="string">'/'</span>,</span><br><span class="line">      routes: &#123;</span><br><span class="line">        <span class="string">'/'</span>: (context) =&gt; InputPage(),</span><br><span class="line">        <span class="string">'/first'</span>: (context) =&gt; ResultsPage(),</span><br><span class="line">      &#125;,</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="constants-dart"><a href="#constants-dart" class="headerlink" title="constants.dart"></a>constants.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kBottomContainerHeight = <span class="number">80.0</span>;</span><br><span class="line"><span class="keyword">const</span> kActiveCardColour = Color(<span class="number">0xFF1D1E33</span>);</span><br><span class="line"><span class="keyword">const</span> kBottomContainerColour = Color(<span class="number">0xFFEB1555</span>);</span><br><span class="line"><span class="keyword">const</span> kInactiveCardColor = Color(<span class="number">0xFF111328</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kLabelTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">18.0</span>,</span><br><span class="line">  color: Color(<span class="number">0xFF8D8E98</span>),</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kNumberTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">50.0</span>,</span><br><span class="line">  fontWeight: FontWeight.w900,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kLargeButtonTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">25.0</span>,</span><br><span class="line">  fontWeight: FontWeight.bold,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kTitleTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">50.0</span>,</span><br><span class="line">  fontWeight: FontWeight.bold,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kResultTextStyle = TextStyle(</span><br><span class="line">  color: Color(<span class="number">0xFF24D876</span>),</span><br><span class="line">  fontSize: <span class="number">20.0</span>,</span><br><span class="line">  fontWeight: FontWeight.bold,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kBMITextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">100.0</span>,</span><br><span class="line">  fontWeight: FontWeight.bold,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> kBodyTextStyle = TextStyle(</span><br><span class="line">  fontSize: <span class="number">22.0</span>,</span><br><span class="line">);</span><br></pre></td></tr></table></figure><h2 id="calculator-brain-dart"><a href="#calculator-brain-dart" class="headerlink" title="calculator_brain.dart"></a>calculator_brain.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'dart:math'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">CalculateBrain</span> </span>&#123;</span><br><span class="line">  CalculateBrain(&#123;<span class="keyword">this</span>.height, <span class="keyword">this</span>.weight&#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> height;</span><br><span class="line">  <span class="keyword">final</span> <span class="built_in">int</span> weight;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">double</span> _bmi;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> calculateBMI() &#123;</span><br><span class="line">    _bmi = weight / pow(height / <span class="number">100</span>, <span class="number">2</span>);</span><br><span class="line">    <span class="keyword">return</span> _bmi.toStringAsFixed(<span class="number">1</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getResult() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_bmi &gt;= <span class="number">25</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Overweight'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_bmi &gt; <span class="number">18.5</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Normal'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'Underweight'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getInterpretation() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_bmi &gt;= <span class="number">25</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a higher than normal body weight. Try to exercise more.'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> <span class="keyword">if</span> (_bmi &gt; <span class="number">18.5</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a normal body weight. Good job!'</span>;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">'You have a lower than normal body weight. You can eat a bit more.'</span>;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="Useful-links-for-Flutter"><a href="#Useful-links-for-Flutter" class="headerlink" title="Useful links for Flutter"></a>Useful links for Flutter</h1><ul><li>UI设计：<a href="https://dribbble.com/" target="_blank" rel="noopener">https://dribbble.com/</a></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://www.linkedin.com/learning/flutter-part-07-building-the-ui-or-flutter-part-07-building-uis?u=57692001" target="_blank" rel="noopener">https://www.linkedin.com/learning/flutter-part-07-building-the-ui-or-flutter-part-07-building-uis?u=57692001</a></p><h1 id="写的不容易，留个评论支持下吧"><a href="#写的不容易，留个评论支持下吧" class="headerlink" title="写的不容易，留个评论支持下吧~"></a>写的不容易，留个评论支持下吧~</h1></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Dongyang Yu</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/" title="Flutter 6. Building UIs">http://dongyang-yu.github.io/2020/02/26/Flutter-6-Building-UIs/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/UI/" rel="tag"><i class="fa fa-tag"></i> UI</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/02/25/Database-4-Normalization/" rel="prev" title="Database 4. Normalization"><i class="fa fa-chevron-left"></i> Database 4. Normalization</a></div><div class="post-nav-item"><a href="/2020/02/26/Flutter-useful-links/" rel="next" title="Flutter useful links">Flutter useful links <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#准备"><span class="nav-number">2.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Theme主题"><span class="nav-number">3.</span> <span class="nav-text">Theme主题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#自定义组件主题"><span class="nav-number">3.1.</span> <span class="nav-text">自定义组件主题</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#模块化"><span class="nav-number">4.</span> <span class="nav-text">模块化</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#将部件提取和重构为单独的类"><span class="nav-number">5.</span> <span class="nav-text">将部件提取和重构为单独的类</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#BoxDecoration组件"><span class="nav-number">5.1.</span> <span class="nav-text">BoxDecoration组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战一"><span class="nav-number">5.2.</span> <span class="nav-text">挑战一</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战一答案"><span class="nav-number">5.3.</span> <span class="nav-text">挑战一答案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#化简，优化-gt-重构组件"><span class="nav-number">5.4.</span> <span class="nav-text">化简，优化-&gt;重构组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Key-class"><span class="nav-number">5.5.</span> <span class="nav-text">Key class</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ReusableCard构造函数"><span class="nav-number">5.6.</span> <span class="nav-text">ReusableCard构造函数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#final-关键字"><span class="nav-number">5.6.1.</span> <span class="nav-text">final 关键字</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#区分final和const"><span class="nav-number">5.6.1.1.</span> <span class="nav-text">区分final和const</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战二"><span class="nav-number">5.7.</span> <span class="nav-text">挑战二</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#ReusableCard的可选参数"><span class="nav-number">5.8.</span> <span class="nav-text">ReusableCard的可选参数</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#挑战三：重构组件再尝试"><span class="nav-number">5.8.1.</span> <span class="nav-text">挑战三：重构组件再尝试</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#挑战三答案"><span class="nav-number">5.8.2.</span> <span class="nav-text">挑战三答案</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#模块化-amp-规范化"><span class="nav-number">5.9.</span> <span class="nav-text">模块化 &amp; 规范化</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#手势探测器部件-Gesture-detector-widget"><span class="nav-number">6.</span> <span class="nav-text">手势探测器部件 Gesture detector widget</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#代码实现"><span class="nav-number">6.1.</span> <span class="nav-text">代码实现</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Enum"><span class="nav-number">7.</span> <span class="nav-text">Enum</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战四"><span class="nav-number">7.1.</span> <span class="nav-text">挑战四</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战四答案"><span class="nav-number">7.2.</span> <span class="nav-text">挑战四答案</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Function也能作为类属性"><span class="nav-number">8.</span> <span class="nav-text">Function也能作为类属性</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Slider-滑块组件"><span class="nav-number">9.</span> <span class="nav-text">Slider 滑块组件</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#创建constants文件"><span class="nav-number">9.1.</span> <span class="nav-text">创建constants文件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#常量命名方法"><span class="nav-number">9.1.1.</span> <span class="nav-text">常量命名方法</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#回到滑块组件"><span class="nav-number">9.2.</span> <span class="nav-text">回到滑块组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#身高部分"><span class="nav-number">9.2.1.</span> <span class="nav-text">身高部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#单位部分"><span class="nav-number">9.2.2.</span> <span class="nav-text">单位部分</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#组件居中"><span class="nav-number">9.2.3.</span> <span class="nav-text">组件居中</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#添加滑块组件"><span class="nav-number">9.2.4.</span> <span class="nav-text">添加滑块组件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类型转换函数"><span class="nav-number">9.2.5.</span> <span class="nav-text">类型转换函数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#滑块组件主题自定义"><span class="nav-number">9.3.</span> <span class="nav-text">滑块组件主题自定义</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#类比"><span class="nav-number">9.4.</span> <span class="nav-text">类比</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#自定义组件-Customisation"><span class="nav-number">10.</span> <span class="nav-text">自定义组件 Customisation</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FloatingActionButton"><span class="nav-number">10.1.</span> <span class="nav-text">FloatingActionButton</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#RawMaterialButton"><span class="nav-number">10.2.</span> <span class="nav-text">RawMaterialButton</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#构建自定义组件"><span class="nav-number">10.3.</span> <span class="nav-text">构建自定义组件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#增加图标"><span class="nav-number">10.3.1.</span> <span class="nav-text">增加图标</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#onPressed-参数传递"><span class="nav-number">10.3.2.</span> <span class="nav-text">onPressed() 参数传递</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Routes-and-navigation导航"><span class="nav-number">11.</span> <span class="nav-text">Routes and navigation导航</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#回到BMI"><span class="nav-number">11.1.</span> <span class="nav-text">回到BMI</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Dart-Maps"><span class="nav-number">12.</span> <span class="nav-text">Dart Maps</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#设计Results-scrren"><span class="nav-number">13.</span> <span class="nav-text">设计Results scrren</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#回顾-Refactor-组件"><span class="nav-number">13.1.</span> <span class="nav-text">回顾 Refactor 组件</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建文件夹，便于管理"><span class="nav-number">13.2.</span> <span class="nav-text">创建文件夹，便于管理</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#计算器模型和字符串操作"><span class="nav-number">14.</span> <span class="nav-text">计算器模型和字符串操作</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#示意图"><span class="nav-number">15.</span> <span class="nav-text">示意图</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Code"><span class="nav-number">16.</span> <span class="nav-text">Code</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#components"><span class="nav-number">16.1.</span> <span class="nav-text">components</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#bottom-button-dart"><span class="nav-number">16.1.1.</span> <span class="nav-text">bottom_button.dart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#icon-content-dart"><span class="nav-number">16.1.2.</span> <span class="nav-text">icon_content.dart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#reusable-card-dart"><span class="nav-number">16.1.3.</span> <span class="nav-text">reusable_card.dart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#round-icon-button-dart"><span class="nav-number">16.1.4.</span> <span class="nav-text">round_icon_button.dart</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#screens"><span class="nav-number">16.2.</span> <span class="nav-text">screens</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#input-page-dart"><span class="nav-number">16.2.1.</span> <span class="nav-text">input_page.dart</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#results-page-dart"><span class="nav-number">16.2.2.</span> <span class="nav-text">results_page.dart</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#main-dart"><span class="nav-number">16.3.</span> <span class="nav-text">main.dart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#constants-dart"><span class="nav-number">16.4.</span> <span class="nav-text">constants.dart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#calculator-brain-dart"><span class="nav-number">16.5.</span> <span class="nav-text">calculator_brain.dart</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Useful-links-for-Flutter"><span class="nav-number">17.</span> <span class="nav-text">Useful links for Flutter</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">18.</span> <span class="nav-text">Reference</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#写的不容易，留个评论支持下吧"><span class="nav-number">19.</span> <span class="nav-text">写的不容易，留个评论支持下吧~</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Dongyang Yu</p><div class="site-description" itemprop="description">Stay hungry. Stay foolish.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">22</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">16</span> <span class="site-state-item-name">tags</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Dongyang Yu</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0</div><span id="busuanzi_container_site_uv">Visitors：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></footer></div><script color="100,100,100" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: '6u1QF4uq57Xt5sYy1vN3QG9Y-gzGzoHsz',
      appKey: 'TQ6WrXofXm7N1jcK92KvLYoa',
      placeholder: "在这分享你的见解吧~",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: '' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});</script></body></html>