<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://Dongyang-Yu.github.io").hostname,root:"/",scheme:"Pisces",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="前言在这一节中，我们将回顾下Stateful和Stateless组件，并聊聊面向对象编程(OOP)的基本组成部分–类和对象。我们将做一个app来测试你的知识记忆如何。"><meta property="og:type" content="article"><meta property="og:title" content="Flutter 5. Modularizing and Organizing Flutter Code"><meta property="og:url" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/index.html"><meta property="og:site_name" content="Dongyang Yu&#39;s Blog"><meta property="og:description" content="前言在这一节中，我们将回顾下Stateful和Stateless组件，并聊聊面向对象编程(OOP)的基本组成部分–类和对象。我们将做一个app来测试你的知识记忆如何。"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/quizzler-demo.gif"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161247685.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161320267.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161419737.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161450377.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162035944.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162318111.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162424902.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223164024766.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200224194735869.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200225215248493.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200225215301749.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226071413542.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226073007255.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226150123924.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226152323385.png"><meta property="article:published_time" content="2020-02-23T22:15:48.000Z"><meta property="article:modified_time" content="2020-02-27T00:59:52.654Z"><meta property="article:author" content="Dongyang Yu"><meta property="article:tag" content="Modularization and organization"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/quizzler-demo.gif"><link rel="canonical" href="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>Flutter 5. Modularizing and Organizing Flutter Code | Dongyang Yu's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Dongyang Yu's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Hello World.</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Dongyang Yu"><meta itemprop="description" content="Stay hungry. Stay foolish."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dongyang Yu's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">Flutter 5. Modularizing and Organizing Flutter Code</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-02-23 15:15:48" itemprop="dateCreated datePublished" datetime="2020-02-23T15:15:48-07:00">2020-02-23</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-check-o"></i> </span><span class="post-meta-item-text">Edited on</span> <time title="Modified: 2020-02-26 17:59:52" itemprop="dateModified" datetime="2020-02-26T17:59:52-07:00">2020-02-26</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Flutter/" itemprop="url" rel="index"><span itemprop="name">Flutter</span> </a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine: </span><a title="valine" href="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h1><p>在这一节中，我们将回顾下<code>Stateful</code>和<code>Stateless</code>组件，并聊聊面向对象编程(OOP)的基本组成部分–类和对象。</p><p>我们将做一个app来测试你的知识记忆如何。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/quizzler-demo.gif" alt="Finished App"></p><a id="more"></a><h1 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h1><p>同样的，我们先出github上克隆一个仓库，地址是: <a href="https://github.com/londonappbrewery/quizzler-flutter.git" target="_blank" rel="noopener">https://github.com/londonappbrewery/quizzler-flutter.git</a></p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161247685.png" alt="image-20200223161247685"></p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161320267.png" alt="image-20200223161320267"></p><p>选择No,然后选择你保存的路径打开它。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161419737.png" alt="image-20200223161419737"></p><p>选择<code>Get dependencies</code>,以便它载入我们所引用的Flutter包，并为Flutter开发设置我们的项目。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223161450377.png" alt="image-20200223161450377"></p><p>运行一下，会显示如下图所示。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162035944.png" alt="image-20200223162035944"></p><h1 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h1><p>如果与多人合作时，可以在注释里写上<code>//TODO</code>用来提醒队友这部分需要完成。然后在Android Studio的下方状态栏里有个TODO栏，里面会显示有多少个TODO需要完成。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162318111.png" alt="image-20200223162318111"></p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223162424902.png" alt="image-20200223162424902"></p><h1 id="开始"><a href="#开始" class="headerlink" title="开始"></a>开始</h1><p>现在我们需要创建一个计分盘来记录我们答对多少题。这时候就需要我们用到的图标啦，安利一个之前也提过的网站：<a href="https://www.materialpalette.com/，可以搜索一些需要的图标！" target="_blank" rel="noopener">https://www.materialpalette.com/，可以搜索一些需要的图标！</a></p><p>我们需要√和×，分别对应是<code>Icons.check</code>和<code>Icons.close</code>。</p><p>这时我们可以在<code>Column</code>最下面添加一个<code>Row</code>组件，用于显示对与错。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200223164024766.png" alt="image-20200223164024766"></p><h2 id="增加计分盘图标"><a href="#增加计分盘图标" class="headerlink" title="增加计分盘图标"></a>增加计分盘图标</h2><p>因为，对与错都试<code>Icon</code>类型的，所以这里我们引入一个新的数据类型<code>List</code>，用于保存所有相同类型的变量。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Icon&gt; scoreKeeper = [</span><br><span class="line">    Icon(</span><br><span class="line">      Icons.check,</span><br><span class="line">      color: Colors.green,</span><br><span class="line">    ),</span><br><span class="line">    Icon(</span><br><span class="line">      Icons.close,</span><br><span class="line">      color: Colors.red,</span><br><span class="line">    ),</span><br><span class="line">  ];</span><br></pre></td></tr></table></figure><p>接着，在Row组件中将scoreKeeper设为其子组件。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Row(</span><br><span class="line">     children: scoreKeeper,</span><br><span class="line">     ),</span><br></pre></td></tr></table></figure><p>另外，在两个按钮中，我们可以模拟实现当点击True的时候，屏幕下方增加一个对的图标；点击False的时候，屏幕下方增加一个错的图标。使用<code>List</code>的<code>add()</code>方法。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">onPressed: () &#123;</span><br><span class="line">    setState(() &#123;</span><br><span class="line">        scoreKeeper.add(</span><br><span class="line">            Icon(</span><br><span class="line">                Icons.check,</span><br><span class="line">                color: Colors.green,</span><br><span class="line">            ),</span><br><span class="line">        );</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure><h3 id="List的一些内置方程（indexOf-add-）"><a href="#List的一些内置方程（indexOf-add-）" class="headerlink" title="List的一些内置方程（indexOf(), add()）"></a>List的一些内置方程（<code>indexOf(), add()</code>）</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> main() &#123;</span><br><span class="line">    <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; myList = [</span><br><span class="line">        <span class="string">'Angela'</span>,</span><br><span class="line">        <span class="string">'Dongyang'</span>,</span><br><span class="line">        <span class="string">'Mike'</span>,</span><br><span class="line">        <span class="string">'Rose'</span>,</span><br><span class="line">    ];</span><br><span class="line"><span class="built_in">print</span>(myList[<span class="number">3</span>]);              <span class="comment">// C行</span></span><br><span class="line"><span class="built_in">print</span>(myList.indexOf(<span class="string">'Mike'</span>)); <span class="comment">// D行</span></span><br><span class="line">myList.add(<span class="string">'Josh'</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>注意计算机中数组的索引是<u>从0开始</u>的，所以<code>myList[3]</code>其实是数组中的第四个元素，即<code>Rose</code>；D行中<code>indexOf()</code>方法其实是返回元素值为<code>Mike</code>的索引，即<code>2</code>。<code>add()</code>方法是在数组最后添加一个新元素，这也是我们用于增加图标的方法！</p><p>同样地，对于<code>Dart</code>的语法问题，去官网查找即可，链接直通车：<a href="https://dart.dev/guides/language/language-tour#lists" target="_blank" rel="noopener">点我</a></p><h2 id="创建问题集"><a href="#创建问题集" class="headerlink" title="创建问题集"></a>创建问题集</h2><p>很多个字符串，是不是和上面图标有异曲同工之处？对，我们也创建一个<code>List</code>来储存不同的问题。在<code>main.dart</code>最下方有三行注释，把它里面对应的字符串复制一下粘贴过来，如下图所示。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; questions = [</span><br><span class="line">  <span class="string">'You can lead a cow down stairs but not up stairs.'</span>,</span><br><span class="line">  <span class="string">'Approximately one quarter of human bones are in the feet.'</span>,</span><br><span class="line">  <span class="string">'A slug\'s blood is green.'</span>,</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h3 id="注意"><a href="#注意" class="headerlink" title="注意"></a>注意</h3><p>最后一个字符串在<code>slug</code>和<code>&#39;s</code>之有一个反斜杠，这是为什么呢？因为字符串是通过两边加上引号来声明的，但英语中所有格的表示需要一个单引号来表示，如果去掉反斜杠，Flutter就会认为字符串是<code>A slug</code>而不是整句话，所以需要加上一个<u>反斜杠</u>来表明这是转义字符。条条大路通罗马，我们也可以把最外边的单引号换成双引号用来区分单与双！</p><h2 id="挑战1"><a href="#挑战1" class="headerlink" title="挑战1"></a>挑战1</h2><p>现在请你将<code>questions</code><u>数组里的元素</u>代替我们屏幕中间文字，并且当点击<code>正确</code>或<code>错误</code>按钮的时候，问题会跳转到下一个。</p><p>尝试一下吧。</p><h3 id="小技巧-1"><a href="#小技巧-1" class="headerlink" title="小技巧"></a>小技巧</h3><blockquote><p>快速定位组件在代码中的位置</p></blockquote><p>点击右侧的<code>Flutter Inspector</code>然后选择图中的小瞄准镜一样的东西，<code>Enable widget mode</code>，然后点击屏幕中的组件，就能自动跳转到相应的代码块啦。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200224194735869.png" alt="image-20200224194735869"></p><h2 id="挑战1-答案"><a href="#挑战1-答案" class="headerlink" title="挑战1 答案"></a>挑战1 答案</h2><p>找到之后将<code>Text</code>处的字符串替换为</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">child: Text(</span><br><span class="line">  questions[questionIndex],</span><br><span class="line">  textAlign: TextAlign.center,</span><br><span class="line">  style: TextStyle(</span><br><span class="line">    fontSize: <span class="number">25.0</span>,</span><br><span class="line">    color: Colors.white,</span><br><span class="line">  ),</span><br></pre></td></tr></table></figure><p>因为当点击按钮时需要跳转到下一个问题，所以我们需要定义变量，用于更新数组中的索引，所以在方法开头，声明个变量</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">int</span> questionIndex = <span class="number">0</span>;</span><br></pre></td></tr></table></figure><p>下一步就是更新索引啦，去到对应图标的<code>setState()</code>方法中，加上</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">questionIndex++;</span><br></pre></td></tr></table></figure><p>完整代码就是</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_QuizPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">QuizPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Icon&gt; scoreKeeper = [];</span><br><span class="line">  <span class="built_in">List</span>&lt;<span class="built_in">String</span>&gt; questions = [</span><br><span class="line">    <span class="string">'You can lead a cow down stairs but not up stairs.'</span>,</span><br><span class="line">    <span class="string">'Approximately one quarter of human bones are in the feet.'</span>,</span><br><span class="line">    <span class="string">'A slug\'s blood is green.'</span>,</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">int</span> questionIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Expanded(</span><br><span class="line">          flex: <span class="number">5</span>,</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">10.0</span>),</span><br><span class="line">            child: Center(</span><br><span class="line">              child: Text(</span><br><span class="line">                questions[questionIndex],</span><br><span class="line">                textAlign: TextAlign.center,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  fontSize: <span class="number">25.0</span>,</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Expanded(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">            child: FlatButton(</span><br><span class="line">              textColor: Colors.white,</span><br><span class="line">              color: Colors.green,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">'True'</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                  fontSize: <span class="number">20.0</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                setState(() &#123;</span><br><span class="line">                  questionIndex++;</span><br><span class="line">                  scoreKeeper.add(</span><br><span class="line">                    Icon(</span><br><span class="line">                      Icons.check,</span><br><span class="line">                      color: Colors.green,</span><br><span class="line">                    ),</span><br><span class="line">                  );</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Expanded(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">            child: FlatButton(</span><br><span class="line">              color: Colors.red,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">'False'</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  fontSize: <span class="number">20.0</span>,</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                setState(() &#123;</span><br><span class="line">                  questionIndex++;</span><br><span class="line">                  scoreKeeper.add(</span><br><span class="line">                    Icon(</span><br><span class="line">                      Icons.close,</span><br><span class="line">                      color: Colors.red,</span><br><span class="line">                    ),</span><br><span class="line">                  );</span><br><span class="line">                &#125;);</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Row(</span><br><span class="line">          children: scoreKeeper,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="查看答案是否正确"><a href="#查看答案是否正确" class="headerlink" title="查看答案是否正确"></a>查看答案是否正确</h2><p>最简单的方式就是再创建一个List，用来存放对应问题的答案，然后再去比较，如果正确，计分板就显示一个正确图标；如果错误，就显示错误图标。</p><h2 id="Class-和-Object"><a href="#Class-和-Object" class="headerlink" title="Class 和 Object"></a>Class 和 Object</h2><p>但现在我们介绍一下<code>class</code>，可以简单地理解为<code>C</code>中的结构体，可以储存不同类型的数据（我们成为成员变量），但同时也可以创建它自己的方程去调用（我们称为数据成员）。</p><p>我们先创建一个新的Dart文件，文件名为<code>question.dart</code>；在里面写一个类<code>class</code>，类名为<code>Question</code></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(&#123;<span class="built_in">String</span> q, <span class="built_in">bool</span> a&#125;) &#123;</span><br><span class="line">    questionText = q;</span><br><span class="line"></span><br><span class="line">    questionAnswer = a;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>然后在<code>main.dart</code>里引用它</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'question.dart'</span>;</span><br></pre></td></tr></table></figure><p>这时候，我们创建一个数据类型为<code>Question</code>的List。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">List</span>&lt;Question&gt; questionSet = [</span><br><span class="line">  Question(q: <span class="string">'You can lead a cow down stairs but not up stairs.'</span>, a: <span class="keyword">false</span>),</span><br><span class="line">  Question(</span><br><span class="line">      q: <span class="string">'Approximately one quarter of human bones are in the feet.'</span>,</span><br><span class="line">      a: <span class="keyword">true</span>),</span><br><span class="line">  Question(q: <span class="string">'A slug\'s blood is green.'</span>, a: <span class="keyword">true</span>),</span><br><span class="line">];</span><br></pre></td></tr></table></figure><h1 id="OOP面向对象的编程语言"><a href="#OOP面向对象的编程语言" class="headerlink" title="OOP面向对象的编程语言"></a>OOP面向对象的编程语言</h1><p>插个话题，<code>Dart</code>是面向对象的一种编程语言，与它类似的有<code>Java,Swift</code>。它的出现是因为像<code>C</code>这样面向过程的编程语言，会随着程序的复杂，而不容易去跟随它的逻辑去编程。面向过程，意思是按照步骤一步一步的完成，而面向对象，是根据对象来完成任务。</p><p>拿“如何把大象装进冰箱”作为例子来讲吧。</p><table><thead><tr><th>区别</th><th>面向过程</th><th>面向对象</th></tr></thead><tbody><tr><td>思路</td><td>1. 把冰箱打开<br>2.把大象装进去<br>3.把冰箱门关上</td><td>1. 冰箱你把门给我打开<br>2.冰箱，你给我把大象装进去<br>3. 冰箱，你给我把门关上</td></tr><tr><td>代码实现</td><td>1. 开门(冰箱)<br>2. 装进去(冰箱，大象)<br>3. 关门(冰箱)</td><td>1. 冰箱.开门()<br>2. 冰箱.装入(大象)<br>3. 冰箱.关门()</td></tr></tbody></table><p>接下来我们介绍下面向对象的四大特性。</p><h2 id="OOP-四大特性"><a href="#OOP-四大特性" class="headerlink" title="OOP 四大特性"></a>OOP 四大特性</h2><h2 id="Abstraction"><a href="#Abstraction" class="headerlink" title="Abstraction"></a>Abstraction</h2><blockquote><p>我们来看看网上对于Abstraction的介绍：</p><p>Abstraction is selecting data from a larger pool to show only the relevant details to the object. It helps to reduce programming complexity and effort. In Java, abstraction is accomplished using Abstract classes and interfaces. It is one of the most important concepts of OOPs.</p><p>简单来说，抽象是从大量信息中找出只与某个对象相关的信息，将它抽离出来，减少编程的复杂性，使得代码更加“模块化”。也就是把实现不同功能的代码分成不同的类(Class)</p></blockquote><p>举个例子，苹果、香蕉、生梨、葡萄、桃子等，它们共同的特性就是水果。<u>得出水果概念的过程</u>，就是一个抽象的过程。</p><p>同理，在我们的程序，我们可以把<code>quiz问卷</code>给抽取出来，单独创建个类用于创建quiz。</p><p>右击<code>lib</code>文件夹<code>new</code>一个Dart文件，命名为<code>quiz_brain.dart</code>。在里面新建类<code>QuizBrain</code>。</p><blockquote><p>Tip: 类明开头字母一般大写</p></blockquote><p>创建个类型为List的成员变量，就像我们之前写的<code>questionSet</code>一样。</p><blockquote><p>记得引入<code>question.dart</code></p></blockquote><p>另外，我们增加些问题，大家可以点开<code>README.md</code>，将里面的问题复制过来。<strong>注意</strong>，为了简化操作，我们把<code>question.dart</code>里的<code>Question</code>方法传入参数改成<code>(String q, bool a)</code>，也就是去掉<code>{}</code>，省去备注<code>q: , a:</code>这一步。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200225215248493.png" alt="image-20200225215248493"></p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200225215301749.png" alt="image-20200225215301749"></p><h3 id="挑战二"><a href="#挑战二" class="headerlink" title="挑战二"></a>挑战二</h3><p>删去<code>main.dart</code>中的List，取而代之的是创建一个<code>QuizBrain</code>类的对象，我们暂且命名为<code>quizBrain</code>。然后修改屏幕显示文本处的代码，这个作为挑战二吧。</p><h3 id="挑战二答案"><a href="#挑战二答案" class="headerlink" title="挑战二答案"></a>挑战二答案</h3><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'quiz_brain.dart'</span>;</span><br><span class="line">QuizBrain quizBrain = QuizBrain(); <span class="comment">// here</span></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Quizzler());</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">			child: Text(</span><br><span class="line">                quizBrain.questionSet[questionIndex].questionText,</span><br><span class="line"><span class="comment">// ...</span></span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                correctAnswer =</span><br><span class="line">                    quizBrain.questionSet[questionIndex].questionAnswer;</span><br><span class="line"><span class="comment">// ...</span></span><br></pre></td></tr></table></figure><p>可能初学OOP的同学比较难以理解，<code>点操作符</code>表示使用该对象<code>quizBrain</code>数据成员或成员变量，此处我们使用的是它的变量<code>questionSet</code>，因为它是个数组，所以需要带上索引，但是这个数组的每个元素是个<code>String</code>和<code>bool</code>的组合，所以我们继续调用该元素的字符串，所以加上了<code>.questionText</code>。下方同理，我们调用的是对应问题的答案，所以使用<code>.questionAnswer</code>。</p><h3 id="思考"><a href="#思考" class="headerlink" title="思考"></a>思考</h3><p>如果我们在上方代码的11行之前修改对应答案的布尔值，不就会改变问题的答案了嘛？！这是非常不安全的，这时候就需要用到我们的封装概念了！</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">quizBrain.questionSet[questionIndex].questionAnswer = <span class="keyword">false</span>;</span><br><span class="line">correctAnswer = </span><br><span class="line">    quizBrain.questionSet[questionIndex].questionAnswer; <span class="comment">//如果原值为true</span></span><br></pre></td></tr></table></figure><h2 id="Encapsulation"><a href="#Encapsulation" class="headerlink" title="Encapsulation"></a>Encapsulation</h2><blockquote><p>我们聊到要保护好<code>QuizBrain</code>类里面的数据<code>questionSet</code>，防止被外界修改。应该怎么办呢？这简单啊，直接<u>切断该数据和外界的联系</u>啊，也就是不允许外界访问我们的数据，取而代之的是我们仅提供外界可以访问的方式。在代码中，也就是将数据成员私有化，外界获取不了数据。</p><p>以上就是封装的思想。总结一下，即隐藏对象的属性和细节，仅仅对外提供公共访问方式。</p></blockquote><p>接下来，我们用编程来更深一步理解。注意，此时<u>我们不用关键字来实现</u>。</p><p>我们将<code>QuizBrain</code>类中的<code>questionSet</code>重命名为<code>_questionSet</code>，加之下划线我们假设它已变成私有。此时<code>main.dart</code>里我们原先是调用<code>questionSet</code>的地方就会报错，我们假设它目前已私有化，无法被调用。</p><p>Ok，已隐藏对象的属性，此时我们需要创建可以让外界访问该属性的的方法。如下所示，外界只需要提供问题的索引就能访问该数据的<u><strong>值</strong></u>，此时以为只能获得该数据的值，所以不能进行修改等<u>不安全操作</u>。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">String</span> getQuestionText(<span class="built_in">int</span> questionIndex) &#123;</span><br><span class="line">  <span class="keyword">return</span> _questionSet[questionIndex].questionText;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">bool</span> getQuestionAnswer(<span class="built_in">int</span> questionIndex) &#123;</span><br><span class="line">  <span class="keyword">return</span> _questionSet[questionIndex].questionAnswer;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h3 id="越界报错"><a href="#越界报错" class="headerlink" title="越界报错"></a>越界报错</h3><p>不知道细心的读者在测试app时有没有发现bug，那就是当点击次数超过quiz问题的个数时会有<u>报错</u>。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226071413542.png" alt="image-20200226071413542"></p><p>这显然不是我们想要的，我们要做的是检查问题的索引是否已达到quiz问题上限，如果已经达到，我们就不能继续往后获得quiz数据了，以为会越界，也就是没有问题可以提供了。</p><p>我们可以在<code>quiz_brain.dart</code>里再创建一个方法<code>nextQuestion</code>，用于检查每次索引与数组长度，如果小于，则索引加1；否则不变。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">void</span> nextQuestion() &#123;</span><br><span class="line">  <span class="keyword">if</span> (_questionIndex &lt; _questionSet.length) &#123;</span><br><span class="line">    _questionIndex++;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><blockquote><p>.length是返回数组长度，比如我们有13个问题，则返回<u>13</u></p></blockquote><p>接着，在<code>main.dart</code>里的对应两个<u>对错按钮</u>里<code>onPressed()</code>方法的属性<code>setState()</code>里调用<code>quizBrain.nextQuestion()</code>;</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">Expanded(</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">      child: Text(</span><br><span class="line">        <span class="string">'False'</span>,</span><br><span class="line"><span class="comment">//...</span></span><br><span class="line">      onPressed: () &#123;</span><br><span class="line">        correctAnswer = quizBrain.getQuestionAnswer();</span><br><span class="line">          setState(() &#123;</span><br><span class="line">          quizBrain.nextQuestion();</span><br><span class="line"><span class="comment">//...</span></span><br></pre></td></tr></table></figure><p>然后重新运行app，点击试试看吧！</p><p>此时发现还是会越界，为什么呢？谜底揭晓，因为数组索引是从<strong>0</strong>开始的，如果有13个问题，索引就是<code>0~12</code>，最后一个是<strong>12</strong>，所以当<code>12</code>和<code>_questionSet.length(13)</code>比较时，还是正确，会继续加1，所以会造成越界，如果将if条件语句改成</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (_questionIndex &lt; _questionSet.length - <span class="number">1</span>)</span><br></pre></td></tr></table></figure><p>就不会报错了，它会停留在最后一个界面，不再更新。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226073007255.png" alt="image-20200226073007255"></p><h2 id="Inheritance"><a href="#Inheritance" class="headerlink" title="Inheritance"></a>Inheritance</h2><blockquote><p>抽象完之后，我们可能需要用到<u>继承</u>这一思想，也就是子类拥有父类<u>非私有</u>的属性和方法。</p></blockquote><p>比如之前说的苹果、香蕉、生梨、葡萄、桃子等，它们共同的特性就是水果。</p><p>我们通过代码来讲解。这里我们使用<a href="https://dartpad.dev/" target="_blank" rel="noopener">DartPad</a>进行编程示范。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> fruitNumber = <span class="number">3</span>;  </span><br><span class="line">  <span class="keyword">void</span> eatMe()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Come on, eat me"</span>);</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//继承成员变量的特点</span></span><br><span class="line">    <span class="comment">//当出现同名成员变量时</span></span><br><span class="line">    <span class="comment">//如果子类有，则调用子类自己的</span></span><br><span class="line">    <span class="comment">//如果子类没有，则调用父类的</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Apple</span> <span class="keyword">extends</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> weight = <span class="number">200</span>;</span><br><span class="line">  <span class="keyword">void</span> calories()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Apple is 50 calories per 100g"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  Fruit fruit = Fruit();</span><br><span class="line">  Apple fuji = Apple();</span><br><span class="line">  fruit.eatMe();</span><br><span class="line">  fuji.eatMe();</span><br><span class="line">  fuji.calories();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>比如<code>Apple</code>类<u>继承</u>了<code>Fruit</code>类，那么<code>Apple</code>的对象就可以调用父类的属性和方法，即<code>fruitNumber</code>和<code>eatMe</code>。但同时子类也可以有自己独特的属性和方法，如这里的<code>weight</code>和<code>calories</code>。</p><h2 id="Polymorphism"><a href="#Polymorphism" class="headerlink" title="Polymorphism"></a>Polymorphism</h2><blockquote><p>生活中，比如跑的动作，小猫、小狗和大象，跑起来是不一样的。再比如飞的动作，昆虫、鸟类和飞机，飞起来也是不一样的。可见，同一行为，通过不同的事物，可以体现出来的不同的形态。<strong>多态</strong>，描述的就是这样的状态。</p></blockquote><p>在重写<u>父类</u>的方法前，使用<code>@overrite</code>标明此方法是覆盖父类的<u>重载方法</u>。</p><p>同样以水果举例，苹果可以直接吃，但是对于菠萝来说，我们需要先削皮才能吃。这就是多态的意思，我们需要重写父类的<code>eatMe()</code>方法，比如加上一句“吃我前先削皮“。注意，代码中的<code>super.eatMe()</code>表示调用父类的<code>eatMe()</code>方法，所以输出时会是两句话。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226150123924.png" alt="image-20200226150123924"></p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">  <span class="built_in">int</span> fruitNumber = <span class="number">3</span>;  </span><br><span class="line">  <span class="keyword">void</span> eatMe()&#123;</span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"Come on, eat me"</span>);</span><br><span class="line">  &#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Pineapple</span> <span class="keyword">extends</span> <span class="title">Fruit</span></span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  <span class="keyword">void</span> eatMe()&#123;</span><br><span class="line">    <span class="keyword">super</span>.eatMe();</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">'But Peel the pineapple before you eat it'</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">  Pineapple pine = Pineapple();</span><br><span class="line">  pine.eatMe();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="完成计分板"><a href="#完成计分板" class="headerlink" title="完成计分板"></a>完成计分板</h1><p>好啦，了解完面向对象的四大特性，我们回到我们的项目来。目前，我们已经完成了quiz问题的载入，还差一步验证我们回答的正确性并正确显示在屏幕下方。这一步应该很简单了吧，使用个<code>ifelse</code>语句来判断自己的答案与正确答案，如果正确，显示✔，如果错误，显示✖。</p><p>大家先自己挑战下，看看能否完成。我会把代码放下下方。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> correctAnswer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> checkAnswer(<span class="built_in">bool</span> userPickedAnswer) &#123;</span><br><span class="line">  correctAnswer = quizBrain.getQuestionAnswer();</span><br><span class="line">  setState(() &#123;</span><br><span class="line">    <span class="keyword">if</span> (userPickedAnswer == correctAnswer) &#123;</span><br><span class="line">      scoreKeeper.add(</span><br><span class="line">        Icon(</span><br><span class="line">          Icons.check,</span><br><span class="line">          color: Colors.green,</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      scoreKeeper.add(</span><br><span class="line">        Icon(</span><br><span class="line">          Icons.close,</span><br><span class="line">          color: Colors.red,</span><br><span class="line">        ),</span><br><span class="line">      );</span><br><span class="line">    &#125;</span><br><span class="line">    quizBrain.nextQuestion();</span><br><span class="line">  &#125;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>接下来只需要在对应位置调用它即可！</p><h1 id="Constructor"><a href="#Constructor" class="headerlink" title="Constructor"></a>Constructor</h1><blockquote><p>现在我们来聊聊构造函数，构造函数是当创建对象时，给对象初始化属性的。</p></blockquote><p>比如在<code>question.dart</code>里：</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(<span class="built_in">String</span> q, <span class="built_in">bool</span> a) &#123;</span><br><span class="line">    questionText = q;</span><br><span class="line"></span><br><span class="line">    questionAnswer = a;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p><code>Question(String q, bool a)</code>就是构造函数，语法是<u>类名</u>加上<u>参数列表</u>。但是这里有个小技巧可以将其缩短成一行。是与<code>super</code>相对应的，叫做<code>this</code>，如果我用<code>this.questionText</code>，则表示我现在调用的是该类中的属性。</p><p>举个例子，如果我改写成如下所示</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(<span class="built_in">String</span> questionText, <span class="built_in">bool</span> questionAnswer) &#123;</span><br><span class="line">    questionText = questionText;</span><br><span class="line"></span><br><span class="line">    questionAnswer = questionAnswer;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">void</span> main()&#123;</span><br><span class="line">    Question object = Question(<span class="string">'hello'</span>,<span class="keyword">true</span>);</span><br><span class="line">    <span class="built_in">print</span>(object.questionText);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>当你运行时，会发现输出的是<code>null</code>,按理说应该输出’hello’啊。原因是编译器不知道构造函数里赋值语句两边哪个是该类的属性，所以为了区分是参数还是属性，我们加上<code>this.</code>用来表明当前使用的是类的属性。即</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(<span class="built_in">String</span> questionText, <span class="built_in">bool</span> questionAnswer) &#123;</span><br><span class="line">    <span class="keyword">this</span>.questionText = questionText;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">this</span>.questionAnswer = questionAnswer;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>更简便一点，我们可以认为输入的第一个参数是questionText，第二个是questionAnswer。则可以改写为</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(<span class="keyword">this</span>.questionText, <span class="keyword">this</span>.questionAnswer)；</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="挑战三"><a href="#挑战三" class="headerlink" title="挑战三"></a>挑战三</h1><p>和之前出现的问题类似，当我们回答完quiz问题时，应该结束，但是目前我们并没有完成这项功能。-</p><p>现在，我们可以复习下之前提到过的包，通过调用包来实现。</p><p>我们使用一个名为<a href="https://pub.dev/packages/rflutter_alert" target="_blank" rel="noopener">rflutter_alert</a>的包，当回答完所有问题，提示用户，并且将问题重置到初始问题。</p><p><img src="/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/image-20200226152323385.png" alt="image-20200226152323385"></p><h1 id="挑战三答案"><a href="#挑战三答案" class="headerlink" title="挑战三答案"></a>挑战三答案</h1><p>在安装完包后，在<code>quiz_brain.dart</code>里增加一个方法，用于判断是否完成quiz。返回值是用于判断是否需要重置计分板的。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">bool</span> checkAtEnd(context) &#123;</span><br><span class="line">  <span class="keyword">if</span> (_questionIndex == _questionSet.length - <span class="number">1</span>) &#123;</span><br><span class="line">    Alert(</span><br><span class="line">            context: context,</span><br><span class="line">            title: <span class="string">"Congratulations!"</span>,</span><br><span class="line">            desc: <span class="string">"You finish the quiz!"</span>)</span><br><span class="line">        .<span class="keyword">show</span>();</span><br><span class="line">    _questionIndex = <span class="number">0</span>; <span class="comment">// 如果完成，将quiz索引设为0</span></span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>回到<code>main。dart</code>，在两个按钮的<code>onPressed</code>方法里加上一句。意思是说如果到达quiz末尾，重置计分板。</p><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (quizBrain.checkAtEnd(context)) &#123;</span><br><span class="line">    scoreKeeper = [];</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h1 id="完整代码"><a href="#完整代码" class="headerlink" title="完整代码"></a>完整代码</h1><h2 id="main-dart"><a href="#main-dart" class="headerlink" title="main.dart"></a>main.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'package:flutter/material.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'quiz_brain.dart'</span>;</span><br><span class="line"></span><br><span class="line">QuizBrain quizBrain = QuizBrain();</span><br><span class="line"></span><br><span class="line"><span class="keyword">void</span> main() =&gt; runApp(Quizzler());</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Quizzler</span> <span class="keyword">extends</span> <span class="title">StatelessWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> MaterialApp(</span><br><span class="line">      home: Scaffold(</span><br><span class="line">        backgroundColor: Colors.grey.shade900,</span><br><span class="line">        body: SafeArea(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.symmetric(horizontal: <span class="number">10.0</span>),</span><br><span class="line">            child: QuizPage(),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">      ),</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuizPage</span> <span class="keyword">extends</span> <span class="title">StatefulWidget</span> </span>&#123;</span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  _QuizPageState createState() =&gt; _QuizPageState();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">_QuizPageState</span> <span class="keyword">extends</span> <span class="title">State</span>&lt;<span class="title">QuizPage</span>&gt; </span>&#123;</span><br><span class="line">  <span class="built_in">List</span>&lt;Icon&gt; scoreKeeper = [];</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> correctAnswer;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> checkAnswer(<span class="built_in">bool</span> userPickedAnswer) &#123;</span><br><span class="line">    correctAnswer = quizBrain.getQuestionAnswer();</span><br><span class="line">    setState(() &#123;</span><br><span class="line">      <span class="keyword">if</span> (userPickedAnswer == correctAnswer) &#123;</span><br><span class="line">        scoreKeeper.add(</span><br><span class="line">          Icon(</span><br><span class="line">            Icons.check,</span><br><span class="line">            color: Colors.green,</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        scoreKeeper.add(</span><br><span class="line">          Icon(</span><br><span class="line">            Icons.close,</span><br><span class="line">            color: Colors.red,</span><br><span class="line">          ),</span><br><span class="line">        );</span><br><span class="line">      &#125;</span><br><span class="line"></span><br><span class="line">      quizBrain.nextQuestion();</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="meta">@override</span></span><br><span class="line">  Widget build(BuildContext context) &#123;</span><br><span class="line">    <span class="keyword">return</span> Column(</span><br><span class="line">      mainAxisAlignment: MainAxisAlignment.spaceBetween,</span><br><span class="line">      crossAxisAlignment: CrossAxisAlignment.stretch,</span><br><span class="line">      children: &lt;Widget&gt;[</span><br><span class="line">        Expanded(</span><br><span class="line">          flex: <span class="number">5</span>,</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">10.0</span>),</span><br><span class="line">            child: Center(</span><br><span class="line">              child: Text(</span><br><span class="line">                quizBrain.getQuestionText(),</span><br><span class="line">                textAlign: TextAlign.center,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  fontSize: <span class="number">25.0</span>,</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Expanded(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">            child: FlatButton(</span><br><span class="line">              textColor: Colors.white,</span><br><span class="line">              color: Colors.green,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">'True'</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                  fontSize: <span class="number">20.0</span>,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                checkAnswer(<span class="keyword">true</span>);</span><br><span class="line">                <span class="keyword">if</span> (quizBrain.checkAtEnd(context)) &#123;</span><br><span class="line">                  scoreKeeper = [];</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Expanded(</span><br><span class="line">          child: Padding(</span><br><span class="line">            padding: EdgeInsets.all(<span class="number">15.0</span>),</span><br><span class="line">            child: FlatButton(</span><br><span class="line">              color: Colors.red,</span><br><span class="line">              child: Text(</span><br><span class="line">                <span class="string">'False'</span>,</span><br><span class="line">                style: TextStyle(</span><br><span class="line">                  fontSize: <span class="number">20.0</span>,</span><br><span class="line">                  color: Colors.white,</span><br><span class="line">                ),</span><br><span class="line">              ),</span><br><span class="line">              onPressed: () &#123;</span><br><span class="line">                checkAnswer(<span class="keyword">false</span>);</span><br><span class="line">                <span class="keyword">if</span> (quizBrain.checkAtEnd(context)) &#123;</span><br><span class="line">                  scoreKeeper = [];</span><br><span class="line">                &#125;</span><br><span class="line">              &#125;,</span><br><span class="line">            ),</span><br><span class="line">          ),</span><br><span class="line">        ),</span><br><span class="line">        Row(</span><br><span class="line">          children: scoreKeeper,</span><br><span class="line">        ),</span><br><span class="line">      ],</span><br><span class="line">    );</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="quiz-brain-dart"><a href="#quiz-brain-dart" class="headerlink" title="quiz_brain.dart"></a>quiz_brain.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">'question.dart'</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">'package:rflutter_alert/rflutter_alert.dart'</span>;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">QuizBrain</span> </span>&#123;</span><br><span class="line">  <span class="built_in">int</span> _questionIndex = <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">List</span>&lt;Question&gt; _questionSet = [</span><br><span class="line">    Question(<span class="string">'Some cats are actually allergic to humans'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(<span class="string">'You can lead a cow down stairs but not up stairs.'</span>, <span class="keyword">false</span>),</span><br><span class="line">    Question(<span class="string">'Approximately one quarter of human bones are in the feet.'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(<span class="string">'A slug\'s blood is green.'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(<span class="string">'Buzz Aldrin\'s mother\'s maiden name was \"Moon\".'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(<span class="string">'It is illegal to pee in the Ocean in Portugal.'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'No piece of square dry paper can be folded in half more than 7 times.'</span>,</span><br><span class="line">        <span class="keyword">false</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'In London, UK, if you happen to die in the House of Parliament, you are technically entitled to a state funeral, because the building is considered too sacred a place.'</span>,</span><br><span class="line">        <span class="keyword">true</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'The loudest sound produced by any animal is 188 decibels. That animal is the African Elephant.'</span>,</span><br><span class="line">        <span class="keyword">false</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'The total surface area of two human lungs is approximately 70 square metres.'</span>,</span><br><span class="line">        <span class="keyword">true</span>),</span><br><span class="line">    Question(<span class="string">'Google was originally called \"Backrub\".'</span>, <span class="keyword">true</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'Chocolate affects a dog\'s heart and nervous system; a few ounces are enough to kill a small dog.'</span>,</span><br><span class="line">        <span class="keyword">true</span>),</span><br><span class="line">    Question(</span><br><span class="line">        <span class="string">'In West Virginia, USA, if you accidentally hit an animal with your car, you are free to take it home to eat.'</span>,</span><br><span class="line">        <span class="keyword">true</span>),</span><br><span class="line">  ];</span><br><span class="line"></span><br><span class="line">  <span class="keyword">void</span> nextQuestion() &#123;</span><br><span class="line">    <span class="keyword">if</span> (_questionIndex &lt; _questionSet.length - <span class="number">1</span>) &#123;</span><br><span class="line">      _questionIndex++;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">String</span> getQuestionText() &#123;</span><br><span class="line">    <span class="keyword">return</span> _questionSet[_questionIndex].questionText;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> getQuestionAnswer() &#123;</span><br><span class="line">    <span class="keyword">return</span> _questionSet[_questionIndex].questionAnswer;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="built_in">bool</span> checkAtEnd(context) &#123;</span><br><span class="line">    <span class="keyword">if</span> (_questionIndex == _questionSet.length - <span class="number">1</span>) &#123;</span><br><span class="line">      Alert(</span><br><span class="line">              context: context,</span><br><span class="line">              title: <span class="string">"Congratulations!"</span>,</span><br><span class="line">              desc: <span class="string">"You finish the quiz!"</span>)</span><br><span class="line">          .<span class="keyword">show</span>();</span><br><span class="line">      _questionIndex = <span class="number">0</span>;</span><br><span class="line">      <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="question-dart"><a href="#question-dart" class="headerlink" title="question.dart"></a>question.dart</h2><figure class="highlight dart"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Question</span> </span>&#123;</span><br><span class="line">  <span class="built_in">String</span> questionText;</span><br><span class="line">  <span class="built_in">bool</span> questionAnswer;</span><br><span class="line"></span><br><span class="line">  Question(<span class="keyword">this</span>.questionText, <span class="keyword">this</span>.questionAnswer);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="pubspec-yaml"><a href="#pubspec-yaml" class="headerlink" title="pubspec.yaml"></a>pubspec.yaml</h2><figure class="highlight yaml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="attr">name:</span> <span class="string">quizzler</span></span><br><span class="line"><span class="attr">description:</span> <span class="string">A</span> <span class="string">new</span> <span class="string">Flutter</span> <span class="string">application.</span></span><br><span class="line"></span><br><span class="line"><span class="attr">version:</span> <span class="number">1.0</span><span class="number">.0</span><span class="string">+1</span></span><br><span class="line"></span><br><span class="line"><span class="attr">environment:</span></span><br><span class="line">  <span class="attr">sdk:</span> <span class="string">"&gt;=2.1.0 &lt;3.0.0"</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dependencies:</span></span><br><span class="line">  <span class="attr">rflutter_alert:</span> <span class="string">^1.0.3</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">flutter:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line">  <span class="attr">cupertino_icons:</span> <span class="string">^0.1.2</span></span><br><span class="line"></span><br><span class="line"><span class="attr">dev_dependencies:</span></span><br><span class="line">  <span class="attr">flutter_test:</span></span><br><span class="line">    <span class="attr">sdk:</span> <span class="string">flutter</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="attr">flutter:</span></span><br><span class="line">  <span class="attr">uses-material-design:</span> <span class="literal">true</span></span><br></pre></td></tr></table></figure><h1 id="Recommended-website"><a href="#Recommended-website" class="headerlink" title="Recommended website"></a>Recommended website</h1><ul><li><p>字体网站: <a href="https://fonts.google.com" target="_blank" rel="noopener">https://fonts.google.com</a> :free for commercial use</p></li><li><p>图标网站: <a href="https://material.io/resources/icons/?style=baseline" target="_blank" rel="noopener">https://material.io/resources/icons/?style=baseline</a></p><ul><li>[推荐]网站：<a href="https://www.materialpalette.com/" target="_blank" rel="noopener">https://www.materialpalette.com/</a></li></ul></li></ul><ul><li>Dart语法网站: <a href="https://dart.dev/guides/language/language-tour" target="_blank" rel="noopener">https://dart.dev/guides/language/language-tour</a></li></ul><h1 id="Reference"><a href="#Reference" class="headerlink" title="Reference"></a>Reference</h1><p><a href="https://www.linkedin.com/learning/flutter-part-06-modularizing-and-organizing-flutter-code/destini-choose-your-own-adventure-game?u=57692001" target="_blank" rel="noopener">https://www.linkedin.com/learning/flutter-part-06-modularizing-and-organizing-flutter-code/destini-choose-your-own-adventure-game?u=57692001</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Dongyang Yu</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/" title="Flutter 5. Modularizing and Organizing Flutter Code">http://dongyang-yu.github.io/2020/02/23/Flutter-5-Modularizing-and-Organizing-Flutter-Code/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Modularization-and-organization/" rel="tag"><i class="fa fa-tag"></i> Modularization and organization</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/02/23/Flutter-4-Dart-Packages/" rel="prev" title="Flutter 4. Dart Packages"><i class="fa fa-chevron-left"></i> Flutter 4. Dart Packages</a></div><div class="post-nav-item"><a href="/2020/02/24/Git-Notes/" rel="next" title="Git Notes">Git Notes <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#前言"><span class="nav-number">1.</span> <span class="nav-text">前言</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#准备"><span class="nav-number">2.</span> <span class="nav-text">准备</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#小技巧"><span class="nav-number">3.</span> <span class="nav-text">小技巧</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#开始"><span class="nav-number">4.</span> <span class="nav-text">开始</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#增加计分盘图标"><span class="nav-number">4.1.</span> <span class="nav-text">增加计分盘图标</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#List的一些内置方程（indexOf-add-）"><span class="nav-number">4.1.1.</span> <span class="nav-text">List的一些内置方程（indexOf(), add()）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#创建问题集"><span class="nav-number">4.2.</span> <span class="nav-text">创建问题集</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#注意"><span class="nav-number">4.2.1.</span> <span class="nav-text">注意</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战1"><span class="nav-number">4.3.</span> <span class="nav-text">挑战1</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#小技巧-1"><span class="nav-number">4.3.1.</span> <span class="nav-text">小技巧</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#挑战1-答案"><span class="nav-number">4.4.</span> <span class="nav-text">挑战1 答案</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#查看答案是否正确"><span class="nav-number">4.5.</span> <span class="nav-text">查看答案是否正确</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Class-和-Object"><span class="nav-number">4.6.</span> <span class="nav-text">Class 和 Object</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#OOP面向对象的编程语言"><span class="nav-number">5.</span> <span class="nav-text">OOP面向对象的编程语言</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#OOP-四大特性"><span class="nav-number">5.1.</span> <span class="nav-text">OOP 四大特性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Abstraction"><span class="nav-number">5.2.</span> <span class="nav-text">Abstraction</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#挑战二"><span class="nav-number">5.2.1.</span> <span class="nav-text">挑战二</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#挑战二答案"><span class="nav-number">5.2.2.</span> <span class="nav-text">挑战二答案</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#思考"><span class="nav-number">5.2.3.</span> <span class="nav-text">思考</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Encapsulation"><span class="nav-number">5.3.</span> <span class="nav-text">Encapsulation</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#越界报错"><span class="nav-number">5.3.1.</span> <span class="nav-text">越界报错</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Inheritance"><span class="nav-number">5.4.</span> <span class="nav-text">Inheritance</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Polymorphism"><span class="nav-number">5.5.</span> <span class="nav-text">Polymorphism</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#完成计分板"><span class="nav-number">6.</span> <span class="nav-text">完成计分板</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Constructor"><span class="nav-number">7.</span> <span class="nav-text">Constructor</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#挑战三"><span class="nav-number">8.</span> <span class="nav-text">挑战三</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#挑战三答案"><span class="nav-number">9.</span> <span class="nav-text">挑战三答案</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#完整代码"><span class="nav-number">10.</span> <span class="nav-text">完整代码</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#main-dart"><span class="nav-number">10.1.</span> <span class="nav-text">main.dart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#quiz-brain-dart"><span class="nav-number">10.2.</span> <span class="nav-text">quiz_brain.dart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#question-dart"><span class="nav-number">10.3.</span> <span class="nav-text">question.dart</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#pubspec-yaml"><span class="nav-number">10.4.</span> <span class="nav-text">pubspec.yaml</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Recommended-website"><span class="nav-number">11.</span> <span class="nav-text">Recommended website</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Reference"><span class="nav-number">12.</span> <span class="nav-text">Reference</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Dongyang Yu</p><div class="site-description" itemprop="description">Stay hungry. Stay foolish.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">18</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">6</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">13</span> <span class="site-state-item-name">tags</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Dongyang Yu</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0</div><span id="busuanzi_container_site_uv">Visitors：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></footer></div><script color="100,100,100" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: '6u1QF4uq57Xt5sYy1vN3QG9Y-gzGzoHsz',
      appKey: 'TQ6WrXofXm7N1jcK92KvLYoa',
      placeholder: "在这分享你的见解吧~",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: '' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});</script></body></html>