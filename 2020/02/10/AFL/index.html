<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#222"><meta name="generator" content="Hexo 4.2.0"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png"><link rel="mask-icon" href="/images/logo.svg" color="#222"><link rel="stylesheet" href="/css/main.css"><link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css"><script id="hexo-configurations">var NexT=window.NexT||{},CONFIG={hostname:new URL("http://Dongyang-Yu.github.io").hostname,root:"/",scheme:"Pisces",version:"7.7.0",exturl:!1,sidebar:{position:"left",display:"post",padding:18,offset:12,onmobile:!1},copycode:{enable:!1,show_result:!1,style:null},back2top:{enable:!0,sidebar:!1,scrollpercent:!1},bookmark:{enable:!1,color:"#222",save:"auto"},fancybox:!1,mediumzoom:!1,lazyload:!1,pangu:!1,comments:{style:"tabs",active:null,storage:!0,lazyload:!1,nav:null},algolia:{appID:"",apiKey:"",indexName:"",hits:{per_page:10},labels:{input_placeholder:"Search for Posts",hits_empty:"We didn't find any results for the search: ${query}",hits_stats:"${hits} results found in ${time} ms"}},localsearch:{enable:!0,trigger:"auto",top_n_per_article:1,unescape:!1,preload:!1},path:"search.xml",motion:{enable:!0,async:!1,transition:{post_block:"fadeIn",post_header:"slideDownIn",post_body:"slideDownIn",coll_header:"slideLeftIn",sidebar:"slideUpIn"}}}</script><meta name="description" content="使用AFL来插桩(instrumentation)选择C程序用个简单的C程序作为例子123456789101112131415161718192021222324252627282930313233343536&#x2F;&#x2F; 文件名暂设为afl_test.c#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;unistd.h&gt;"><meta property="og:type" content="article"><meta property="og:title" content="AFL"><meta property="og:url" content="http://dongyang-yu.github.io/2020/02/10/AFL/index.html"><meta property="og:site_name" content="Dongyang Yu&#39;s Blog"><meta property="og:description" content="使用AFL来插桩(instrumentation)选择C程序用个简单的C程序作为例子123456789101112131415161718192021222324252627282930313233343536&#x2F;&#x2F; 文件名暂设为afl_test.c#include &lt;stdio.h&gt; #include &lt;stdlib.h&gt; #include &lt;unistd.h&gt;"><meta property="og:locale" content="en_US"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208110130660.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208110450127.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208110649545.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/1552021969_5c81f9d1d0676.jpg!small"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208110908820.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208120058632.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208120129245.png"><meta property="og:image" content="file:///media/dongyang/Office/_NAU%20course/1-2020%20Spring/CS-499%20EMBEDDED%20TESTING/Embeded-Notes/AFL%20(American%20fuzzy%20lop).assets/image-20200208120227211.png?lastModify=1581188615"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208120142338.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208120151587.png"><meta property="og:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208120207846.png"><meta property="article:published_time" content="2020-02-10T18:12:51.000Z"><meta property="article:modified_time" content="2020-02-10T18:13:46.928Z"><meta property="article:author" content="Dongyang Yu"><meta property="article:tag" content="Fuzzing"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="http://dongyang-yu.github.io/2020/02/10/AFL/image-20200208110130660.png"><link rel="canonical" href="http://dongyang-yu.github.io/2020/02/10/AFL/"><script id="page-configurations">CONFIG.page={sidebar:"",isHome:!1,isPost:!0}</script><title>AFL | Dongyang Yu's Blog</title><noscript><style>.sidebar-inner,.use-motion .brand,.use-motion .collection-header,.use-motion .comments,.use-motion .menu-item,.use-motion .pagination,.use-motion .post-block,.use-motion .post-body,.use-motion .post-header{opacity:initial}.use-motion .site-subtitle,.use-motion .site-title{opacity:initial;top:initial}.use-motion .logo-line-before i{left:initial}.use-motion .logo-line-after i{right:initial}</style></noscript><script type="text/javascript" src="//cdn.bootcss.com/canvas-nest.js/1.0.0/canvas-nest.min.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><div class="container use-motion"><div class="headband"></div><header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="header-inner"><div class="site-brand-container"><div class="site-meta"><div><a href="/" class="brand" rel="start"><span class="logo-line-before"><i></i></span> <span class="site-title">Dongyang Yu's Blog</span> <span class="logo-line-after"><i></i></span></a></div><p class="site-subtitle">Hello World.</p></div><div class="site-nav-toggle"><div class="toggle" aria-label="Toggle navigation bar"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div></div></div><nav class="site-nav"><ul id="menu" class="menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-fw fa-home"></i>Home</a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-fw fa-tags"></i>Tags</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-fw fa-th"></i>Categories</a></li><li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="fa fa-fw fa-archive"></i>Archives</a></li><li class="menu-item menu-item-search"><a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>Search</a></li></ul></nav><div class="site-search"><div class="popup search-popup"><div class="search-header"><span class="search-icon"><i class="fa fa-search"></i></span><div class="search-input-container"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="Searching..." spellcheck="false" type="text" id="search-input"></div><span class="popup-btn-close"><i class="fa fa-times-circle"></i></span></div><div id="search-result"></div></div><div class="search-pop-overlay"></div></div></div></header><div class="back-to-top"><i class="fa fa-arrow-up"></i> <span>0%</span></div><main class="main"><div class="main-inner"><div class="content-wrap"><div class="content"><div class="posts-expand"><article itemscope itemtype="http://schema.org/Article" class="post-block" lang="en"><link itemprop="mainEntityOfPage" href="http://dongyang-yu.github.io/2020/02/10/AFL/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.gif"><meta itemprop="name" content="Dongyang Yu"><meta itemprop="description" content="Stay hungry. Stay foolish."></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="Dongyang Yu's Blog"></span><header class="post-header"><h1 class="post-title" itemprop="name headline">AFL</h1><div class="post-meta"><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-calendar-o"></i> </span><span class="post-meta-item-text">Posted on</span> <time title="Created: 2020-02-10 11:12:51 / Modified: 11:13:46" itemprop="dateCreated datePublished" datetime="2020-02-10T11:12:51-07:00">2020-02-10</time> </span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-folder-o"></i> </span><span class="post-meta-item-text">In</span> <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Fuzzing/" itemprop="url" rel="index"><span itemprop="name">Fuzzing</span> </a></span></span><span class="post-meta-item"><span class="post-meta-item-icon"><i class="fa fa-comment-o"></i> </span><span class="post-meta-item-text">Valine: </span><a title="valine" href="/2020/02/10/AFL/#valine-comments" itemprop="discussionUrl"><span class="post-comments-count valine-comment-count" data-xid="/2020/02/10/AFL/" itemprop="commentCount"></span></a></span></div></header><div class="post-body" itemprop="articleBody"><h1 id="使用AFL来插桩-instrumentation"><a href="#使用AFL来插桩-instrumentation" class="headerlink" title="使用AFL来插桩(instrumentation)"></a>使用AFL来插桩(instrumentation)</h1><h2 id="选择C程序"><a href="#选择C程序" class="headerlink" title="选择C程序"></a>选择C程序</h2><p>用个简单的C程序作为例子</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 文件名暂设为afl_test.c</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt; </span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vuln</span><span class="params">(<span class="keyword">char</span> *str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</span><br><span class="line">    <span class="keyword">if</span>(str[<span class="number">0</span>] == <span class="string">'A'</span> &amp;&amp; len == <span class="number">66</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        raise(SIGSEGV);</span><br><span class="line">        <span class="comment">//如果输入的字符串的首字符为A并且长度为66，则异常退出</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(str[<span class="number">0</span>] == <span class="string">'F'</span> &amp;&amp; len == <span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        raise(SIGSEGV);</span><br><span class="line">        <span class="comment">//如果输入的字符串的首字符为F并且长度为6，则异常退出</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"it is good!\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    gets(buf);<span class="comment">//存在栈溢出漏洞</span></span><br><span class="line">    <span class="built_in">printf</span>(buf);<span class="comment">//存在格式化字符串漏洞</span></span><br><span class="line">    vuln(buf);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>首先用afl-gcc进行编译,接着选择小于1k的文件(暂时命名为testcase) 作为输入，然后启动afl-fuzz程序，将刚才的输入文件(testcase) 作为程序的执行输入文件。AFL将在testcase的基础上进行自动变异，使程序产生crash，然后保存到某个指定文件夹下。</p><h2 id="AFL编译"><a href="#AFL编译" class="headerlink" title="AFL编译"></a>AFL编译</h2><p>将上面的afl_test.c进行编译：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">afl-gcc -g afl-test.c -o afl-test // ‘-o afl-test‘ 表示指定编译后的程序名为afl-test</span><br></pre></td></tr></table></figure><p>同样的是，若编译C++源码，则用<code>afl-g++</code></p><p>接着建立两个文件夹，分别是<code>fuzz_in</code>，<code>fuzz_out</code>,用来存放程序的输入和输出</p><p>在<code>fuzz_in</code>中还需要创建一个testcase的文件，随便输入一点东西即可，比如我们输入<code>aaaa</code>即可</p><p><strong>注意</strong></p><p>在编译项目时，通常有Makefile，这时就需要在Makefile中添加内容</p><p>gcc/g++重新编译目标程序的方法是：<br>CC=/path/to/afl/afl-gcc ./configure<br>make clean all<br>对于一个C++程序，要设置:<br>CXX=/path/to/afl/afl-g++.</p><p>afl-clang和afl-clang++的使用方法类似。</p><h2 id="开始Fuzz测试"><a href="#开始Fuzz测试" class="headerlink" title="开始Fuzz测试"></a>开始Fuzz测试</h2><p>For target binaries that accept input directly <strong>from stdin</strong>, the usual syntax is:<br>对那些可以直接从<strong>stdin</strong>读取输入的目标程序来说，语法如下：</p><blockquote><p>从stdin读取输入也就是说从键盘输入到缓冲区的东西</p></blockquote><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./afl-fuzz -i testcase_dir -o findings_dir /path/to/program [...params...]</span></span><br></pre></td></tr></table></figure><p>For programs that <strong>take input from a file</strong>, use ‘<strong>@@</strong>‘ to mark the location in the target’s command line where the input file name should be placed. The fuzzer will substitute this for you:<br>对从文件读取输入的目标程序来说，要用“@@”，语法如下</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./afl-fuzz -i testcase_dir -o findings_dir /path/to/program @@</span></span><br></pre></td></tr></table></figure><p>You can also use the <code>-f</code> option to have the mutated data written to <u>a specific file</u>. This is useful if the program expects a particular file extension or so.</p><p>在此例中，输入命令：</p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">afl-fuzz -i fuzz_in -o fuzz_out ./afl_test</span><br></pre></td></tr></table></figure><p>但一般都会报错</p><p><img src="/2020/02/10/AFL/image-20200208110130660.png" alt="image-20200208110130660"></p><p>根据提示，需要输入<code>echo core &gt;/proc/sys/kernel/core_pattern</code>，但是我们要在管理者权限下进行设置。</p><p>多以就进行：</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">sudo su</span><br><span class="line">echo core &gt;/proc/sys/kernel/core_pattern</span><br></pre></td></tr></table></figure><p>再次运行试试看呢，如果还是有报错，根据它的提示进行修改</p><p><img src="/2020/02/10/AFL/image-20200208110450127.png" alt="image-20200208110450127"></p><p>此处它要求我们修改性能</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">cd /sys/devices/system/cpu</span><br><span class="line">echo performance | tee cpu*/cpufreq/scaling_governor</span><br></pre></td></tr></table></figure><p>这样只是暂时修改了CPU运行模式为高性能，想要修改默认运行模式的话，请使用下方命令</p><p><strong>1、安装sysfsutils</strong></p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo apt-get install sysfsutils</span><br></pre></td></tr></table></figure><p><strong>2、编辑/etc/sysfs.conf</strong></p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo gedit /etc/sysfs.conf</span><br></pre></td></tr></table></figure><p><strong>3. 在文件下方增加如下语句:</strong></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">devices&#x2F;system&#x2F;cpu&#x2F;cpu0&#x2F;cpufreq&#x2F;scaling_governor &#x3D; performance</span><br></pre></td></tr></table></figure><p>返回到刚才的路径下～</p><p>再次运行我们就成功啦，wohoo～</p><p><img src="/2020/02/10/AFL/image-20200208110649545.png" alt="image-20200208110649545"></p><p>接下来，让我们试试看这里面这些东西都是些何方神圣。</p><h1 id="Interpreting-output"><a href="#Interpreting-output" class="headerlink" title="Interpreting output"></a>Interpreting output</h1><p>See the <a href="http://lcamtuf.coredump.cx/afl/status_screen.txt" target="_blank" rel="noopener">status_screen.txt</a> file for information on how to <strong>interpret</strong> the displayed stats and monitor the health of the process.</p><p>The fuzzing process will continue until you press <code>Ctrl-C</code>. At minimum, you want to allow the fuzzer to complete one queue cycle, which may take anywhere from <u>a couple of hours to a week or so</u>.</p><h2 id="1-Process-timing"><a href="#1-Process-timing" class="headerlink" title="1) Process timing"></a>1) Process timing</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+----------------------------------------------------+</span><br><span class="line">|        run time : 0 days, 8 hrs, 32 min, 43 sec    |</span><br><span class="line">|   last new path : 0 days, 0 hrs, 6 min, 40 sec     |</span><br><span class="line">| last uniq crash : none seen yet                    |</span><br><span class="line">|  last uniq hang : 0 days, 1 hrs, 24 min, 32 sec    |</span><br><span class="line">+----------------------------------------------------+</span><br></pre></td></tr></table></figure><p>这部分很容易理解，告诉我们fuzzer已经运行了多久</p><h2 id="2-Overall-results"><a href="#2-Overall-results" class="headerlink" title="2) Overall results"></a>2) Overall results</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------+</span><br><span class="line">|  cycles done : 0      |</span><br><span class="line">|  total paths : 2095   |</span><br><span class="line">| uniq crashes : 0      |</span><br><span class="line">|   uniq hangs : 19     |</span><br><span class="line">+-----------------------+</span><br></pre></td></tr></table></figure><blockquote><p>The first field in this section gives you the count of queue passes done so far - that is, the number of times the fuzzer went over all the interesting test cases discovered so far, fuzzed them, and <strong>looped back to the very beginning</strong>. Every fuzzing session should be allowed to complete at least one cycle; and ideally, should run much longer than that.<br>本节中的第一个字段给出了到目前为止队列传递的次数——也就是说，模糊化器检查到目前为止发现的所有有趣的测试用例、对它们进行模糊化并返回到最开始的次数。应允许每个模糊化会话至少完成一个周期；理想情况下，运行时间应该比这长得多</p></blockquote><p>这里包含了运行的总周期数、总路径数、崩溃数以及超时次数。</p><p>其中，总周期数可以用来作为何时停止fuzzing的参考。随着不断地fuzzing，周期数会不断增大，其颜色也会由<u>洋红色，逐步变为黄色、蓝色、绿色。</u>一般来说，当其变为<strong>绿色</strong>时，代表可执行的内容已经很少了，继续fuzzing下去也不会有什么新的发现了。此时，我们便可以通过Ctrl-C，<u>结束</u>当前的fuzzing</p><p><img src="/2020/02/10/AFL/1552021969_5c81f9d1d0676.jpg!small" alt="6.jpg"></p><h2 id="何时停止Fuzz"><a href="#何时停止Fuzz" class="headerlink" title="* 何时停止Fuzz"></a>* 何时停止Fuzz</h2><blockquote><p>当状态窗口中”cycles done”字段颜色变为<strong><u>绿色</u></strong>该字段的颜色可以作为何时停止测试的参考，随着周期数不断增大，其颜色也会由洋红色，逐步变为黄色、蓝色、绿色。当其变为绿色时，继续Fuzzing下去也很难有新的发现了，这时便可以通过Ctrl-C停止afl-fuzz。</p></blockquote><h2 id="3-Cycle-progress"><a href="#3-Cycle-progress" class="headerlink" title="3) Cycle progress"></a>3) Cycle progress</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+-------------------------------------+</span><br><span class="line">|  now processing : 1296 (61.86%)     |</span><br><span class="line">| paths timed out : 0 (0.00%)         |</span><br><span class="line">+-------------------------------------+</span><br></pre></td></tr></table></figure><p>This box tells you <strong>how far</strong> along the fuzzer is with the current queue cycle: it shows the <strong>ID of the test case</strong> it is currently working on, plus the number of inputs it decided to <strong>ditch</strong> because they were persistently timing out.</p><h2 id="4-Map-coverage"><a href="#4-Map-coverage" class="headerlink" title="4) Map coverage"></a>4) Map coverage</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------------------+</span><br><span class="line">|    map density : 10.15% / 29.07%     |</span><br><span class="line">| count coverage : 4.03 bits/tuple     |</span><br><span class="line">+--------------------------------------+</span><br></pre></td></tr></table></figure><p>The section provides some trivia about the coverage observed by the instrumentation embedded in the target binary. 本节提供了一些关于嵌入到目标二进制文件中的工具所观察到的覆盖率的细节。</p><p>框中的第一行告诉您我们已经命中了多少个分支元组，与位图可以容纳的数量成比例。左边的数字描述<u>当前输入</u>；右边的是<u>整个输入语料库的值</u>。</p><h2 id="5-Stage-progress"><a href="#5-Stage-progress" class="headerlink" title="5) Stage progress"></a>5) Stage progress</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+-------------------------------------+</span><br><span class="line">|  now trying : interest 32&#x2F;8         |</span><br><span class="line">| stage execs : 3996&#x2F;34.4k (11.62%)   |</span><br><span class="line">| total execs : 27.4M                 |</span><br><span class="line">|  exec speed : 891.7&#x2F;sec             |</span><br><span class="line">+-------------------------------------+</span><br></pre></td></tr></table></figure><p>这里包含正在测试的fuzzing策略、进度、目标的执行总次数、目标的执行速度</p><h2 id="6-Findings-in-depth"><a href="#6-Findings-in-depth" class="headerlink" title="6) Findings in depth"></a>6) Findings in depth</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">+--------------------------------------+</span><br><span class="line">| favored paths : 879 (41.96%)         |</span><br><span class="line">|  new edges on : 423 (20.19%)         |</span><br><span class="line">| total crashes : 0 (0 unique)         |</span><br><span class="line">|  total tmouts : 24 (19 unique)       |</span><br><span class="line">+--------------------------------------+</span><br></pre></td></tr></table></figure><p>This gives you several metrics that are of interest mostly to complete nerds.</p><p>The section includes the number of paths that the fuzzer likes the most based on a minimization algorithm baked into the code (these will get considerably more air time), and the number of test cases that actually resulted in better edge coverage (versus just pushing the branch hit counters up). There are also additional, more detailed counters for crashes and timeouts.<br>这一部分包括模糊化器最喜欢的路径的数量，这些路径是基于烘焙到代码中的最小化算法(这些将获得相当多的播放时间)，以及实际上导致更好的边缘覆盖的测试用例的数量(相对于仅仅向上推动分支命中计数器)。还有更多更详细的崩溃和超时计数器。</p><h2 id="7-Fuzzing-strategy-yields"><a href="#7-Fuzzing-strategy-yields" class="headerlink" title="7) Fuzzing strategy yields"></a>7) Fuzzing strategy yields</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">+-----------------------------------------------------+</span><br><span class="line">|   bit flips : 57/289k, 18/289k, 18/288k             |</span><br><span class="line">|  byte flips : 0/36.2k, 4/35.7k, 7/34.6k             |</span><br><span class="line">| arithmetics : 53/2.54M, 0/537k, 0/55.2k             |</span><br><span class="line">|  known ints : 8/322k, 12/1.32M, 10/1.70M            |</span><br><span class="line">|  dictionary : 9/52k, 1/53k, 1/24k                   |</span><br><span class="line">|       havoc : 1903/20.0M, 0/0                       |</span><br><span class="line">|        trim : 20.31%/9201, 17.05%                   |</span><br><span class="line">+-----------------------------------------------------+</span><br></pre></td></tr></table></figure><p>This is just another nerd-targeted section keeping track of how many paths we have netted, in proportion to the number of execs attempted, for each of the fuzzing strategies discussed earlier on. This serves to convincingly validate assumptions about the usefulness of the various approaches taken by afl-fuzz.<br>记录我们已经为前面讨论的每一个模糊化策略获得了多少条路径，与尝试的高管人数成比例。这有助于令人信服地验证afl-fuzz所采取的各种方法的有效性的假设。</p><h2 id="8-Path-geometry"><a href="#8-Path-geometry" class="headerlink" title="8) Path geometry"></a>8) Path geometry</h2><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">+---------------------+</span><br><span class="line">|    levels : 5       |</span><br><span class="line">|   pending : 1570    |</span><br><span class="line">|  pend fav : 583     |</span><br><span class="line">| own finds : 0       |</span><br><span class="line">|  imported : 0       |</span><br><span class="line">| stability : 100.00% |</span><br><span class="line">+---------------------+</span><br></pre></td></tr></table></figure><p>The first field in this section tracks the <strong>path depth</strong> reached through the guided fuzzing process.</p><p>The next field shows you the number of inputs that have not gone through any fuzzing yet.</p><h1 id="分析输出"><a href="#分析输出" class="headerlink" title="分析输出"></a>分析输出</h1><p>通过上图，我们看出一共跑出了6个unique的crash</p><p>进入对应的<code>fuzz_out</code>文件夹下看看有些什么</p><p><img src="/2020/02/10/AFL/image-20200208110908820.png" alt="image-20200208110908820"></p><h1 id="三个文件夹-queue-crashes-hangs"><a href="#三个文件夹-queue-crashes-hangs" class="headerlink" title="三个文件夹 (queue/, crashes/, hangs/)"></a>三个文件夹 (queue/, crashes/, hangs/)</h1><blockquote><p>created within the output directory and updated in real time</p></blockquote><ul><li><p><code>queue/</code>: <strong>test cases</strong> for every distinctive execution path, plus all the starting files given by the user. This is the synthesized <strong>corpus</strong>. 简单来说，就是<u>每个不同执行路径的测试用例</u></p><ul><li>Before using this corpus for any other purposes, you can shrink it to a smaller size using the <code>afl-cmin</code> tool. The tool will find a <strong>smaller subset</strong> of files offering equivalent edge coverage.</li></ul></li><li><p><code>crashes/</code>: unique test cases that cause the tested program to receive <strong>a fatal signal</strong> (e.g., SIGSEGV, SIGILL, SIGABRT). The entries are grouped by the received signal. 产生的crash的样例</p></li><li><p><code>hangs/</code>: unique test cases that cause the tested program to <strong>time out</strong>导致程序超时. The default time limit before something is classified as a hang is the larger of <u>1 second and the value of the -t parameter</u>. The value can be fine-tuned by setting <code>AFL_HANG_TMOUT</code>, but this is rarely necessary.</p></li></ul><p>Crashes and hangs are considered “<strong>unique</strong>“ if the associated execution paths involve any state transitions <u>not seen in previously-recorded faults</u>.</p><hr><h3 id="Tip1"><a href="#Tip1" class="headerlink" title="Tip1:"></a>Tip1:</h3><p>​ When you can’t reproduce a crash found by afl-fuzz, the most likely cause is that you are not setting <strong>the same memory limit</strong> as used by the tool.</p><p>​ Try:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> LIMIT_MB=50</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> ( <span class="built_in">ulimit</span> -Sv $[LIMIT_MB &lt;&lt; 10]; /path/to/tested_binary ... )</span></span><br></pre></td></tr></table></figure><h3 id="Tip2"><a href="#Tip2" class="headerlink" title="Tip2:"></a>Tip2:</h3><p>​ Any <u>existing output</u> directory can be also used to <strong>resume aborted jobs</strong>; try:</p><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ./afl-fuzz -i- -o existing_output_dir [...etc...]</span></span><br></pre></td></tr></table></figure><h3 id="Tip3"><a href="#Tip3" class="headerlink" title="Tip3:"></a>Tip3:</h3><p>​ If you have gnuplot installed, you can also generate some pretty graphs for any active fuzzing task using afl-plot. For an example of how this looks like, see <a href="http://lcamtuf.coredump.cx/afl/plot/.也可以使用afl-plot" target="_blank" rel="noopener">http://lcamtuf.coredump.cx/afl/plot/.也可以使用afl-plot</a> 为任何活动的模糊化任务生成一些漂亮的图形</p><hr><h2 id="处理测试结果-分析crash"><a href="#处理测试结果-分析crash" class="headerlink" title="处理测试结果,分析crash"></a>处理测试结果,分析crash</h2><p>进入之前设置的输出文件夹(fuzz_out)，使用xxd命令来查看crash的内容</p><p>对照着我们的源码来看</p><figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdlib.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;unistd.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt; </span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;signal.h&gt; </span></span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">vuln</span><span class="params">(<span class="keyword">char</span> *str)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> len = <span class="built_in">strlen</span>(str);</span><br><span class="line">    <span class="keyword">if</span>(str[<span class="number">0</span>] == <span class="string">'A'</span> &amp;&amp; len == <span class="number">66</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        raise(SIGSEGV); <span class="comment">//如果输入的字符串的首字符为A并且长度为66，则异常退出</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span> <span class="keyword">if</span>(str[<span class="number">0</span>] == <span class="string">'F'</span> &amp;&amp; len == <span class="number">6</span>)</span><br><span class="line">    &#123;</span><br><span class="line">        raise(SIGSEGV); <span class="comment">//如果输入的字符串的首字符为F并且长度为6，则异常退出</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">else</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="built_in">printf</span>(<span class="string">"it is good!\n"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">(<span class="keyword">int</span> argc, <span class="keyword">char</span> *argv[])</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">char</span> buf[<span class="number">100</span>]=&#123;<span class="number">0</span>&#125;;</span><br><span class="line">    gets(buf); <span class="comment">//存在栈溢出漏洞</span></span><br><span class="line">    <span class="built_in">printf</span>(buf); <span class="comment">//存在格式化字符串漏洞</span></span><br><span class="line">    vuln(buf);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>关于<a href="https://www.cnblogs.com/bonelee/p/6149543.html" target="_blank" rel="noopener">栈溢出</a>和<a href="https://blog.csdn.net/sealyao/article/details/5961330" target="_blank" rel="noopener">格式化字符串</a>漏洞，请点击相应链接。</p><p>第一个样例，发现符合<strong>栈溢出</strong>漏洞的crash情况</p><p><img src="/2020/02/10/AFL/image-20200208120058632.png" alt="image-20200208120058632"></p><p>第二个样例，发现符合首字符为‘F’且字符串长度为6的异常退出情况</p><p><img src="/2020/02/10/AFL/image-20200208120129245.png" alt="image-20200208120129245"></p><p>第三个样例，发现符合格式化字符串的%n任意地址写的漏洞情况</p><p><img src="file:///media/dongyang/Office/_NAU%20course/1-2020%20Spring/CS-499%20EMBEDDED%20TESTING/Embeded-Notes/AFL%20(American%20fuzzy%20lop).assets/image-20200208120227211.png?lastModify=1581188615" alt="image-20200208120227211"></p><p>第四个样例，发现符合栈溢出漏洞的crash情况</p><p><img src="/2020/02/10/AFL/image-20200208120142338.png" alt="image-20200208120142338"></p><p>第五个样例，发现符合栈溢出漏洞的crash情况</p><p><img src="/2020/02/10/AFL/image-20200208120151587.png" alt="image-20200208120151587"></p><p>第六个样例，发现符合首字符为A且字符串长度为66的异常退出情况</p><p><img src="/2020/02/10/AFL/image-20200208120207846.png" alt="image-20200208120207846"></p><p>Reference:</p><p><a href="https://xz.aliyun.com/t/4314" target="_blank" rel="noopener">https://xz.aliyun.com/t/4314</a></p><p><a href="http://lcamtuf.coredump.cx/afl/README.txt" target="_blank" rel="noopener">http://lcamtuf.coredump.cx/afl/README.txt</a></p></div><div><ul class="post-copyright"><li class="post-copyright-author"><strong>Post author: </strong>Dongyang Yu</li><li class="post-copyright-link"><strong>Post link: </strong><a href="http://dongyang-yu.github.io/2020/02/10/AFL/" title="AFL">http://dongyang-yu.github.io/2020/02/10/AFL/</a></li><li class="post-copyright-license"><strong>Copyright Notice: </strong>All articles in this blog are licensed under <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fa fa-fw fa-creative-commons"></i>BY-NC-SA</a> unless stating additionally.</li></ul></div><footer class="post-footer"><div class="post-tags"><a href="/tags/Fuzzing/" rel="tag"><i class="fa fa-tag"></i> Fuzzing</a></div><div class="post-nav"><div class="post-nav-item"><a href="/2020/02/10/Fuzz-testing-introduction/" rel="prev" title="Fuzz testing introduction"><i class="fa fa-chevron-left"></i> Fuzz testing introduction</a></div><div class="post-nav-item"><a href="/2020/02/10/libFuzzer/" rel="next" title="libFuzzer">libFuzzer <i class="fa fa-chevron-right"></i></a></div></div></footer></article></div></div><div class="comments" id="valine-comments"></div><script>window.addEventListener('tabs:register', () => {
    let activeClass = CONFIG.comments.activeClass;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }</script></div><div class="toggle sidebar-toggle"><span class="toggle-line toggle-line-first"></span> <span class="toggle-line toggle-line-middle"></span> <span class="toggle-line toggle-line-last"></span></div><aside class="sidebar"><div class="sidebar-inner"><ul class="sidebar-nav motion-element"><li class="sidebar-nav-toc">Table of Contents</li><li class="sidebar-nav-overview">Overview</li></ul><div class="post-toc-wrap sidebar-panel"><div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#使用AFL来插桩-instrumentation"><span class="nav-number">1.</span> <span class="nav-text">使用AFL来插桩(instrumentation)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#选择C程序"><span class="nav-number">1.1.</span> <span class="nav-text">选择C程序</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#AFL编译"><span class="nav-number">1.2.</span> <span class="nav-text">AFL编译</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#开始Fuzz测试"><span class="nav-number">1.3.</span> <span class="nav-text">开始Fuzz测试</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Interpreting-output"><span class="nav-number">2.</span> <span class="nav-text">Interpreting output</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-Process-timing"><span class="nav-number">2.1.</span> <span class="nav-text">1) Process timing</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-Overall-results"><span class="nav-number">2.2.</span> <span class="nav-text">2) Overall results</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#何时停止Fuzz"><span class="nav-number">2.3.</span> <span class="nav-text">* 何时停止Fuzz</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-Cycle-progress"><span class="nav-number">2.4.</span> <span class="nav-text">3) Cycle progress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-Map-coverage"><span class="nav-number">2.5.</span> <span class="nav-text">4) Map coverage</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-Stage-progress"><span class="nav-number">2.6.</span> <span class="nav-text">5) Stage progress</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-Findings-in-depth"><span class="nav-number">2.7.</span> <span class="nav-text">6) Findings in depth</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-Fuzzing-strategy-yields"><span class="nav-number">2.8.</span> <span class="nav-text">7) Fuzzing strategy yields</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#8-Path-geometry"><span class="nav-number">2.9.</span> <span class="nav-text">8) Path geometry</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#分析输出"><span class="nav-number">3.</span> <span class="nav-text">分析输出</span></a></li><li class="nav-item nav-level-1"><a class="nav-link" href="#三个文件夹-queue-crashes-hangs"><span class="nav-number">4.</span> <span class="nav-text">三个文件夹 (queue&#x2F;, crashes&#x2F;, hangs&#x2F;)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Tip1"><span class="nav-number">4.0.1.</span> <span class="nav-text">Tip1:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tip2"><span class="nav-number">4.0.2.</span> <span class="nav-text">Tip2:</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Tip3"><span class="nav-number">4.0.3.</span> <span class="nav-text">Tip3:</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#处理测试结果-分析crash"><span class="nav-number">4.1.</span> <span class="nav-text">处理测试结果,分析crash</span></a></li></ol></div></div><div class="site-overview-wrap sidebar-panel"><div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person"><p class="site-author-name" itemprop="name">Dongyang Yu</p><div class="site-description" itemprop="description">Stay hungry. Stay foolish.</div></div><div class="site-state-wrap motion-element"><nav class="site-state"><div class="site-state-item site-state-posts"><a href="/archives/"><span class="site-state-item-count">8</span> <span class="site-state-item-name">posts</span></a></div><div class="site-state-item site-state-categories"><a href="/categories/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">categories</span></a></div><div class="site-state-item site-state-tags"><a href="/tags/"><span class="site-state-item-count">5</span> <span class="site-state-item-name">tags</span></a></div></nav></div></div></div></aside><div id="sidebar-dimmer"></div></div></main><footer class="footer"><div class="footer-inner"><div class="copyright">&copy; <span itemprop="copyrightYear">2020</span> <span class="with-love"><i class="fa fa-user"></i> </span><span class="author" itemprop="copyrightHolder">Dongyang Yu</span></div><div class="powered-by">Powered by <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0</div><span class="post-meta-divider">|</span><div class="theme-info">Theme – <a href="https://pisces.theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.7.0</div><span id="busuanzi_container_site_uv">Visitors：<span class="busuanzi-value" id="busuanzi_value_site_pv"></span></span></div></footer></div><script color="100,100,100" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script><script src="/lib/anime.min.js"></script><script src="/lib/velocity/velocity.min.js"></script><script src="/lib/velocity/velocity.ui.min.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/schemes/pisces.js"></script><script src="/js/next-boot.js"></script><script src="/js/local-search.js"></script><script>NexT.utils.loadComments(document.querySelector('#valine-comments'), () => {
  NexT.utils.getScript('//unpkg.com/valine/dist/Valine.min.js', () => {
    var GUEST = ['nick', 'mail', 'link'];
    var guest = 'nick';
    guest = guest.split(',').filter(item => {
      return GUEST.includes(item);
    });
    new Valine({
      el: '#valine-comments',
      verify: false,
      notify: false,
      appId: '6u1QF4uq57Xt5sYy1vN3QG9Y-gzGzoHsz',
      appKey: 'TQ6WrXofXm7N1jcK92KvLYoa',
      placeholder: "在这分享你的见解吧~",
      avatar: 'mm',
      meta: guest,
      pageSize: '10' || 10,
      visitor: false,
      lang: '' || 'zh-cn',
      path: location.pathname,
      recordIP: false,
      serverURLs: ''
    });
  }, window.Valine);
});</script></body></html>